<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://swiftonserver.com/templating-with-swift-mustache/">
    <link rel="prev" href="https://swiftonserver.com/structured-concurrency-and-shared-state-in-swift/">
    <link rel="next" href="https://swiftonserver.com/useful-scripts-for-server-side-swift-libraries/">
    
    <title>Templating with Swift-Mustache - Swift on server</title>
    <meta name="description" content="Learn how to template emails and web pages with Swift-Mustache.">
    
    <meta property="og:url" content="https://swiftonserver.com/templating-with-swift-mustache/">
    <meta property="og:title" content="Templating with Swift-Mustache - Swift on server">
    <meta property="og:description" content="Learn how to template emails and web pages with Swift-Mustache.">
    <meta property="og:image" content="/assets/templating-with-swift-mustache/cover.jpg" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Templating with Swift-Mustache - Swift on server">
    <meta name="twitter:description" content="Learn how to template emails and web pages with Swift-Mustache.">
    <meta name="twitter:image" content="/assets/templating-with-swift-mustache/cover.jpg">
    
    <link rel="stylesheet" href="https://swiftonserver.com/css/modern-normalize.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/modern-base.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/variables.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/base.css">
    
    <link rel="stylesheet" href="https://swiftonserver.com/css/grid.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/navigation.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/footer.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/syntax.css">
    
    <link rel="stylesheet" href="https://swiftonserver.com/css/style.css">
    
    
    
    <link rel="shortcut icon" href="https://swiftonserver.com/images/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://swiftonserver.com/images/icons/icon-320.png" type="image/png">
    
    <link rel="apple-touch-icon" href="https://swiftonserver.com/images/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://swiftonserver.com/images/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://swiftonserver.com/images/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://swiftonserver.com/images/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://swiftonserver.com/images/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://swiftonserver.com/images/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://swiftonserver.com/images/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://swiftonserver.com/images/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://swiftonserver.com/images/icons/apple-touch-icon-180x180.png">
    
    <script type="text/javascript" src="https://swiftonserver.com//js/tooltips.js" async=""></script>

    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
        media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
        media="(prefers-color-scheme: dark)"
    >

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
          const container = document.querySelector("div#ss\\:tooltips");
          if (container !== null) {
              container.querySelectorAll('pre code').forEach((el) => {
                  el.classList.add('nohighlight');
              });
          }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
          document.querySelectorAll('section pre code:not(.language-swift').forEach((el) => {
              hljs.highlightElement(el);
          });
        });
    </script>


</head>

<body>
    <div id="site-container">

    <header id="navigation">
        <a href="/">
            <figure>
                <picture>
                    <source
                        srcset="https://swiftonserver.com/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        src="https://swiftonserver.com/images/logos/logo.png"
                        alt="Logo of Swift on server"
                        title="Swift on server"
                    >
                </picture>
            </figure>
        </a>
        <nav>
            <input type="checkbox" id="primary-menu-button" name="menu-button" class="menu-button">
            <label for="primary-menu-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </label>
            <div class="menu-items">
                <a href="/posts/page/1/">Posts</a>
                <a href="/tags/">Tags</a>
                <a href="/authors/">Authors</a>
                <a href="/newsletter/">Newsletter</a>
            </div>
        </nav>
    </header>

    <main id="page-container">
    
    <div class="article-with-toc">
        <div>
            <article class="post">
                <div class="meta">
                    <time datetime="2024/05/14">2024/05/14</time>
                     &middot; <span class="reading-time">3 min read</span>
                    
                </div>
                <section>
                
                <section class='introduction'><h1>Templating with Swift-Mustache</h1></section><section class='details literature'><p>When you’re working on a backend, you’ll often need to generate HTML or other text-based formats. Some common examples include rendering web pages and sending emails.</p><p>One popular way to generate text-based output is to use a templating engine. A templating engine is a tool that lets you define a template with placeholders for dynamic content. You can then fill in the placeholders with actual values to generate the final output.</p><p>In this tutorial, you’ll learn how to use the <code>Mustache</code> library to generate text-based output in Swift.</p><h2 id='What%20is%20Mustache?'><a href='#What%20is%20Mustache?'>What is Mustache?</a></h2><p><a href='https://mustache.github.io/' target='_blank' rel='external nofollow noopener ugc'>Mustache</a> is a logic-less templating language. It’s called “logic-less” because there are no complex statements in Mustache templates. Mustache templates are also used by <a href='https://github.com/swift-on-server/blog' target='_blank' rel='external'>this blog</a>.</p><p>Unlike Leaf, which is Swift-specific, Mustache templates can be used in any language that has a Mustache implementation. Mustache is low-complexity, which also improves performance.</p><h2 id='Adding%20Swift-Mustache%20to%20Your%20Project'><a href='#Adding%20Swift-Mustache%20to%20Your%20Project'>Adding Swift-Mustache to Your Project</a></h2><p>First, you need to add the Swift-Mustache package to your project. You can do this by adding the following line to your <code>Package.swift</code> file:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span>.<span class='xv'>package</span>(<span class='xv'>url</span>: <span class='xs'>"https://github.com/hummingbird-project/swift-mustache"</span>, <span class='xv'>from</span>: <span class='xs'>"2.0.0-beta.1"</span>),</code></pre><p>Then, add the <code>Mustache</code> library to your target dependencies:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span>.<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"Mustache"</span>, <span class='xv'>package</span>: <span class='xs'>"swift-mustache"</span>),</code></pre><h2 id='Using%20Mustache%20Templates'><a href='#Using%20Mustache%20Templates'>Using Mustache Templates</a></h2><p>Here’s an example of a simple Mustache template:</p><pre class='snippet'><code class='language-html'><span class='newline'></span>&lt;main&gt;<span class='newline'>
</span>    &lt;h1&gt;{{ title }}&lt;/h1&gt;<span class='newline'>
</span>    &lt;p&gt;{{ body }}&lt;/p&gt;<span class='newline'>
</span>&lt;/main&gt;</code></pre><p>Create a <code>templates</code> directory in your project, and save this template as <code>short-port.mustache</code> in the <code>templates</code> directory.</p><p>In this template, <code>{{ title }}</code> and <code>{{ body }}</code> are placeholders for dynamic content. You can fill in these placeholders with actual values using the <code>Mustache</code> library.</p><p>Here’s how you can use the <code>Mustache</code> library to render this template:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>import</span> <span class='xv'>Mustache</span><span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>library</span> = <span class='xv'>MustacheLibrary</span>(<span class='xs'>"/path/to/templates/"</span>)</code></pre><p><code>MustacheLibrary</code> loads all the templates from the specified directory. You can then use the <code>render</code> method to render a template. This also enables templates to embed other templates.</p><p>Then, create a struct to hold the data you want to render:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>struct</span> <span class='xv'>ShortPost</span> {<span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>title</span>: <span class='xt'>String</span><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>body</span>: <span class='xt'>String</span><span class='newline'>
</span>}</code></pre><p>You can then render the template like this:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>let</span> <span class='xv'>shortPost</span> = <span class='xv'>ShortPost</span>(<span class='xv'>title</span>: <span class='xs'>"Hello, World!"</span>, <span class='xv'>body</span>: <span class='xs'>"This is a short post."</span>)<span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>rendered</span> = <span class='xk'>try</span> <span class='xv'>library</span>.<span class='xv'>render</span>(<span class='newline'>
</span>    <span class='xv'>shortPost</span>,<span class='newline'>
</span>    <span class='xv'>withTemplate</span>: <span class='xs'>"short-post"</span><span class='newline'>
</span>)</code></pre><p>The <code>render</code> method takes the data you want to render and the name of the template file. It returns the rendered output as a <code>String</code>.</p><p>In some scenarios, the custom data may contain HTML tags. By default, these are escaped. This means that the HTML tags are displayed as text rather than being rendered as HTML. To render the HTML tags, you can render it as raw by using a three-brace syntax <code>{{{</code> and <code>}}}</code>:</p><pre class='snippet'><code class='language-html'><span class='newline'></span>&lt;main&gt;<span class='newline'>
</span>    &lt;h1&gt;{{ title }}&lt;/h1&gt;<span class='newline'>
</span>    &lt;p&gt;{{{ body }}}&lt;/p&gt;<span class='newline'>
</span>&lt;/main&gt;</code></pre><p>In this scenario, the <code>body</code> property will be rendered as raw HTML whereas the <code>title</code> property will be escaped.</p><h2 id='Arrays'><a href='#Arrays'>Arrays</a></h2><p>You can also use arrays in your Mustache templates. This is useful when you want to render a list of items. Here’s an example:</p><pre class='snippet'><code class='language-html'><span class='newline'></span>&lt;ul&gt;<span class='newline'>
</span>    {{#items}}<span class='newline'>
</span>    &lt;li&gt;{{ name }}&lt;/li&gt;<span class='newline'>
</span>    {{/items}}<span class='newline'>
</span>&lt;/ul&gt;</code></pre><p>Save this as <code>items.mustache</code> in the <code>templates</code> directory. You can then render this template with an array of items:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>struct</span> <span class='xv'>Item</span> {<span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>name</span>: <span class='xt'>String</span><span class='newline'>
</span>}<span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>items</span> = [<span class='newline'>
</span>    <span class='xv'>Item</span>(<span class='xv'>name</span>: <span class='xs'>"Item 1"</span>),<span class='newline'>
</span>    <span class='xv'>Item</span>(<span class='xv'>name</span>: <span class='xs'>"Item 2"</span>),<span class='newline'>
</span>    <span class='xv'>Item</span>(<span class='xv'>name</span>: <span class='xs'>"Item 3"</span>)<span class='newline'>
</span>]<span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>rendered</span> = <span class='xk'>try</span> <span class='xv'>library</span>.<span class='xv'>render</span>(<span class='newline'>
</span>    [<span class='xs'>"items"</span>: <span class='xv'>items</span>],<span class='newline'>
</span>    <span class='xv'>withTemplate</span>: <span class='xs'>"items"</span><span class='newline'>
</span>)</code></pre><p>In this example, the <code>items</code> array is passed to the <code>render</code> method as a dictionary. The <code>{{#items}}</code> and <code>{{/items}}</code> tags are used to create a ‘section’ that is repeated for each item in the array.</p><p>The nested <code>{{ name }}</code> tag is replaced with the <code>name</code> property of each item in the array. Within the scope of a section, the <code>{{ name }}</code> tag is replaced with the <code>name</code> property of each item in the array.</p><p>If your array contains the raw <code><a href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a></code> values, you won’t need to access the <code>name</code> property. Instead, you can directly access the array’s value:</p><pre class='snippet'><code class='language-html'><span class='newline'></span>&lt;ul&gt;<span class='newline'>
</span>    {{#items}}<span class='newline'>
</span>    &lt;li&gt;{{.}}&lt;/li&gt;<span class='newline'>
</span>    {{/items}}<span class='newline'>
</span>&lt;/ul&gt;</code></pre><p>In this example, the <code>{{.}}</code> tag is replaced with the value of each item in the array.</p><h3 id='Empty%20Arrays'><a href='#Empty%20Arrays'>Empty Arrays</a></h3><p>Sometimes, you may want to render a different section of the template when an array is empty. You can do this using the <code>{{^items}}</code> tag:</p><pre class='snippet'><code class='language-htmla'><span class='newline'></span>{{#posts}}<span class='newline'>
</span>  &lt;h2&gt;&lt;a href="{{link}}"&gt;{{title}}&lt;/a&gt;&lt;/h2&gt;<span class='newline'>
</span>{{/posts}}<span class='newline'>
</span>{{^posts}}<span class='newline'>
</span>  &lt;p&gt;No posts found.&lt;/p&gt;<span class='newline'>
</span>{{/posts}}</code></pre><p>In this example, the <code>{{#posts}}</code> section is rendered if the <code>posts</code> array contains data. If the <code>posts</code> array is empty, the <code>{{^posts}}</code> section is rendered instead.</p><p>As you’ve seen, <code>Swift-Mustache</code> library provides a lightweight way to generate text-based output in Swift. The library has <a href='https://mustache.github.io/mustache.5.html' target='_blank' rel='external nofollow noopener ugc'>more to offer</a>, such as partials and lambdas. You can explore these features to create more complex templates.</p><p>Finally, <a href='https://github.com/hummingbird-project/swift-mustache' target='_blank' rel='external'>swift-mustache</a> has some extra features, <a href='https://docs.hummingbird.codes/2.0/documentation/hummingbird/templateinheritance/' target='_blank' rel='external nofollow noopener ugc'>template inheritance</a> and <a href='https://docs.hummingbird.codes/2.0/documentation/hummingbird/transforms/' target='_blank' rel='external nofollow noopener ugc'>transforms</a>. This makes mustache even more powerful to work with.</p></section><div style='display: none;' id='ss:tooltips'><a href='/docs/swift/swift/string'><pre><code><span class='xa'>@frozen</span> <span class='xk'>struct</span> <span class='xv'>String</span></code></pre><p>A Unicode string value that is a collection of characters.</p></a></div>
                    
                </section>
    
                <footer>
                    <br>
                    <time datetime=""></time>
    
                    
                    <div class="author-list">
                        <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                        <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                        <span class="name">Joannis Orlandos</span>
                        </a>
                    </div>
                    <div class="tag-list">
                        <a href="https://swiftonserver.com/tags/package-highlight/"><small>Package Highlight</small></a>
                    </div>
                </footer>
                            
                <section class="group">
                    <h4>Related posts</h4>                
                    <div class="grid grid-221">
                        <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/05/22">2024/05/22</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/introduction-to-swift-service-lifecycle/" target="">Introduction to Swift Service Lifecycle</a></h2>
                            <p>This article offers practical examples to introduce the Swift Service Lifecycle library.</p>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/04/03">2024/04/03</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/async-http-client-by-example/" target="">AsyncHTTPClient by example</a></h2>
                            <p>This article offers practical examples to introduce the Swift AsyncHTTPClient library.</p>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    </div>
                </section>
    
            </article>
        </div>
        
        <div>
            <div class="support">
                <a href="https://www.serversideswift.info/" target="_blank">
                    <img src="https://swiftonserver.com//images/logos/serversideswift.png" alt="Server-Side Swift Conference logo">
                </a>
                <h4>
                    <a href="https://www.serversideswift.info/" target="_blank">ServerSide.swift</a>
                </h4>
                <p>26th-27th September 2024. London, UK</p>
                <p>Discount code: <strong><a href="https://ti.to/serverside-swift/2024/discount/SWIFTONSERVER" target="_blank">SWIFTONSERVER</a></strong></p>
                <a class="cta" href="https://www.serversideswift.info/tickets/" target="_blank">Buy a ticket</a>
            </div>
            
            <aside id="toc">
                <h4>On this page</h4>
                <ul>
                    <li class="first-level">
                        <a href="#What%20is%20Mustache?">What is Mustache?</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Adding%20Swift-Mustache%20to%20Your%20Project">Adding Swift-Mustache to Your Project</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Using%20Mustache%20Templates">Using Mustache Templates</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Arrays">Arrays</a>
                        <ul>
                            <li><a href="#Empty%20Arrays">Empty Arrays</a></li>
                        </ul>
                    </li>
                </ul>
            </aside>
    
        </div>
    </div>
    
    </main>

    <footer id="site-footer">
        <div class="grid grid-421">
    
            <figure>
                <picture>
                    <source
                        srcset="https://swiftonserver.com/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        id="logo-image"
                        src="https://swiftonserver.com/images/logos/logo.png"
                        alt="Logo of Swift on server"
                        title="Swift on server"
                    >
                </picture>
            </figure>
            
            <div>
                <span style="display: block; height: 32px;">&nbsp;</span>
                <h4>Swift on server</h4>
                <p><small><a href="https://swiftonserver.com/" target="_blank">swiftonserver.com</a></small></p>
                <ul>
                    <li><a href="https://github.com/swift-on-server/" target="_blank">GitHub</a></li>
                    <li><a href="https://mastodon.social/@swiftonserver/" target="_blank">Mastodon</a></li>
                    <li><a href="https://swiftonserver.com/rss.xml" target="_blank">RSS</a></li>
                    <li><a href="https://swiftonserver.com/sitemap.xml" target="_blank">Sitemap</a></li>
                </ul>
            </div>
            
            <div>
                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                <img class="small rounded" src="https://swiftonserver.com/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                </a>
                <h4><a href="https://swiftonserver.com/authors/joannis-orlandos/">Joannis Orlandos</a></h4>
                <p><small><a href="https://unbeatable.software/" target="_blank">Unbeatable Software B.V.</a></small></p>
                <ul>
                    <li><a href="mailto:hello@unbeatable.software" target="_blank">Email</a></li>
                    <li><a href="https://github.com/Joannis" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/JoannisOrlandos" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@joannis@fosstodon.org" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
            <div>
                <a href="https://swiftonserver.com/authors/tibor-bodecs/">
                <img class="small rounded" src="https://swiftonserver.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                </a>
                <h4><a href="https://swiftonserver.com/authors/tibor-bodecs/">Tibor Bödecs</a></h4>
                <p><small><a href="https://binarybirds.com/" target="_blank">Binary Birds Kft.</a></small></p>
                <ul>
                    <li><a href="mailto:mail.tib@gmail.com" target="_blank">Email</a></li>
                    <li><a href="https://github.com/tib/" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/tiborbodecs" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@tiborbodecs" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
        </div>
        
        <section class="grid grid-221">
            <small>Swift on server &copy; 2022 - 2024</small>
            <small>This site was generated using <a href="https://swift.org/" target="_blank">Swift</a> & <a href="https://github.com/binarybirds/toucan" target="_blank">Toucan</a>.</small>
        </section>
    </footer>

    </div>
    <script src="/js/main.js" async></script>
    

</body>
</html>
