<!doctype html><html lang="en-US"><head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>AsyncHTTPClient by example - Swift on Server</title>

        <meta name="description" content="This article offers practical examples to introduce the Swift AsyncHTTPClient library." />

        <meta property="og:title" content="AsyncHTTPClient by example - Swift on Server" />
        <meta property="og:description" content="This article offers practical examples to introduce the Swift AsyncHTTPClient library." />
        <meta property="og:url" content="https://swiftonserver.com/async-http-client-by-example/" />
        <meta property="og:image" content="https://swiftonserver.com/images/assets/async-http-client-by-example/cover.jpg" />

        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="AsyncHTTPClient by example - Swift on Server" />
        <meta name="twitter:description" content="This article offers practical examples to introduce the Swift AsyncHTTPClient library." />
        <meta name="twitter:image" content="https://swiftonserver.com/images/assets/async-http-client-by-example/cover.jpg" />

        <link rel="stylesheet" href="https://swiftonserver.com/css/style.css" />
        <link rel="stylesheet" href="https://swiftonserver.com/css/syntax.css" />

        <link rel="shortcut icon" href="https://swiftonserver.com/images/icons/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="https://swiftonserver.com/images/icons/icon-320.png" type="image/png" />

        <script type="text/javascript" src="https://swiftonserver.com/js/tooltips.js" async></script>
        <script defer data-domain="swiftonserver.com" src="https://plausible.io/js/script.js"></script>

        <link rel="apple-touch-icon" href="https://swiftonserver.com/images/icons/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://swiftonserver.com/images/icons/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://swiftonserver.com/images/icons/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="76x76" href="https://swiftonserver.com/images/icons/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://swiftonserver.com/images/icons/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="120x120" href="https://swiftonserver.com/images/icons/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://swiftonserver.com/images/icons/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon" sizes="152x152" href="https://swiftonserver.com/images/icons/apple-touch-icon-152x152.png" />
        <link rel="apple-touch-icon" sizes="180x180" href="https://swiftonserver.com/images/icons/apple-touch-icon-180x180.png" />

    </head>

    <body>
        <header id="page-header">
            <a href="https://swiftonserver.com/">
                <figure>
                    <picture>
                        <source srcset="https://swiftonserver.com/images/logos/logo~dark.png" media="(prefers-color-scheme: dark)" />
                        <img id="logo-image" width="150" height="150" src="https://swiftonserver.com/images/logos/logo.png" alt="Logo of Swift on server" title="Swift on server" />
                    </picture>
                </figure>
            </a>
        </header>

        <main>

            <article>
    <header>
        <section id="post-header" class="content-wrapper">
            <time datetime="2024/04/03">2024/04/03</time>
            <h1 class="title">AsyncHTTPClient by example</h1>
            <p class="excerpt">This article offers practical examples to introduce the Swift AsyncHTTPClient library.</p>
            <div class="meta">
                <span class="tag">Swift</span>
                <span class="tag">HTTP</span>
            </div>
            <img src="https://github.com/tib.png" alt="Tibor Bödecs" class="author" />
            <p>
                <span class="author">Written by: <a href="https://x.com/tiborbodecs" target="_blank">Tibor Bödecs</a> @ 
                <span class="author"><a href="https://binarybirds.com/" target="_blank">Binary Birds Kft.</a></span><br />
                <span class="reading-time">Reading time: 10 minutes</span><br />
            </span></p>
        </section>
    </header>

    <section class="content-wrapper">
        <hr />
    </section>

    <section id="contents" class="content-wrapper">
        <section class="details literature"><p>Swift <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient" target="_blank" rel="external">AsyncHTTPClient</a></code> is an HTTP client library built on top of SwiftNIO. It provides a solid solution for efficiently managing HTTP requests by leveraging the Swift Concurrency model, thus simplifying networking tasks for developers.</p><p>The library’s asynchronous and non-blocking request methods ensure that network operations do not hinder the responsiveness of the application. Additionally, the library offers TLS support, automatic HTTP/2 over HTTPS and several other convenient features.</p><p>The AsyncHTTPClient library is a comprehensive tool for seamless HTTP communication for server-side Swift applications. Throughout this article, we’ll delve into practical <a href="https://github.com/swift-on-server/async-http-client-by-example-sample" target="_blank" rel="external">examples</a> to showcase the capabilities of this library.</p><h2 id="Setting%20up%20&amp;%20configuring%20AsyncHTTPClient"><a href="#Setting%20up%20&amp;%20configuring%20AsyncHTTPClient">Setting up &amp; configuring AsyncHTTPClient</a></h2><p>Starting with this article, you can utilize a foundational code example as a starting point for integrating the Swift AsyncHTTPClient library into your Swift projects.</p><p>Now, open the <code>Package.swift</code> file in your project directory and add AsyncHTTPClient as a dependency:</p><pre class="snippet"><code class="language-swift"><span class="newline"></span><span class="xc">// swift-tools-version: 5.10</span><span class="newline">
</span><span class="xk">import</span> <span class="xv">PackageDescription</span><span class="newline">

</span><span class="xk">let</span> <span class="xv">package</span> = <span class="xv">Package</span>(<span class="newline">
</span>    <span class="xv">name</span>: <span class="xs">"async-http-client-by-example-sample"</span>,<span class="newline">
</span>    <span class="xv">platforms</span>: [<span class="newline">
</span>        .<span class="xv">macOS</span>(.<span class="xv">v14</span>),<span class="newline">
</span>    ],<span class="newline">
</span>    <span class="xv">dependencies</span>: [<span class="newline">
</span>        .<span class="xv">package</span>(<span class="xv">url</span>: <span class="xs">"https://github.com/swift-server/async-http-client.git"</span>, <span class="xv">from</span>: <span class="xs">"1.9.0"</span>)<span class="newline">
</span>    ],<span class="newline">
</span>    <span class="xv">targets</span>: [<span class="newline">
</span>        .<span class="xv">executableTarget</span>(<span class="newline">
</span>            <span class="xv">name</span>: <span class="xs">"async-http-client-by-example-sample"</span>,<span class="newline">
</span>            <span class="xv">dependencies</span>: [<span class="newline">
</span>                .<span class="xv">product</span>(<span class="xv">name</span>: <span class="xs">"AsyncHTTPClient"</span>, <span class="xv">package</span>: <span class="xs">"async-http-client"</span>),<span class="newline">
</span>                .<span class="xv">product</span>(<span class="xv">name</span>: <span class="xs">"NIOFoundationCompat"</span>, <span class="xv">package</span>: <span class="xs">"swift-nio"</span>),<span class="newline">
</span>            ]<span class="newline">
</span>        ),<span class="newline">
</span>    ]<span class="newline">
</span>)</code></pre><p>In the <code>main.swift</code> file, import the AsyncHTTPClient library and initialize an HTTPClient instance for future use:</p><pre class="snippet"><code class="language-swift"><span class="newline"></span><span class="xk">let</span> <span class="xv">httpClient</span> = <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient" target="_blank" rel="external">HTTPClient</a>(<span class="newline">
</span>    <span class="xc">// 1.</span><span class="newline">
</span>    <span class="xv">eventLoopGroupProvider</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider.singleton" target="_blank" rel="external">singleton</a>,<span class="newline">
</span>    <span class="xc">// 2.</span><span class="newline">
</span>    <span class="xv">configuration</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/configuration.init(tlsconfiguration:redirectconfiguration:timeout:proxy:ignoreuncleansslshutdown:decompression:)" target="_blank" rel="external">init</a>(<span class="newline">
</span>        <span class="xc">// 3.</span><span class="newline">
</span>        <span class="xv">redirectConfiguration</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/configuration/redirectconfiguration.follow(max:allowcycles:)" target="_blank" rel="external">follow</a>(<span class="newline">
</span>            <span class="xv">max</span>: <span class="xn">3</span>,<span class="newline">
</span>            <span class="xv">allowCycles</span>: <span class="xk">false</span><span class="newline">
</span>        ),<span class="newline">
</span>        <span class="xc">// 4.</span><span class="newline">
</span>        <span class="xv">timeout</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/configuration/timeout.init(connect:read:write:)" target="_blank" rel="external">init</a>(<span class="newline">
</span>            <span class="xv">connect</span>: .<a class="xv" href="https://swiftinit.org/docs/swift/swift/optional.init(_:)" target="_blank" rel="external">init</a>(.<a class="xv" href="https://swiftinit.org/docs/swift-nio/niocore/timeamount.seconds(_:)" target="_blank" rel="external">seconds</a>(<span class="xn">1</span>)),<span class="newline">
</span>            <span class="xv">read</span>: .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niocore/timeamount.seconds(_:)" target="_blank" rel="external">seconds</a>(<span class="xn">1</span>),<span class="newline">
</span>            <span class="xv">write</span>: .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niocore/timeamount.seconds(_:)" target="_blank" rel="external">seconds</a>(<span class="xn">1</span>)<span class="newline">
</span>        )<span class="newline">
</span>    )<span class="newline">
</span>)<span class="newline">

</span><span class="xc">// perform HTTP operations</span><span class="newline">

</span><span class="xc">// 5.</span><span class="newline">
</span><span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW" target="_blank" rel="external">shutdown</a>()</code></pre><a rel="ugc" href="https://github.com/swift-on-server/site/blob/main/Snippets/ahc_setup.swift#L9" target="_blank" class="source github"><span class="file">ahc_setup.swift</span>:<span class="line">9</span></a><ol><li><p>Specify the event loop group provider as <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider" target="_blank" rel="external">EventLoopGroupProvider</a>.<a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider.singleton" target="_blank" rel="external">singleton</a></code>, which manages the underlying <code><a href="https://swiftinit.org/docs/swift-nio/niocore/eventloopgroup" target="_blank" rel="external">EventLoopGroup</a></code> for asynchronous operations.</p></li><li><p>The <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/configuration" target="_blank" rel="external">Configuration</a></code> parameter is set, defining various aspects of the <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient" target="_blank" rel="external">HTTPClient</a></code>’s behavior.</p></li><li><p><code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/configuration/redirectconfiguration" target="_blank" rel="external">RedirectConfiguration</a></code> is specified to follow redirects up to a maximum of 3 times and disallow redirect cycles.</p></li><li><p>Set <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/configuration/timeout" target="_blank" rel="external">Timeout</a></code>s for different phases of the HTTP request process, such as connection establishment, reading, and writing.</p></li><li><p>Cleanup by calling the <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW" target="_blank" rel="external">shutdown</a></code> method on the HTTPClient instance.</p></li></ol><p>Please be aware that it is essential to properly terminate the HTTP client after executing requests. Forgetting to invoke the <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW" target="_blank" rel="external">shutdown</a></code> method may cause the library to issue a warning about a potential memory leak when compiling the application in debug mode.</p><h2 id="Performing%20HTTP%20requests"><a href="#Performing%20HTTP%20requests">Performing HTTP requests</a></h2><p>An HTTP request includes the method, a URL, headers providing supplementary details, and optionally, a body containing data transmitted to the server. Conversely, HTTP responses contain a status code, headers providing further details, and a body containing the actual content of the response. Together, these components facilitate the exchange of data between clients and servers over the HTTP protocol.</p><p>Below is an illustration of how to employ the HTTP request and response objects using the AsyncHTTPClient library in Swift:</p><pre class="snippet"><code class="language-swift"><span class="newline"></span><span class="xk">let</span> <span class="xv">httpClient</span> = <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient" target="_blank" rel="external">HTTPClient</a>(<span class="xv">eventLoopGroupProvider</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider.singleton" target="_blank" rel="external">singleton</a>)<span class="newline">

</span><span class="xk">do</span> {<span class="newline">
</span>    <span class="xc">// 1.</span><span class="newline">
</span>    <span class="xk">var</span> <span class="xv">request</span> = <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest" target="_blank" rel="external">HTTPClientRequest</a>(<span class="xv">url</span>: <span class="xs">"https://httpbin.org/post"</span>)<span class="newline">
</span>    <span class="xc">// 2.</span><span class="newline">
</span>    <span class="xv">request</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest.method" target="_blank" rel="external">method</a> = .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpmethod.post" target="_blank" rel="external">POST</a><span class="newline">
</span>    <span class="xc">// 3.</span><span class="newline">
</span>    <span class="xv">request</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest.headers" target="_blank" rel="external">headers</a>.<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpheaders.add(name:value:)" target="_blank" rel="external">add</a>(<span class="xv">name</span>: <span class="xs">"User-Agent"</span>, <span class="xv">value</span>: <span class="xs">"Swift AsyncHTTPClient"</span>)<span class="newline">
</span>    <span class="xc">// 4.</span><span class="newline">
</span>    <span class="xv">request</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest.body" target="_blank" rel="external">body</a> = .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest/body.bytes(_:)?hash=3Y36J" target="_blank" rel="external">bytes</a>(<a class="xt" href="https://swiftinit.org/docs/swift-nio/niocore/bytebuffer" target="_blank" rel="external">ByteBuffer</a>(<span class="xv">string</span>: <span class="xs">"Some data"</span>))<span class="newline">

</span>    <span class="xc">// 5.</span><span class="newline">
</span>    <span class="xk">let</span> <span class="xv">response</span> = <span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.execute(_:timeout:logger:)" target="_blank" rel="external">execute</a>(<span class="xv">request</span>, <span class="xv">timeout</span>: .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niocore/timeamount.seconds(_:)" target="_blank" rel="external">seconds</a>(<span class="xn">5</span>))<span class="newline">

</span>    <span class="xc">// 6.</span><span class="newline">
</span>    <span class="xk">if</span> <span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.status" target="_blank" rel="external">status</a> <span class="xo">==</span> .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpresponsestatus.ok" target="_blank" rel="external">ok</a> {<span class="newline">
</span>        <span class="xc">// 7.</span><span class="newline">
</span>        <span class="xk">let</span> <span class="xv">contentType</span> = <span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.headers" target="_blank" rel="external">headers</a>.<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpheaders.first(name:)" target="_blank" rel="external">first</a>(<span class="xv">name</span>: <span class="xs">"content-type"</span>)<span class="newline">

</span>        <span class="xc">// 8.</span><span class="newline">
</span>        <span class="xk">let</span> <span class="xv">buffer</span> = <span class="xk">try</span> <span class="xk">await</span> <span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.body" target="_blank" rel="external">body</a>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse/body.collect(upto:)" target="_blank" rel="external">collect</a>(<span class="xv">upTo</span>: <span class="xn">1024</span> <a class="xv" href="https://swiftinit.org/docs/swift/swift/int.*(_:_:)" target="_blank" rel="external">*</a> <span class="xn">1024</span>)<span class="newline">

</span>        <span class="xc">// 9.</span><span class="newline">
</span>        <span class="xk">let</span> <span class="xv">rawResponseBody</span> = <a class="xt" href="https://swiftinit.org/docs/swift/swift/string" target="_blank" rel="external">String</a>(<span class="xv">buffer</span>: <span class="xv">buffer</span>)<span class="newline">

</span>        <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<span class="xs">"Content Type"</span>, <span class="xv">contentType</span> <a class="xv" href="https://swiftinit.org/docs/swift/swift.%3F%3F(_:_:)?hash=8BUAU" target="_blank" rel="external">??</a> <span class="xs">"unknown"</span>)<span class="newline">
</span>        <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<span class="xv">rawResponseBody</span>)<span class="newline">
</span>    }<span class="newline">
</span>} <span class="xk">catch</span> {<span class="newline">
</span>    <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<a class="xs" href="https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)" target="_blank" rel="external">"</a>\(<span class="xv">error</span>)<span class="xs">"</span>)<span class="newline">
</span>}<span class="newline">

</span><span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW" target="_blank" rel="external">shutdown</a>()</code></pre><a rel="ugc" href="https://github.com/swift-on-server/site/blob/main/Snippets/ahc_request.swift#L9" target="_blank" class="source github"><span class="file">ahc_request.swift</span>:<span class="line">9</span></a><ol><li><p>A new <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest" target="_blank" rel="external">HTTPClientRequest</a></code> object is created targeting the specified URL.</p></li><li><p>The HTTP request method is set to POST.</p></li><li><p>A <code>user-agent</code> header with the value <code>"Swift AsyncHTTPClient"</code> is added to the request.</p></li><li><p>The request body is set to contain the string “Some data”.</p></li><li><p>The request is executed with a custom timeout of 5 seconds.</p></li><li><p>If the response status is <code>.ok</code> (<code>200</code>), further processing is performed.</p></li><li><p>The <code>content-type</code> of the response is retrieved from the headers.</p></li><li><p>The response body is collected asynchronously into a <code><a href="https://swiftinit.org/docs/swift-nio/niocore/bytebuffer" target="_blank" rel="external">ByteBuffer</a></code>, up to a maximum of 1 MiB in size.</p></li><li><p>The raw response body is converted into a <code><a href="https://swiftinit.org/docs/swift/swift/string" target="_blank" rel="external">String</a></code> for further processing.</p></li></ol><p>Any errors encountered during the execution of the request are caught and printed. If the response body exceeds the 1 MiB limit, a <code><a href="https://swiftinit.org/docs/swift-nio/niocore/niotoomanybyteserror" target="_blank" rel="external">NIOTooManyBytesError</a></code> error will occur.</p><p>Finally, the HTTP client is shut down to release associated resources.</p><h2 id="JSON%20requests"><a href="#JSON%20requests">JSON requests</a></h2><p>JSON requests involve sending and receiving data formatted in JSON to a server. REST API is a style for building networked apps where resources are managed using regular HTTP methods, and the data is encoded and decoded using the JSON format.</p><p>The following code snippet demonstrates how to encode request bodies and decode response bodies using JSON objects:</p><pre class="snippet"><code class="language-swift"><span class="newline"></span><span class="xc">// 1.</span><span class="newline">
</span><span class="xk">struct</span> <span class="xv">Input</span>: <a class="xt" href="https://swiftinit.org/docs/swift/swift/codable" target="_blank" rel="external">Codable</a> {<span class="newline">
</span>    <span class="xk">let</span> <span class="xv">id</span>: <a class="xt" href="https://swiftinit.org/docs/swift/swift/int" target="_blank" rel="external">Int</a><span class="newline">
</span>    <span class="xk">let</span> <span class="xv">title</span>: <a class="xt" href="https://swiftinit.org/docs/swift/swift/string" target="_blank" rel="external">String</a><span class="newline">
</span>    <span class="xk">let</span> <span class="xv">completed</span>: <a class="xt" href="https://swiftinit.org/docs/swift/swift/bool" target="_blank" rel="external">Bool</a><span class="newline">
</span>}<span class="newline">

</span><span class="xk">struct</span> <span class="xv">Output</span>: <a class="xt" href="https://swiftinit.org/docs/swift/swift/codable" target="_blank" rel="external">Codable</a> {<span class="newline">
</span>    <span class="xk">let</span> <span class="xv">json</span>: <span class="xt">Input</span><span class="newline">
</span>}<span class="newline">
</span>        <span class="newline">
</span><span class="xk">let</span> <span class="xv">httpClient</span> = <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient" target="_blank" rel="external">HTTPClient</a>(<span class="newline">
</span>    <span class="xv">eventLoopGroupProvider</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider.singleton" target="_blank" rel="external">singleton</a><span class="newline">
</span>)<span class="newline">
</span><span class="xk">do</span> {<span class="newline">
</span>    <span class="xc">// 2.</span><span class="newline">
</span>    <span class="xk">var</span> <span class="xv">request</span> = <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest" target="_blank" rel="external">HTTPClientRequest</a>(<span class="newline">
</span>        <span class="xv">url</span>: <span class="xs">"https://httpbin.org/post"</span><span class="newline">
</span>    )<span class="newline">
</span>    <span class="xv">request</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest.method" target="_blank" rel="external">method</a> = .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpmethod.post" target="_blank" rel="external">POST</a><span class="newline">
</span>    <span class="xv">request</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest.headers" target="_blank" rel="external">headers</a>.<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpheaders.add(name:value:)" target="_blank" rel="external">add</a>(<span class="xv">name</span>: <span class="xs">"content-type"</span>, <span class="xv">value</span>: <span class="xs">"application/json"</span>)<span class="newline">

</span>    <span class="xc">// 3.</span><span class="newline">
</span>    <span class="xk">let</span> <span class="xv">input</span> = <span class="xv">Input</span>(<span class="newline">
</span>        <span class="xv">id</span>: <span class="xn">1</span>,<span class="newline">
</span>        <span class="xv">title</span>: <span class="xs">"foo"</span>,<span class="newline">
</span>        <span class="xv">completed</span>: <span class="xk">false</span><span class="newline">
</span>    )<span class="newline">

</span>    <span class="xk">let</span> <span class="xv">encoder</span> = <a class="xt" href="https://swiftinit.org/docs/swift/foundation/jsonencoder" target="_blank" rel="external">JSONEncoder</a>()<span class="newline">
</span>    <span class="xk">let</span> <span class="xv">buffer</span> = <span class="xk">try</span> <span class="xv">encoder</span>.<a class="xv" href="https://swiftinit.org/docs/swift-nio/foundation/jsonencoder.encodeasbytebuffer(_:allocator:)" target="_blank" rel="external">encodeAsByteBuffer</a>(<span class="xv">input</span>, <span class="xv">allocator</span>: <a class="xt" href="https://swiftinit.org/docs/swift-nio/niocore/bytebufferallocator" target="_blank" rel="external">ByteBufferAllocator</a>())<span class="newline">
</span>    <span class="xv">request</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest.body" target="_blank" rel="external">body</a> = .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientrequest/body.bytes(_:)?hash=3Y36J" target="_blank" rel="external">bytes</a>(<span class="xv">buffer</span>)<span class="newline">

</span>    <span class="xk">let</span> <span class="xv">response</span> = <span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.execute(_:timeout:logger:)" target="_blank" rel="external">execute</a>(<span class="newline">
</span>        <span class="xv">request</span>,<span class="newline">
</span>        <span class="xv">timeout</span>: .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niocore/timeamount.seconds(_:)" target="_blank" rel="external">seconds</a>(<span class="xn">5</span>)<span class="newline">
</span>    )<span class="newline">

</span>    <span class="xk">if</span> <span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.status" target="_blank" rel="external">status</a> <span class="xo">==</span> .<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpresponsestatus.ok" target="_blank" rel="external">ok</a> {<span class="newline">
</span>        <span class="xc">// 4.</span><span class="newline">
</span>        <span class="xk">if</span> <span class="xk">let</span> <span class="xv">contentType</span> = <span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.headers" target="_blank" rel="external">headers</a>.<a class="xv" href="https://swiftinit.org/docs/swift-nio/niohttp1/httpheaders.first(name:)" target="_blank" rel="external">first</a>(<span class="newline">
</span>            <span class="xv">name</span>: <span class="xs">"content-type"</span><span class="newline">
</span>        ), <span class="xv">contentType</span>.<a class="xv" href="https://swiftinit.org/docs/swift/swift/stringprotocol.contains(_:)?hash=40KBF" target="_blank" rel="external">contains</a>(<span class="xs">"application/json"</span>) {<span class="newline">
</span>            <span class="xc">// 5.</span><span class="newline">
</span>            <span class="xk">let</span> <span class="xv">buffer</span> = <span class="xk">try</span> <span class="xk">await</span> <span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.body" target="_blank" rel="external">body</a>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse/body.collect(upto:)" target="_blank" rel="external">collect</a>(<span class="xv">upTo</span>: <span class="xn">1024</span> <a class="xv" href="https://swiftinit.org/docs/swift/swift/int.*(_:_:)" target="_blank" rel="external">*</a> <span class="xn">1024</span>)<span class="newline">

</span>            <span class="xc">// 6.</span><span class="newline">
</span>            <span class="xk">let</span> <span class="xv">output</span> = <span class="xk">try</span> <a class="xt" href="https://swiftinit.org/docs/swift/foundation/jsondecoder" target="_blank" rel="external">JSONDecoder</a>().<a class="xv" href="https://swiftinit.org/docs/swift-nio/foundation/jsondecoder.decode(_:from:)" target="_blank" rel="external">decode</a>(<span class="xv">Output</span>.<span class="xk">self</span>, <span class="xv">from</span>: <span class="xv">buffer</span>)<span class="newline">
</span>            <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<span class="xv">output</span>.<span class="xv">json</span>.<span class="xv">title</span>)<span class="newline">
</span>        }<span class="newline">
</span>    } <span class="xk">else</span> {<span class="newline">
</span>        <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<a class="xs" href="https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)" target="_blank" rel="external">"Invalid status code: </a>\(<span class="xv">response</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclientresponse.status" target="_blank" rel="external">status</a>)<span class="xs">"</span>)<span class="newline">
</span>    }<span class="newline">
</span>} <span class="xk">catch</span> {<span class="newline">
</span>    <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<a class="xs" href="https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)" target="_blank" rel="external">"</a>\(<span class="xv">error</span>)<span class="xs">"</span>)<span class="newline">
</span>}<span class="newline">

</span><span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW" target="_blank" rel="external">shutdown</a>()</code></pre><a rel="ugc" href="https://github.com/swift-on-server/site/blob/main/Snippets/ahc_json.swift#L10" target="_blank" class="source github"><span class="file">ahc_json.swift</span>:<span class="line">10</span></a><ol><li><p>Two <code><a href="https://swiftinit.org/docs/swift/swift/codable" target="_blank" rel="external">Codable</a></code> structures are defined: <code>Input</code> for the data to be sent and <code>Output</code> for receiving the JSON response.</p></li><li><p>An HTTP request is created using a POST method and a <code>content-type: application/json</code> header.</p></li><li><p>The <code>Input</code> data is encoded into JSON data using a <code><a href="https://swiftinit.org/docs/swift-nio/niocore/bytebuffer" target="_blank" rel="external">ByteBuffer</a></code> and set as the request body.</p></li><li><p>If the response status is ok and the content type is JSON, the response body is processed.</p></li><li><p>The response body chunks are collected asynchronously using <code><a href="https://swiftinit.org/docs/swift/_concurrency/asyncsequence" target="_blank" rel="external">AsyncSequence</a>.<a href="https://swiftinit.org/docs/swift-nio/_concurrency/asyncsequence.collect(upto:)" target="_blank" rel="external">collect(upTo:)</a></code></p></li><li><p>The buffer containing the JSON data response is decoded as an <code>Output</code> structure using <code><a href="https://swiftinit.org/docs/swift/foundation/jsondecoder" target="_blank" rel="external">JSONDecoder</a>.<a href="https://swiftinit.org/docs/swift-nio/foundation/jsondecoder.decode(_:from:)" target="_blank" rel="external">decode(_:from:)</a></code>.</p></li></ol><p>The code snippet above demonstrates how to use Swift’s Codable protocol to handle JSON data in HTTP communication. It defines structures for input and output data, sends a POST request with JSON payload, and processes the response by decoding JSON into a designated output structure.</p><h2 id="File%20downloads"><a href="#File%20downloads">File downloads</a></h2><p>The AsyncHTTPClient library provides support for file downloads using the <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/filedownloaddelegate" target="_blank" rel="external">FileDownloadDelegate</a></code>. This feature enables asynchronous streaming of downloaded data while simultaneously reporting the download progress, as demonstrated in the following example:</p><pre class="snippet"><code class="language-swift"><span class="newline"></span><span class="xk">import</span> <span class="xv">AsyncHTTPClient</span><span class="newline">
</span><span class="xk">import</span> <span class="xv">NIOCore</span><span class="newline">
</span><span class="xk">import</span> <span class="xv">Foundation</span><span class="newline">

</span><span class="xa">@main</span><span class="newline">
</span><span class="xk">struct</span> <span class="xt">Entrypoint</span> {<span class="newline">
</span>    <span class="xk">static</span> <span class="xk">func</span> <span class="xv">main</span>() <span class="xk">async</span> <span class="xk">throws</span> {</code></pre><a rel="ugc" href="https://github.com/swift-on-server/site/blob/main/Snippets/ahc_download.swift" target="_blank" class="source github"><span class="file">ahc_download.swift</span></a><pre class="snippet"><code class="language-swift"><span class="newline"></span><span class="xk">let</span> <span class="xv">httpClient</span> = <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient" target="_blank" rel="external">HTTPClient</a>(<span class="newline">
</span>    <span class="xv">eventLoopGroupProvider</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider.singleton" target="_blank" rel="external">singleton</a><span class="newline">
</span>)<span class="newline">

</span><span class="xk">do</span> {</code></pre><a rel="ugc" href="https://github.com/swift-on-server/site/blob/main/Snippets/ahc_download.swift#L8" target="_blank" class="source github"><span class="file">ahc_download.swift</span>:<span class="line">8</span></a><pre class="snippet"><code class="language-swift"><span class="newline"></span>    <span class="xk">let</span> <span class="xv">delegate</span> = <span class="xk">try</span> <a class="xt" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/filedownloaddelegate" target="_blank" rel="external">FileDownloadDelegate</a>(<span class="newline">
</span>        <span class="xc">// 2.</span><span class="newline">
</span>        <span class="xv">path</span>: <a class="xv" href="https://swiftinit.org/docs/swift/foundation.nstemporarydirectory" target="_blank" rel="external">NSTemporaryDirectory</a>() <a class="xv" href="https://swiftinit.org/docs/swift/swift/string.+(_:_:)" target="_blank" rel="external">+</a> <span class="xs">"600x400.png"</span>,<span class="newline">
</span>        <span class="xc">// 3.</span><span class="newline">
</span>        <span class="xv">reportProgress</span>: {<span class="newline">
</span>            <span class="xk">if</span> <span class="xk">let</span> <span class="xv">totalBytes</span> = <span class="xp">$0</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/filedownloaddelegate/progress.totalbytes" target="_blank" rel="external">totalBytes</a> {<span class="newline">
</span>                <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<a class="xs" href="https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)" target="_blank" rel="external">"Total: </a>\(<span class="xv">totalBytes</span>)<span class="xs">."</span>)<span class="newline">
</span>            }<span class="newline">
</span>            <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<a class="xs" href="https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)" target="_blank" rel="external">"Downloaded: </a>\(<span class="xp">$0</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/filedownloaddelegate/progress.receivedbytes" target="_blank" rel="external">receivedBytes</a>)<span class="xs">."</span>)<span class="newline">
</span>        }<span class="newline">
</span>    )<span class="newline">

</span>    <span class="xc">// 4.</span><span class="newline">
</span>    <span class="xk">let</span> <span class="xv">fileDownloadResponse</span> = <span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.execute(request:delegate:deadline:)" target="_blank" rel="external">execute</a>(<span class="newline">
</span>        <span class="xv">request</span>: .<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/request.init(url:method:headers:body:)?hash=77BZB" target="_blank" rel="external">init</a>(<span class="newline">
</span>            <span class="xv">url</span>: <span class="xs">"https://placehold.co/600x400.png"</span><span class="newline">
</span>        ),<span class="newline">
</span>        <span class="xv">delegate</span>: <span class="xv">delegate</span><span class="newline">
</span>    ).<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient/task.futureresult" target="_blank" rel="external">futureResult</a>.<a class="xv" href="https://swiftinit.org/docs/swift-nio/niocore/eventloopfuture.get" target="_blank" rel="external">get</a>()<span class="newline">

</span>    <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<span class="xv">fileDownloadResponse</span>)<span class="newline">
</span>} <span class="xk">catch</span> {<span class="newline">
</span>    <a class="xv" href="https://swiftinit.org/docs/swift/swift.print(_:separator:terminator:)" target="_blank" rel="external">print</a>(<a class="xs" href="https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)" target="_blank" rel="external">"</a>\(<span class="xv">error</span>)<span class="xs">"</span>)<span class="newline">
</span>}<span class="newline">

</span><span class="xk">try</span> <span class="xk">await</span> <span class="xv">httpClient</span>.<a class="xv" href="https://swiftinit.org/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW" target="_blank" rel="external">shutdown</a>()</code></pre><a rel="ugc" href="https://github.com/swift-on-server/site/blob/main/Snippets/ahc_download.swift#L14" target="_blank" class="source github"><span class="file">ahc_download.swift</span>:<span class="line">14</span></a><ol><li><p>A <code><a href="https://swiftinit.org/docs/async-http-client/asynchttpclient/filedownloaddelegate" target="_blank" rel="external">FileDownloadDelegate</a></code> is created to manage file downloads.</p></li><li><p>Specify the download destination path.</p></li><li><p>A progress reporting function is provided to monitor the download progress.</p></li><li><p>The file download request is executed using the request URL and the delegate.</p></li></ol><p>Running this example will display the download progress, indicating the received bytes and the total bytes, with the same information also available within the <code>fileDownloadResponse</code> object.</p><p>There are many more configuration options available for the Swift AsyncHTTPClient library. It is also possible to create custom delegate objects; additional useful examples and code snippets are provided in the project’s <a href="https://github.com/swift-server/async-http-client" target="_blank" rel="external">README on GitHub</a>.</p></section><div style="display: none;" id="ss:tooltips"><a href="/docs/async-http-client/asynchttpclient"><pre><code><span class="xk">import</span> <span class="xv">AsyncHTTPClient</span></code></pre><p>This package provides simple HTTP Client library built on top of SwiftNIO.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient"><pre><code><span class="xk">class</span> <span class="xv">HTTPClient</span></code></pre><p>HTTPClient class provides API for request execution.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider.singleton"><pre><code><span class="xk">static</span> <span class="xk">var</span> <span class="xv">singleton</span>: <span class="xt">HTTPClient</span>.<span class="xt">EventLoopGroupProvider</span> { <span class="xk">get</span> }</code></pre><p>Shares <code>defaultEventLoopGroup</code> which is a singleton <code>EventLoopGroup</code> suitable for the platform.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/configuration.init(tlsconfiguration:redirectconfiguration:timeout:proxy:ignoreuncleansslshutdown:decompression:)"><pre><code><span class="xk">init</span>(<span class="xi"></span><span class="xv">tlsConfiguration</span>: <span class="xt">TLSConfiguration</span>? = <span class="xk">nil</span>, <span class="xi"></span><span class="xv">redirectConfiguration</span>: <span class="xt">HTTPClient</span>.<span class="xt">Configuration</span>.<span class="xt">RedirectConfiguration</span>? = <span class="xk">nil</span>, <span class="xi"></span><span class="xv">timeout</span>: <span class="xt">HTTPClient</span>.<span class="xt">Configuration</span>.<span class="xt">Timeout</span> = <span class="xv">Timeout</span>(), <span class="xi"></span><span class="xv">proxy</span>: <span class="xt">HTTPClient</span>.<span class="xt">Configuration</span>.<span class="xt">Proxy</span>? = <span class="xk">nil</span>, <span class="xi"></span><span class="xv">ignoreUncleanSSLShutdown</span>: <span class="xt">Bool</span> = <span class="xk">false</span>, <span class="xi"></span><span class="xv">decompression</span>: <span class="xt">HTTPClient</span>.<span class="xt">Decompression</span> = .<span class="xv">disabled</span><wbr />)</code></pre></a><a href="/docs/async-http-client/asynchttpclient/httpclient/configuration/redirectconfiguration.follow(max:allowcycles:)"><pre><code><span class="xk">static</span> <span class="xk">func</span> <span class="xv">follow</span>(<span class="xi"></span><span class="xv">max</span>: <span class="xt">Int</span>, <span class="xi"></span><span class="xv">allowCycles</span>: <span class="xt">Bool</span><wbr />) -&gt; <span class="xt">HTTPClient</span>.<span class="xt">Configuration</span>.<span class="xt">RedirectConfiguration</span></code></pre><p>Redirects are followed with a specified limit.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/configuration/timeout.init(connect:read:write:)"><pre><code><span class="xk">init</span>(<span class="xi"></span><span class="xv">connect</span>: <span class="xt">TimeAmount</span>? = <span class="xk">nil</span>, <span class="xi"></span><span class="xv">read</span>: <span class="xt">TimeAmount</span>? = <span class="xk">nil</span>, <span class="xi"></span><span class="xv">write</span>: <span class="xt">TimeAmount</span><wbr />)</code></pre><p>Create timeout.</p></a><a href="/docs/swift/swift/optional.init(_:)"><pre><code><span class="xk">init</span>(<span class="xi"></span>_ <span class="xb">some</span>: <span class="xt">Wrapped</span><wbr />)</code></pre><p>Creates an instance that stores the given value.</p></a><a href="/docs/swift-nio/niocore/timeamount.seconds(_:)"><pre><code><span class="xk">static</span> <span class="xk">func</span> <span class="xv">seconds</span>(<span class="xi"></span>_ <span class="xb">amount</span>: <span class="xt">Int64</span><wbr />) -&gt; <span class="xt">TimeAmount</span></code></pre><p>Creates a new <code>TimeAmount</code> for the given amount of seconds.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient.shutdown?hash=96AYW"><pre><code><span class="xk">func</span> <span class="xv">shutdown</span>(<wbr />) <span class="xk">async</span> <span class="xk">throws</span></code></pre><p>Shuts down the client and <code>EventLoopGroup</code> if it was created by the client.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/eventloopgroupprovider"><pre><code><span class="xk">enum</span> <span class="xv">EventLoopGroupProvider</span></code></pre><p>Specifies how <code>EventLoopGroup</code> will be created and establishes lifecycle ownership.</p></a><a href="/docs/swift-nio/niocore/eventloopgroup"><pre><code><span class="xk">protocol</span> <span class="xv">EventLoopGroup</span> : <span class="xt">AnyObject</span>, <span class="xt">_NIOPreconcurrencySendable</span></code></pre><p>Provides an endless stream of <code>EventLoop</code>s to use.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/configuration"><pre><code><span class="xk">struct</span> <span class="xv">Configuration</span></code></pre><p><code>HTTPClient</code> configuration.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/configuration/redirectconfiguration"><pre><code><span class="xk">struct</span> <span class="xv">RedirectConfiguration</span></code></pre><p>Specifies redirect processing settings.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/configuration/timeout"><pre><code><span class="xk">struct</span> <span class="xv">Timeout</span></code></pre><p>Timeout configuration.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientrequest"><pre><code><span class="xk">struct</span> <span class="xv">HTTPClientRequest</span></code></pre><p>A representation of an HTTP request for the Swift Concurrency HTTPClient API.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientrequest.method"><pre><code><span class="xk">var</span> <span class="xv">method</span>: <span class="xt">HTTPMethod</span></code></pre><p>The request method.</p></a><a href="/docs/swift-nio/niohttp1/httpmethod.post"><pre><code><span class="xk">case</span> <span class="xv">POST</span></code></pre></a><a href="/docs/async-http-client/asynchttpclient/httpclientrequest.headers"><pre><code><span class="xk">var</span> <span class="xv">headers</span>: <span class="xt">HTTPHeaders</span></code></pre><p>The request headers.</p></a><a href="/docs/swift-nio/niohttp1/httpheaders.add(name:value:)"><pre><code><span class="xk">mutating</span> <span class="xk">func</span> <span class="xv">add</span>(<span class="xi"></span><span class="xv">name</span>: <span class="xt">String</span>, <span class="xi"></span><span class="xv">value</span>: <span class="xt">String</span><wbr />)</code></pre><p>Add a header name/value pair to the block.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientrequest.body"><pre><code><span class="xk">var</span> <span class="xv">body</span>: <span class="xt">HTTPClientRequest</span>.<span class="xt">Body</span>?</code></pre><p>The request body, if any.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientrequest/body.bytes(_:)?hash=3Y36J"><pre><code><span class="xk">static</span> <span class="xk">func</span> <span class="xv">bytes</span>(<span class="xi"></span>_ <span class="xb">byteBuffer</span>: <span class="xt">ByteBuffer</span><wbr />) -&gt; <span class="xt">HTTPClientRequest</span>.<span class="xt">Body</span></code></pre><p>Create an <code>Body</code> from a <code>ByteBuffer</code>.</p></a><a href="/docs/swift-nio/niocore/bytebuffer"><pre><code><span class="xk">struct</span> <span class="xv">ByteBuffer</span></code></pre><p><code>ByteBuffer</code> stores contiguously allocated raw bytes. It is a random and sequential accessible sequence of zero or more bytes (octets).</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient.execute(_:timeout:logger:)"><pre><code><span class="xk">func</span> <span class="xv">execute</span>(<span class="xi"></span>_ <span class="xb">request</span>: <span class="xt">HTTPClientRequest</span>, <span class="xi"></span><span class="xv">timeout</span>: <span class="xt">TimeAmount</span>, <span class="xi"></span><span class="xv">logger</span>: <span class="xt">Logger</span>? = <span class="xk">nil</span><wbr />) <span class="xk">async</span> <span class="xk">throws</span> -&gt; <span class="xt">HTTPClientResponse</span></code></pre><p>Execute arbitrary HTTP requests.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientresponse.status"><pre><code><span class="xk">var</span> <span class="xv">status</span>: <span class="xt">HTTPResponseStatus</span></code></pre><p>The HTTP status for this response.</p></a><a href="/docs/swift-nio/niohttp1/httpresponsestatus.ok"><pre><code><span class="xk">case</span> <span class="xv">ok</span></code></pre></a><a href="/docs/async-http-client/asynchttpclient/httpclientresponse.headers"><pre><code><span class="xk">var</span> <span class="xv">headers</span>: <span class="xt">HTTPHeaders</span></code></pre><p>The HTTP headers of this response.</p></a><a href="/docs/swift-nio/niohttp1/httpheaders.first(name:)"><pre><code><span class="xk">func</span> <span class="xv">first</span>(<span class="xi"></span><span class="xv">name</span>: <span class="xt">String</span><wbr />) -&gt; <span class="xt">String</span>?</code></pre><p>Retrieves the first value for a given header field name from the block.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientresponse.body"><pre><code><span class="xk">var</span> <span class="xv">body</span>: <span class="xt">HTTPClientResponse</span>.<span class="xt">Body</span></code></pre><p>The body of this HTTP response.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclientresponse/body.collect(upto:)"><pre><code><span class="xk">func</span> <span class="xv">collect</span>(<span class="xi"></span><span class="xv">upTo</span> <span class="xb">maxBytes</span>: <span class="xt">Int</span><wbr />) <span class="xk">async</span> <span class="xk">throws</span> -&gt; <span class="xt">ByteBuffer</span></code></pre><p>Accumulates <code>Body</code> of <code>ByteBuffer</code>s into a single <code>ByteBuffer</code>.</p></a><a href="/docs/swift/swift/int.*(_:_:)"><pre><code><span class="xk">static</span> <span class="xk">func</span> <span class="xo">*</span> (<span class="xi"></span><span class="xv">lhs</span>: <span class="xt">Int</span>, <span class="xi"></span><span class="xv">rhs</span>: <span class="xt">Int</span><wbr />) -&gt; <span class="xt">Int</span></code></pre><p>Multiplies two values and produces their product.</p></a><a href="/docs/swift/swift/string"><pre><code><span class="xa">@frozen</span> <span class="xk">struct</span> <span class="xv">String</span></code></pre><p>A Unicode string value that is a collection of characters.</p></a><a href="/docs/swift/swift.print(_:separator:terminator:)"><pre><code><span class="xk">func</span> <span class="xv">print</span>(<span class="xi"></span>_ <span class="xb">items</span>: <span class="xk">Any</span>..., <span class="xi"></span><span class="xv">separator</span>: <span class="xt">String</span> = <span class="xs">" "</span>, <span class="xi"></span><span class="xv">terminator</span>: <span class="xt">String</span> = <span class="xs">"\n"</span><wbr />)</code></pre><p>Writes the textual representations of the given items into the standard output.</p></a><a href="/docs/swift/swift.%3F%3F(_:_:)?hash=8BUAU"><pre><code><span class="xk">func</span> <span class="xo">??</span> &lt;<span class="xu">T</span>&gt;(<span class="xi"></span><span class="xv">optional</span>: <span class="xt">T</span>?, <span class="xi"></span><span class="xv">defaultValue</span>: <span class="xa">@autoclosure</span> () <span class="xk">throws</span> -&gt; <span class="xt">T</span><wbr />) <span class="xk">rethrows</span> -&gt; <span class="xt">T</span></code></pre><p>Performs a nil-coalescing operation, returning the wrapped value of an <code>Optional</code> instance or a default value.</p></a><a href="/docs/swift/swift/string.init(stringinterpolation:)"><pre><code><span class="xk">init</span>(<span class="xi"></span><span class="xv">stringInterpolation</span>: <span class="xt">DefaultStringInterpolation</span><wbr />)</code></pre><p>Creates a new instance from an interpolated string literal.</p></a><a href="/docs/swift-nio/niocore/niotoomanybyteserror"><pre><code><span class="xk">struct</span> <span class="xv">NIOTooManyBytesError</span></code></pre></a><a href="/docs/swift/swift/codable"><pre><code><span class="xk">typealias</span> <span class="xv">Codable</span> = <span class="xt">Decodable</span> <span class="xo">&amp;</span> <span class="xt">Encodable</span></code></pre><p>A type that can convert itself into and out of an external representation.</p></a><a href="/docs/swift/swift/int"><pre><code><span class="xa">@frozen</span> <span class="xk">struct</span> <span class="xv">Int</span></code></pre><p>A signed integer value type.</p></a><a href="/docs/swift/swift/bool"><pre><code><span class="xa">@frozen</span> <span class="xk">struct</span> <span class="xv">Bool</span></code></pre><p>A value type whose instances are either <code>true</code> or <code>false</code>.</p></a><a href="/docs/swift/foundation/jsonencoder"><pre><code><span class="xk">class</span> <span class="xv">JSONEncoder</span></code></pre><p><code>JSONEncoder</code> facilitates the encoding of <code>Encodable</code> values into JSON.</p></a><a href="/docs/swift-nio/foundation/jsonencoder.encodeasbytebuffer(_:allocator:)"><pre><code><span class="xk">func</span> <span class="xv">encodeAsByteBuffer</span>&lt;<span class="xu">T</span>&gt;(<span class="xi"></span>_ <span class="xb">value</span>: <span class="xt">T</span>, <span class="xi"></span><span class="xv">allocator</span>: <span class="xt">ByteBufferAllocator</span><wbr />) <span class="xk">throws</span> -&gt; <span class="xt">ByteBuffer</span> <span class="xk">where</span> <span class="xt">T</span> : <span class="xt">Encodable</span></code></pre><p>Writes a JSON-encoded representation of the value you supply into a <code>ByteBuffer</code> that is freshly allocated.</p></a><a href="/docs/swift-nio/niocore/bytebufferallocator"><pre><code><span class="xk">struct</span> <span class="xv">ByteBufferAllocator</span></code></pre><p>The preferred allocator for <code>ByteBuffer</code> values. The allocation strategy is opaque but is currently libc’s <code>malloc</code>, <code>realloc</code> and <code>free</code>.</p></a><a href="/docs/swift/swift/stringprotocol.contains(_:)?hash=40KBF"><pre><code><span class="xk">func</span> <span class="xv">contains</span>&lt;<span class="xu">T</span>&gt;(<span class="xi"></span>_ <span class="xb">other</span>: <span class="xt">T</span><wbr />) -&gt; <span class="xt">Bool</span> <span class="xk">where</span> <span class="xt">T</span> : <span class="xt">StringProtocol</span></code></pre><p>Returns <code>true</code> iff <code>other</code> is non-empty and contained within <code>self</code> by case-sensitive, non-literal search.</p></a><a href="/docs/swift/foundation/jsondecoder"><pre><code><span class="xk">class</span> <span class="xv">JSONDecoder</span></code></pre><p><code>JSONDecoder</code> facilitates the decoding of JSON into semantic <code>Decodable</code> types.</p></a><a href="/docs/swift-nio/foundation/jsondecoder.decode(_:from:)"><pre><code><span class="xk">func</span> <span class="xv">decode</span>&lt;<span class="xu">T</span>&gt;(<span class="xi"></span>_ <span class="xb">type</span>: <span class="xt">T</span>.<span class="xk">Type</span>, <span class="xi"></span><span class="xv">from</span> <span class="xb">buffer</span>: <span class="xt">ByteBuffer</span><wbr />) <span class="xk">throws</span> -&gt; <span class="xt">T</span> <span class="xk">where</span> <span class="xt">T</span> : <span class="xt">Decodable</span></code></pre><p>Returns a value of the type you specify, decoded from a JSON object inside the readable bytes of a <code>ByteBuffer</code>.</p></a><a href="/docs/swift-nio/_concurrency/asyncsequence.collect(upto:)"><pre><code><span class="xk">func</span> <span class="xv">collect</span>(<span class="xi"></span><span class="xv">upTo</span> <span class="xb">maxBytes</span>: <span class="xt">Int</span><wbr />) <span class="xk">async</span> <span class="xk">throws</span> -&gt; <span class="xt">ByteBuffer</span></code></pre><p>Accumulates an <code>AsyncSequence</code> of <code>ByteBuffer</code>s into a single <code>ByteBuffer</code>.</p></a><a href="/docs/swift/_concurrency/asyncsequence"><pre><code><span class="xa">@rethrows</span> <span class="xk">protocol</span> <span class="xv">AsyncSequence</span></code></pre><p>A type that provides asynchronous, sequential, iterated access to its elements.</p></a><a href="/docs/async-http-client/asynchttpclient/filedownloaddelegate"><pre><code><span class="xk">final</span> <span class="xk">class</span> <span class="xv">FileDownloadDelegate</span></code></pre><p>Handles a streaming download to a given file path, allowing headers and progress to be reported.</p></a><a href="/docs/swift/foundation.nstemporarydirectory"><pre><code><span class="xk">func</span> <span class="xv">NSTemporaryDirectory</span>(<wbr />) -&gt; <span class="xt">String</span></code></pre></a><a href="/docs/swift/swift/string.+(_:_:)"><pre><code><span class="xk">static</span> <span class="xk">func</span> <span class="xo">+</span> (<span class="xi"></span><span class="xv">lhs</span>: <span class="xt">String</span>, <span class="xi"></span><span class="xv">rhs</span>: <span class="xt">String</span><wbr />) -&gt; <span class="xt">String</span></code></pre></a><a href="/docs/async-http-client/asynchttpclient/filedownloaddelegate/progress.totalbytes"><pre><code><span class="xk">var</span> <span class="xv">totalBytes</span>: <span class="xt">Int</span>?</code></pre></a><a href="/docs/async-http-client/asynchttpclient/filedownloaddelegate/progress.receivedbytes"><pre><code><span class="xk">var</span> <span class="xv">receivedBytes</span>: <span class="xt">Int</span></code></pre></a><a href="/docs/async-http-client/asynchttpclient/httpclient.execute(request:delegate:deadline:)"><pre><code><span class="xk">func</span> <span class="xv">execute</span>&lt;<span class="xu">Delegate</span>&gt;(<span class="xi"></span><span class="xv">request</span>: <span class="xt">HTTPClient</span>.<span class="xt">Request</span>, <span class="xi"></span><span class="xv">delegate</span>: <span class="xt">Delegate</span>, <span class="xi"></span><span class="xv">deadline</span>: <span class="xt">NIODeadline</span>? = <span class="xk">nil</span><wbr />) -&gt; <span class="xt">HTTPClient</span>.<span class="xt">Task</span>&lt;<span class="xt">Delegate</span>.<span class="xt">Response</span>&gt; <span class="xk">where</span> <span class="xt">Delegate</span> : <span class="xt">HTTPClientResponseDelegate</span></code></pre><p>Execute arbitrary HTTP request and handle response processing using provided delegate.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/request.init(url:method:headers:body:)?hash=77BZB"><pre><code><span class="xk">init</span>(<span class="xi"></span><span class="xv">url</span>: <span class="xt">String</span>, <span class="xi"></span><span class="xv">method</span>: <span class="xt">HTTPMethod</span> = .<span class="xv">GET</span>, <span class="xi"></span><span class="xv">headers</span>: <span class="xt">HTTPHeaders</span> = <span class="xv">HTTPHeaders</span>(), <span class="xi"></span><span class="xv">body</span>: <span class="xt">HTTPClient</span>.<span class="xt">Body</span>? = <span class="xk">nil</span><wbr />) <span class="xk">throws</span></code></pre><p>Create HTTP request.</p></a><a href="/docs/async-http-client/asynchttpclient/httpclient/task.futureresult"><pre><code><span class="xk">var</span> <span class="xv">futureResult</span>: <span class="xt">EventLoopFuture</span>&lt;<span class="xt">Response</span>&gt; { <span class="xk">get</span> }</code></pre><p><code>EventLoopFuture</code> for the response returned by this request.</p></a><a href="/docs/swift-nio/niocore/eventloopfuture.get"><pre><code><span class="xk">func</span> <span class="xv">get</span>(<wbr />) <span class="xk">async</span> <span class="xk">throws</span> -&gt; <span class="xt">Value</span></code></pre><p>Get the value/error from an <code>EventLoopFuture</code> in an <code>async</code> context.</p></a></div>
    </section>

    <hr />
    <center>Dive deeper into Networking</center>

    <ul id="next-steps">
        <li>
            <a href="https://swiftonserver.com/getting-started-with-structured-concurrency-in-swift">Getting Started with Structured Concurrency</a>
        </li>
        <li>
            <a href="https://swiftonserver.com/using-swiftnio-fundamentals">Using SwiftNIO - Fundamentals</a>
        </li>
    </ul>

    <section id="about-author" class="content-wrapper">
        <img src="https://github.com/tib.png" alt="Tibor Bödecs" class="author" />
        <h4>About Tibor Bödecs</h4>
        <p class="author-about">Tibor, also known as <a href="https://theswiftdev.com">"The Swift Dev"</a>, is the co-founder of <a href="https://binarybirds.com/">Binary Birds Kft.</a> Tibor provides Server-Side Swift development and consulting.</p>
    
        <a href="mailto:info@binarybirds.com" target="_blank" class="author-cta">Contact us</a>
    </section>
</article>


        </main>

        <footer>
            <section class="content-wrapper">
                <figure>
                    <picture>
                        <source srcset="https://swiftonserver.com/images/logos/logo~dark.png" media="(prefers-color-scheme: dark)" />
                        <img id="logo-image" width="80" height="80" src="https://swiftonserver.com/images/logos/logo.png" alt="Logo of Swift on server" title="Swift on server" />
                    </picture>
                </figure>

                <p>This site was generated using the <a href="https://swift.org/" target="_blank">Swift</a> programming language.</p>
                <p class="small">Created by <a href="https://x.com/JoannisOrlandos" target="_blank">Joannis Orlandos</a> &amp; <a href="https://x.com/tiborbodecs">Tibor Bödecs</a> © 2024.</p>

                <p>
                <a href="https://swiftonserver.com/">Home</a> ·
                <a href="https://swiftonserver.com/rss.xml" target="_blank">RSS</a> ·
                <a href="https://swiftonserver.com/sitemap.xml" target="_blank">Sitemap</a>
                </p>


            </section>
        </footer>
    

</body></html>