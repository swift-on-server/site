<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://swiftonserver.com/websockets-tutorial-using-swift-and-hummingbird/">
    <link rel="prev" href="https://swiftonserver.com/using-swiftnio-fundamentals/">
    <link rel="next" href="https://swiftonserver.com/whats-new-in-hummingbird-2/">

    <title>Using WebSockets in Hummingbird - Swift on server</title>
    <meta name="description" content="In this article, you will learn about WebSockets and how to use them with the Hummingbird framework in a straightforward, easy-to-follow manner.">

    <meta property="og:url" content="https://swiftonserver.com/websockets-tutorial-using-swift-and-hummingbird/">
    <meta property="og:title" content="Using WebSockets in Hummingbird - Swift on server">
    <meta property="og:description" content="In this article, you will learn about WebSockets and how to use them with the Hummingbird framework in a straightforward, easy-to-follow manner.">
    <meta property="og:image" content="/assets/websockets-tutorial-using-swift-and-hummingbird/cover.jpg" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Using WebSockets in Hummingbird - Swift on server">
    <meta name="twitter:description" content="In this article, you will learn about WebSockets and how to use them with the Hummingbird framework in a straightforward, easy-to-follow manner.">
    <meta name="twitter:image" content="/assets/websockets-tutorial-using-swift-and-hummingbird/cover.jpg">

    <link rel="stylesheet" href="https://swiftonserver.com/css/modern-normalize.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/modern-base.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/variables.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/base.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/grid.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/navigation.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/footer.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/syntax.css">
    <link rel="stylesheet" href="https://swiftonserver.com/css/style.css">

    

    <link rel="shortcut icon" href="https://swiftonserver.com/images/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://swiftonserver.com/images/icons/icon-320.png" type="image/png">
    
    <link rel="apple-touch-icon" href="https://swiftonserver.com/images/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://swiftonserver.com/images/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://swiftonserver.com/images/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://swiftonserver.com/images/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://swiftonserver.com/images/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://swiftonserver.com/images/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://swiftonserver.com/images/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://swiftonserver.com/images/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://swiftonserver.com/images/icons/apple-touch-icon-180x180.png">

    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
        media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
        media="(prefers-color-scheme: dark)"
    >

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
          const container = document.querySelector("div#swiftinit-tooltips");
          if (container !== null) {
              container.querySelectorAll('pre code').forEach((el) => {
                  el.classList.add('nohighlight');
              });
          }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
          document.querySelectorAll('section pre code:not(.language-swift').forEach((el) => {
              hljs.highlightElement(el);
          });
        });
    </script>

    <script defer data-domain="swiftonserver.com" src="https://plausible.io/js/script.js"></script>

</head>

<body>
    <div id="site-container">

    <header id="navigation">
        <a href="/">
            <figure>
                <picture>
                    <source
                        srcset="https://swiftonserver.com/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        src="https://swiftonserver.com/images/logos/logo.png"
                        alt="Logo of Swift on server"
                        title="Swift on server"
                    >
                </picture>
            </figure>
        </a>
        <nav>
            <input type="checkbox" id="primary-menu-button" name="menu-button" class="menu-button">
            <label for="primary-menu-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </label>
            <div class="menu-items">
                <a href="/posts/page/1/">Posts</a>
                <a href="/tags/">Tags</a>
                <a href="/authors/">Authors</a>
                <a href="/newsletter/">Newsletter</a>
            </div>
        </nav>
    </header>

    <main id="page-container">
    
    <div class="article-with-toc">
        <div>
            <article class="post">
                <div class="meta">
                    <time datetime="2024/06/27">2024/06/27</time>
                     &middot; <span class="reading-time">19 min read</span>
                    
                </div>
                <section>
                
                <section class='introduction'><h1>WebSocket tutorial using Swift and Hummingbird</h1></section><section class='details literature'><p>In this article, you will learn about WebSockets and how to use them with the Hummingbird framework in a straightforward, easy-to-follow manner. The first part will give a clear understanding of what the WebSocket protocol is. After that, a hands-on example will be created using the Hummingbird WebSocket library, showing how to use this technology effectively.</p><h2 id='What%20is%20a%20WebSocket?'><a href='#What%20is%20a%20WebSocket?'>What is a WebSocket?</a></h2><p>WebSocket is a communication protocol that enables two-way, real-time interaction between an HTTP client and server. It is designed to work over a single, long-lived connection, which significantly reduces overhead compared to traditional HTTP request-response cycles. This protocol uses HTTP 1 to establish the connection, and then upgrades it to the WebSocket protocol, allowing both the client and server to send and receive messages asynchronously.</p><p>WebSockets are particularly useful for applications that require low latency and high-frequency updates, such as online gaming, chat applications, and live data feeds. The protocol supports full-duplex communication, meaning data can be sent and received simultaneously. This efficient data transfer method helps in creating more interactive applications, providing a smoother user experience.</p><h2 id='WebSockets%20vs%20Alternatives'><a href='#WebSockets%20vs%20Alternatives'>WebSockets vs Alternatives</a></h2><p>Similar to WebSockets, there are other methods of achieving real-time capabilities. Techniques like HTTP polling, HTTP streaming, Comet, and SSE (server-sent events) come to mind. Let’s explore how these methods differ.</p><h3 id='Long%20polling%20(HTTP%20polling)'><a href='#Long%20polling%20(HTTP%20polling)'>Long polling (HTTP polling)</a></h3><p>Long polling (HTTP polling) was one of the first methods to address real-time data fetching. It involved the client repeatedly sending requests to the server. The server holds the request open until there’s new data or a timeout occurs. Once data is available, the server responds, and the client immediately sends a new request. However, long polling has several issues, including header overhead, latency, timeouts, and caching problems.</p><h3 id='HTTP%20streaming'><a href='#HTTP%20streaming'>HTTP streaming</a></h3><p>HTTP streaming reduces network latency by keeping the initial request open indefinitely. Unlike long polling, the server does not close the connection after sending data; it keeps it open to send new updates whenever there is a change.</p><h3 id='SSE%20-%20Server-sent%20events'><a href='#SSE%20-%20Server-sent%20events'>SSE - Server-sent events</a></h3><p>Server-sent events (SSE) allow the server to push data to the client, similar to HTTP streaming. SSE is a standardized version of HTTP streaming and includes a built-in browser API. However, SSE is not suitable for applications like chats or games that require two-way communication since it only allows a one-way data flow from the server to the client. SSE uses traditional HTTP and has limitations on the number of open connections.</p><h2 id='Why%20to%20use%20WebSockets?'><a href='#Why%20to%20use%20WebSockets?'>Why to use WebSockets?</a></h2><p>The above methods are less efficient on a protocol level and often seem like workarounds to make a request-reply protocol appear full-duplex. WebSockets are designed for full-duplex communication, and are more lightweight than its alternatives.</p><h3 id='Security%20(WSS)'><a href='#Security%20(WSS)'>Security (WSS)</a></h3><p>WebSocket (WS) uses a plain-text TCP connection. A WebSocket connection is created by upgrading an HTTP/1 connection. WebSocket Secure (WSS), which is upgraded from HTTPS, uses TLS to protect the TCP connection. WSS protects against man-in-the-middle attacks but does not offer cross-origin or application-level security. Developers should add URL origin checks and strong authentication.</p><h2 id='Building%20a%20real-time%20WebSocket%20chat'><a href='#Building%20a%20real-time%20WebSocket%20chat'>Building a real-time WebSocket chat</a></h2><p>Hummingbird’s WebSockets leverage async sequences to achieve an efficient and robust method of processing messages.</p><p>Read more about this here: <a href='../advanced-async-sequences'>Advanced Async Sequences in Swift</a></p><p>The <a href='https://github.com/hummingbird-project/hummingbird-websocket' target='_blank' rel='external'>Hummingbird Websocket</a> library is an extension for the Hummingbird web framework. This library provides WebSocket Client- and Serve support using the latest structured concurrency features like <code><a href='https://swiftinit.org/docs/swift/_concurrency/taskgroup' target='_blank' rel='external'>TaskGroup</a></code> and <code><a href='https://swiftinit.org/docs/swift/_concurrency/asyncsequence' target='_blank' rel='external'>AsyncSequence</a></code>s.</p><p>The <a href='https://github.com/hummingbird-project/hummingbird-examples/tree/main/websocket-chat' target='_blank' rel='external'>Hummingbird WebSocket chat application</a> example demonstrates using web sockets for real-time communication. For an even simpler example, see the <a href='https://github.com/hummingbird-project/hummingbird-examples/tree/main/websocket-echo' target='_blank' rel='external'>echo server</a> example. This article will explore the chat application step-by-step. Let’s begin with the directory structure.</p><pre class='snippet'><code class='language-sh'><span class='newline'></span>.<span class='newline'>
</span>├── Package.resolved<span class='newline'>
</span>├── Package.swift<span class='newline'>
</span>├── README.md<span class='newline'>
</span>├── Sources<span class='newline'>
</span>│   └── App<span class='newline'>
</span>│       ├── App.swift<span class='newline'>
</span>│       ├── Application+build.swift<span class='newline'>
</span>│       └── ConnectionManager.swift<span class='newline'>
</span>└── public<span class='newline'>
</span>    └── chat.html</code></pre><p>The <code>App.swift</code> file contains the standard entry point for a Hummingbird application. The <code>Application+build.swift</code> file includes the Hummingbird app configuration using the WebSocket connection manager. The <code>ConnectionManager</code> is responsible for managing WebSocket connections. The <code>public/chat.html</code> file contains client-side JavaScript code to demonstrate a WebSocket connection.</p><p>To add WebSocket support to a Hummingbird-based Swift package, simply include the Hummingbird Websocket library as a dependency in your <code>Package.swift</code> file..</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xc'>// swift-tools-version:5.10</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>PackageDescription</span><span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>package</span> = <span class='xv'>Package</span>(<span class='newline'>
</span>    <span class='xv'>name</span>: <span class='xs'>"websocket-chat"</span>,<span class='newline'>
</span>    <span class='xv'>platforms</span>: [<span class='newline'>
</span>        .<span class='xv'>macOS</span>(.<span class='xv'>v14</span>),<span class='newline'>
</span>    ],<span class='newline'>
</span>    <span class='xv'>products</span>: [<span class='newline'>
</span>        .<span class='xv'>executable</span>(<span class='xv'>name</span>: <span class='xs'>"App"</span>, <span class='xv'>targets</span>: [<span class='xs'>"App"</span>]),<span class='newline'>
</span>    ],<span class='newline'>
</span>    <span class='xv'>dependencies</span>: [<span class='newline'>
</span>        .<span class='xv'>package</span>(<span class='xv'>url</span>: <span class='xs'>"https://github.com/hummingbird-project/hummingbird.git"</span>, <span class='xv'>from</span>: <span class='xs'>"2.0.0"</span>),<span class='newline'>
</span>        .<span class='xv'>package</span>(<span class='xv'>url</span>: <span class='xs'>"https://github.com/hummingbird-project/hummingbird-websocket.git"</span>, <span class='xv'>from</span>: <span class='xs'>"2.0.0-beta.5"</span>),<span class='newline'>
</span>        .<span class='xv'>package</span>(<span class='xv'>url</span>: <span class='xs'>"https://github.com/apple/swift-argument-parser.git"</span>, <span class='xv'>from</span>: <span class='xs'>"1.4.0"</span>),<span class='newline'>
</span>    ],<span class='newline'>
</span>    <span class='xv'>targets</span>: [<span class='newline'>
</span>        .<span class='xv'>executableTarget</span>(<span class='newline'>
</span>            <span class='xv'>name</span>: <span class='xs'>"App"</span>,<span class='newline'>
</span>            <span class='xv'>dependencies</span>: [<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"ArgumentParser"</span>, <span class='xv'>package</span>: <span class='xs'>"swift-argument-parser"</span>),<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"Hummingbird"</span>, <span class='xv'>package</span>: <span class='xs'>"hummingbird"</span>),<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"HummingbirdWebSocket"</span>, <span class='xv'>package</span>: <span class='xs'>"hummingbird-websocket"</span>),<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"HummingbirdWSCompression"</span>, <span class='xv'>package</span>: <span class='xs'>"hummingbird-websocket"</span>),<span class='newline'>
</span>            ]<span class='newline'>
</span>        )<span class='newline'>
</span>    ]<span class='newline'>
</span>)</code></pre><p>The <code>App.swift</code> file is the main entry point for a Hummingbird application using the <code><a href='https://swiftinit.org/docs/swift-argument-parser/argumentparser' target='_blank' rel='external'>ArgumentParser</a></code> library.</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xc'>// 1.</span><span class='newline'>
</span><span class='xk'>protocol</span> <span class='xt'>AppArguments</span> {<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>hostname</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a> { <span class='xv'>get</span> }<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>port</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/int' target='_blank' rel='external'>Int</a> { <span class='xv'>get</span> }<span class='newline'>
</span>}<span class='newline'>

</span><span class='xc'>// 2.</span><span class='newline'>
</span><span class='xa'>@main</span><span class='newline'>
</span><span class='xk'>struct</span> <span class='xt'>HummingbirdArguments</span>: <span class='xt'>AppArguments</span>, <a class='xt' href='https://swiftinit.org/docs/swift-argument-parser/argumentparser/asyncparsablecommand' target='_blank' rel='external'>AsyncParsableCommand</a> {<span class='newline'>
</span>    <span class='xa'>@Option</span>(<span class='xv'>name</span>: .<a class='xv' href='https://swiftinit.org/docs/swift-argument-parser/argumentparser/namespecification.shortandlong' target='_blank' rel='external'>shortAndLong</a>)<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>hostname</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a> = <span class='xs'>"127.0.0.1"</span><span class='newline'>

</span>    <span class='xa'>@Option</span>(<span class='xv'>name</span>: .<a class='xv' href='https://swiftinit.org/docs/swift-argument-parser/argumentparser/namespecification.shortandlong' target='_blank' rel='external'>shortAndLong</a>)<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>port</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/int' target='_blank' rel='external'>Int</a> = <span class='xn'>8080</span><span class='newline'>

</span>    <span class='xk'>func</span> <span class='xv'>run</span>() <span class='xk'>async</span> <span class='xk'>throws</span> {<span class='newline'>
</span>        <span class='xc'>// 3.</span><span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>app</span> = <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>buildApplication</span>(<span class='xk'>self</span>)<span class='newline'>
</span>        <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>app</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/applicationprotocol.runservice(gracefulshutdownsignals:)' target='_blank' rel='external'>runService</a>()<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/websockets.swift#L197' target='_blank' class='source github'><span class='file'>websockets.swift</span>:<span class='line'>197</span></a><ol><li><p>The <code>AppArguments</code> protocol defines hostname and port properties.</p></li><li><p>The <code>HummingbirdArguments</code> structure is the main entry point, using <code><a href='https://swiftinit.org/docs/swift-argument-parser/argumentparser/asyncparsablecommand' target='_blank' rel='external'>AsyncParsableCommand</a></code>, and sets command-line options.</p></li><li><p>The run function builds the Hummingbird application and starts the server as a service.</p></li></ol><p>The code inside the <code>Application+build.swift</code> file sets up a Hummingbird application configured for WebSocket communication. It defines a function buildApplication that takes command-line arguments for hostname and port, initializes a logger, and sets up routers with middlewares for logging and file handling. It creates a <code>ConnectionManager</code> for managing WebSocket connections and configures the WebSocket router to handle chat connections, upgrading the connection if a username is provided:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>func</span> <span class='xv'>buildApplication</span>(<span class='newline'>
</span>    _ <span class='xv'>arguments</span>: <span class='xk'>some</span> <span class='xt'>AppArguments</span><span class='newline'>
</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xk'>some</span> <a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/applicationprotocol' target='_blank' rel='external'>ApplicationProtocol</a> {<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>logger</span> = <a class='xt' href='https://swiftinit.org/docs/swift-log/logging/logger' target='_blank' rel='external'>Logger</a>(<span class='xv'>label</span>: <span class='xs'>"WebSocketChat"</span>)<span class='newline'>
</span>    <span class='xv'>logger</span>.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger.loglevel' target='_blank' rel='external'>logLevel</a> = .<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/level.trace' target='_blank' rel='external'>trace</a><span class='newline'>

</span>    <span class='xc'>// 1.</span><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>router</span> = <a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/router' target='_blank' rel='external'>Router</a>()<span class='newline'>
</span>    <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/router.middlewares' target='_blank' rel='external'>middlewares</a>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/middlewaregroup.add(_:)' target='_blank' rel='external'>add</a>(<a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/logrequestsmiddleware' target='_blank' rel='external'>LogRequestsMiddleware</a>(.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/level.debug' target='_blank' rel='external'>debug</a>))<span class='newline'>
</span>    <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/router.middlewares' target='_blank' rel='external'>middlewares</a>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/middlewaregroup.add(_:)' target='_blank' rel='external'>add</a>(<a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/filemiddleware' target='_blank' rel='external'>FileMiddleware</a>(<span class='xv'>logger</span>: <span class='xv'>logger</span>))<span class='newline'>

</span>    <span class='xc'>// 2.</span><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>connectionManager</span> = <span class='xt'>ConnectionManager</span>(<span class='xv'>logger</span>: <span class='xv'>logger</span>)<span class='newline'>
</span>    <span class='xc'>// 3.</span><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>wsRouter</span> = <a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/router' target='_blank' rel='external'>Router</a>(<span class='xv'>context</span>: <a class='xt' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwebsocket/basicwebsocketrequestcontext' target='_blank' rel='external'>BasicWebSocketRequestContext</a>.<span class='xk'>self</span>)<span class='newline'>
</span>    <span class='xv'>wsRouter</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/router.middlewares' target='_blank' rel='external'>middlewares</a>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/middlewaregroup.add(_:)' target='_blank' rel='external'>add</a>(<a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/logrequestsmiddleware' target='_blank' rel='external'>LogRequestsMiddleware</a>(.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/level.debug' target='_blank' rel='external'>debug</a>))<span class='newline'>
</span>    <span class='xc'>// 4.</span><span class='newline'>
</span>    <span class='xv'>wsRouter</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbird/routermethods.ws(_:shouldupgrade:onupgrade:)' target='_blank' rel='external'>ws</a>(<a class='xs' href='https://swiftinit.org/docs/hummingbird/hummingbird/routerpath.init(stringliteral:)' target='_blank' rel='external'>"chat"</a>) { <span class='xv'>request</span>, _ <span class='xk'>in</span><span class='newline'>
</span>        <span class='xk'>guard</span> <span class='xv'>request</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/request.uri' target='_blank' rel='external'>uri</a>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/uri.queryparameters' target='_blank' rel='external'>queryParameters</a><a href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/flatdictionary.subscript(_:)?hash=2EYQB' target='_blank' rel='external'>[</a><a class='xs' href='https://swiftinit.org/docs/swift/swift/substring.init(stringliteral:)' target='_blank' rel='external'>"username"</a>] <a class='xv' href='https://swiftinit.org/docs/swift/swift/optional.!=(_:_:)?hash=38B38' target='_blank' rel='external'>!=</a> <span class='xk'>nil</span> <span class='xk'>else</span> {<span class='newline'>
</span>            <span class='xk'>return</span> .<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwebsocket/routershouldupgrade.dontupgrade' target='_blank' rel='external'>dontUpgrade</a><span class='newline'>
</span>        }<span class='newline'>
</span>        <span class='xk'>return</span> .<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwebsocket/routershouldupgrade.upgrade(_:)' target='_blank' rel='external'>upgrade</a>([:])<span class='newline'>
</span>        <span class='xc'>// 5.</span><span class='newline'>
</span>    } <span class='xv'>onUpgrade</span>: { <span class='xv'>inbound</span>, <span class='xv'>outbound</span>, <span class='xv'>context</span> <span class='xk'>in</span><span class='newline'>
</span>        <span class='xk'>guard</span> <span class='xk'>let</span> <span class='xv'>name</span> = <span class='xv'>context</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwebsocket/websocketroutercontext.request' target='_blank' rel='external'>request</a>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/request.uri' target='_blank' rel='external'>uri</a>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/uri.queryparameters' target='_blank' rel='external'>queryParameters</a><a href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/flatdictionary.subscript(_:)?hash=2EYQB' target='_blank' rel='external'>[</a><a class='xs' href='https://swiftinit.org/docs/swift/swift/substring.init(stringliteral:)' target='_blank' rel='external'>"username"</a>] <span class='xk'>else</span> {<span class='newline'>
</span>            <span class='xk'>return</span><span class='newline'>
</span>        }<span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>outputStream</span> = <span class='xv'>connectionManager</span>.<span class='xv'>addUser</span>(<span class='newline'>
</span>            <span class='xv'>name</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>(<span class='xv'>name</span>),<span class='newline'>
</span>            <span class='xv'>inbound</span>: <span class='xv'>inbound</span>,<span class='newline'>
</span>            <span class='xv'>outbound</span>: <span class='xv'>outbound</span><span class='newline'>
</span>        )<span class='newline'>
</span>        <span class='xk'>for</span> <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>output</span> <span class='xk'>in</span> <span class='xv'>outputStream</span> {<span class='newline'>
</span>            <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>outbound</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter.write(_:)' target='_blank' rel='external'>write</a>(<span class='xv'>output</span>)<span class='newline'>
</span>        }<span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xc'>// ...</span><span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/websockets.swift#L139' target='_blank' class='source github'><span class='file'>websockets.swift</span>:<span class='line'>139</span></a><ol><li><p>A <code><a href='https://swiftinit.org/docs/hummingbird/hummingbird/router' target='_blank' rel='external'>Router</a></code> instance is created, and middlewares for logging requests and serving files are added to it.</p></li><li><p>A <code>ConnectionManager</code> instance is created with a logger for managing WebSocket connections.</p></li><li><p>A separate <code><a href='https://swiftinit.org/docs/hummingbird/hummingbird/router' target='_blank' rel='external'>Router</a></code> instance is created specifically for handling and logging WebSocket requests.</p></li><li><p>A WebSocket route is set up for the <code>/chat</code> path, checking for a username query parameter for WebSocket upgrades.</p></li><li><p>On upgrade, the connection manager handles WebSocket users and writes the output stream to the outbound channel.</p></li></ol><p>The application is configured to use HTTP with WebSocket upgrades and includes WebSocket compression. Finally, the application is returned with the necessary services added:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>import</span> <span class='xv'>ArgumentParser</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>AsyncAlgorithms</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Foundation</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Hummingbird</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdWSCompression</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdWebSocket</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Logging</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>ServiceLifecycle</span><span class='newline'>

</span><span class='xk'>func</span> <span class='xv'>buildApplication</span>(<span class='newline'>
</span>    _ <span class='xv'>arguments</span>: <span class='xk'>some</span> <span class='xt'>AppArguments</span><span class='newline'>
</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xk'>some</span> <a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/applicationprotocol' target='_blank' rel='external'>ApplicationProtocol</a> {<span class='newline'>
</span>    <span class='xc'>// ...</span><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>connectionManager</span> = <span class='xt'>ConnectionManager</span>(<span class='xv'>logger</span>: <span class='xv'>logger</span>)<span class='newline'>
</span>    <span class='xc'>// ...</span><span class='newline'>
</span>    <span class='xc'>// 1.</span><span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>app</span> = <a class='xt' href='https://swiftinit.org/docs/hummingbird/hummingbird/application' target='_blank' rel='external'>Application</a>(<span class='newline'>
</span>        <span class='xv'>router</span>: <span class='xv'>router</span>,<span class='newline'>
</span>        <span class='xv'>server</span>: .<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdcore/httpserverbuilder.http1websocketupgrade(websocketrouter:configuration:additionalchannelhandlers:)' target='_blank' rel='external'>http1WebSocketUpgrade</a>(<span class='newline'>
</span>            <span class='xv'>webSocketRouter</span>: <span class='xv'>wsRouter</span>,<span class='newline'>
</span>            <span class='xv'>configuration</span>: .<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwebsocket/websocketserverconfiguration.init(maxframesize:extensions:autoping:)' target='_blank' rel='external'>init</a>(<span class='xv'>extensions</span>: [.<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketextensionfactory.permessagedeflate(maxwindow:nocontexttakeover:maxdecompressedframesize:minframesizetocompress:)' target='_blank' rel='external'>perMessageDeflate</a>()])<span class='newline'>
</span>        ),<span class='newline'>
</span>        <span class='xv'>configuration</span>: .<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/applicationconfiguration.init(address:servername:backlog:reuseaddress:availableconnectionsdelegate:)' target='_blank' rel='external'>init</a>(<span class='newline'>
</span>            <span class='xv'>address</span>: .<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbirdcore/bindaddress.hostname(_:port:)' target='_blank' rel='external'>hostname</a>(<span class='xv'>arguments</span>.<span class='xv'>hostname</span>, <span class='xv'>port</span>: <span class='xv'>arguments</span>.<span class='xv'>port</span>)<span class='newline'>
</span>        ),<span class='newline'>
</span>        <span class='xv'>logger</span>: <span class='xv'>logger</span><span class='newline'>
</span>    )<span class='newline'>
</span>    <span class='xc'>// 2.</span><span class='newline'>
</span>    <span class='xv'>app</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird/hummingbird/application.addservices(_:)' target='_blank' rel='external'>addServices</a>(<span class='xv'>connectionManager</span>)<span class='newline'>
</span>    <span class='xk'>return</span> <span class='xv'>app</span><span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/websockets-app.swift#L79' target='_blank' class='source github'><span class='file'>websockets-app.swift</span>:<span class='line'>79</span></a><ol><li><p>An <code>Application</code> instance is created with the previously configured routers for both HTTP and WebSocket requests.</p></li><li><p>The <code>ConnectionManager</code> is added as a service to the application before returning it.</p></li></ol><p>The <code>ConnectionManager</code> struct manages WebSocket connections, allowing users to join, send messages, and leave the chat, using an <code>AsyncStream</code> for connection handling and Actor for managing outbound connections:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>import</span> <span class='xv'>ArgumentParser</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>AsyncAlgorithms</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Foundation</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Hummingbird</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdWSCompression</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdWebSocket</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Logging</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>ServiceLifecycle</span><span class='newline'>

</span><span class='xc'>// 1.</span><span class='newline'>
</span><span class='xk'>struct</span> <span class='xt'>ConnectionManager</span>: <a class='xt' href='https://swiftinit.org/docs/swift-service-lifecycle/servicelifecycle/service' target='_blank' rel='external'>Service</a> {<span class='newline'>

</span>    <span class='xc'>// 2.</span><span class='newline'>
</span>    <span class='xk'>typealias</span> <span class='xt'>OutputStream</span> = <a class='xt' href='https://swiftinit.org/docs/swift-async-algorithms/asyncalgorithms/asyncchannel' target='_blank' rel='external'>AsyncChannel</a>&lt;<a class='xt' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter' target='_blank' rel='external'>WebSocketOutboundWriter</a>.<a class='xt' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter/outboundframe' target='_blank' rel='external'>OutboundFrame</a>&gt;<span class='newline'>

</span>    <span class='xc'>// 3.</span><span class='newline'>
</span>    <span class='xk'>struct</span> <span class='xt'>Connection</span> {<span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>name</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a><span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>inbound</span>: <a class='xt' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketinboundstream' target='_blank' rel='external'>WebSocketInboundStream</a><span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>outbound</span>: <span class='xt'>OutputStream</span><span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xc'>// 4.</span><span class='newline'>
</span>    <span class='xk'>actor</span> <span class='xt'>OutboundConnections</span> {<span class='newline'>

</span>        <span class='xk'>var</span> <span class='xv'>outboundWriters</span>: [<a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>: <span class='xt'>OutputStream</span>]<span class='newline'>

</span>        <span class='xk'>init</span>() {<span class='newline'>
</span>            <span class='xk'>self</span>.<span class='xv'>outboundWriters</span> = [:]<span class='newline'>
</span>        }<span class='newline'>

</span>        <span class='xk'>func</span> <span class='xv'>send</span>(_ <span class='xv'>output</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>) <span class='xk'>async</span> {<span class='newline'>
</span>            <span class='xk'>for</span> <span class='xv'>outbound</span> <span class='xk'>in</span> <span class='xv'>outboundWriters</span>.<a class='xv' href='https://swiftinit.org/docs/swift/swift/dictionary.values' target='_blank' rel='external'>values</a> {<span class='newline'>
</span>                <span class='xk'>await</span> <span class='xv'>outbound</span>.<a class='xv' href='https://swiftinit.org/docs/swift-async-algorithms/asyncalgorithms/asyncchannel.send(_:)' target='_blank' rel='external'>send</a>(.<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter/outboundframe.text(_:)' target='_blank' rel='external'>text</a>(<span class='xv'>output</span>))<span class='newline'>
</span>            }<span class='newline'>
</span>        }<span class='newline'>

</span>        <span class='xk'>func</span> <span class='xv'>add</span>(<span class='xv'>name</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>, <span class='xv'>outbound</span>: <span class='xt'>OutputStream</span>) <span class='xk'>async</span> {<span class='newline'>
</span>            <span class='xv'>outboundWriters</span><a href='https://swiftinit.org/docs/swift/swift/dictionary.subscript(_:)?hash=8RFQL' target='_blank' rel='external'>[</a><span class='xv'>name</span>] = <span class='xv'>outbound</span><span class='newline'>
</span>            <span class='xk'>await</span> <span class='xv'>send</span>(<a class='xs' href='https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)' target='_blank' rel='external'>"</a>\(<span class='xv'>name</span>)<span class='xs'> joined"</span>)<span class='newline'>
</span>        }<span class='newline'>

</span>        <span class='xk'>func</span> <span class='xv'>remove</span>(<span class='xv'>name</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>) <span class='xk'>async</span> {<span class='newline'>
</span>            <span class='xv'>outboundWriters</span><a href='https://swiftinit.org/docs/swift/swift/dictionary.subscript(_:)?hash=8RFQL' target='_blank' rel='external'>[</a><span class='xv'>name</span>] = <span class='xk'>nil</span><span class='newline'>
</span>            <span class='xk'>await</span> <span class='xv'>send</span>(<a class='xs' href='https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)' target='_blank' rel='external'>"</a>\(<span class='xv'>name</span>)<span class='xs'> left"</span>)<span class='newline'>
</span>        }<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/websockets-connection-manager-types.swift#L51' target='_blank' class='source github'><span class='file'>websockets-connection-manager-types.swift</span>:<span class='line'>51</span></a><ol><li><p>The <code>ConnectionManager</code> implements the <code><a href='https://swiftinit.org/docs/swift-service-lifecycle/servicelifecycle/service' target='_blank' rel='external'>Service</a></code> protocol to manage WebSocket connections and ensure graceful shutdown.</p></li><li><p><code><a href='https://swiftinit.org/docs/swift/foundation/outputstream' target='_blank' rel='external'>OutputStream</a></code> is defined as an <code><a href='https://swiftinit.org/docs/swift-async-algorithms/asyncalgorithms/asyncchannel' target='_blank' rel='external'>AsyncChannel</a></code> for sending WebSocket outbound frames.</p></li><li><p>The <code>Connection</code> struct contains details about each WebSocket connection, including the username, inbound stream, and outbound stream.</p></li><li><p>The <code>OutboundConnections</code> actor manages a dictionary of outbound writers to broadcast messages to all connections.</p></li></ol><p>The <code>addUser</code> function creates a <code>Connection</code> object with a given name and WebSocket streams, yields this connection, and returns a new <code><a href='https://swiftinit.org/docs/swift/foundation/outputstream' target='_blank' rel='external'>OutputStream</a></code>:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>import</span> <span class='xv'>ArgumentParser</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>AsyncAlgorithms</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Foundation</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Hummingbird</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdWSCompression</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdWebSocket</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Logging</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>ServiceLifecycle</span><span class='newline'>

</span><span class='xk'>struct</span> <span class='xt'>ConnectionManager</span>: <a class='xt' href='https://swiftinit.org/docs/swift-service-lifecycle/servicelifecycle/service' target='_blank' rel='external'>Service</a> {<span class='newline'>

</span>    <span class='xc'>// ...</span><span class='newline'>
</span>    <span class='xk'>func</span> <span class='xv'>addUser</span>(<span class='newline'>
</span>        <span class='xv'>name</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>,<span class='newline'>
</span>        <span class='xv'>inbound</span>: <a class='xt' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketinboundstream' target='_blank' rel='external'>WebSocketInboundStream</a>,<span class='newline'>
</span>        <span class='xv'>outbound</span>: <a class='xt' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter' target='_blank' rel='external'>WebSocketOutboundWriter</a><span class='newline'>
</span>    ) -&gt; <span class='xt'>OutputStream</span> {<span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>outputStream</span> = <span class='xt'>OutputStream</span>()<span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>connection</span> = <span class='xt'>Connection</span>(<span class='newline'>
</span>            <span class='xv'>name</span>: <span class='xv'>name</span>,<span class='newline'>
</span>            <span class='xv'>inbound</span>: <span class='xv'>inbound</span>,<span class='newline'>
</span>            <span class='xv'>outbound</span>: <span class='xv'>outputStream</span><span class='newline'>
</span>        )<span class='newline'>
</span>        <span class='xv'>connectionContinuation</span>.<a class='xv' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream/continuation.yield(_:)' target='_blank' rel='external'>yield</a>(<span class='xv'>connection</span>)<span class='newline'>
</span>        <span class='xk'>return</span> <span class='xv'>outputStream</span><span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/websockets-connection-manager-add-user.swift#L59' target='_blank' class='source github'><span class='file'>websockets-connection-manager-add-user.swift</span>:<span class='line'>59</span></a><p>The <code>init(logger:)</code> method creates an asynchronous stream for <code>Connection</code> objects along with a logger, and the <code>run</code> function asynchronously handles connections by logging their addition, processing inbound messages, sending outbound messages, and logging their removal, with graceful shutdown support:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>struct</span> <span class='xt'>ConnectionManager</span>: <a class='xt' href='https://swiftinit.org/docs/swift-service-lifecycle/servicelifecycle/service' target='_blank' rel='external'>Service</a> {<span class='newline'>

</span>    <span class='xc'>// ...</span><span class='newline'>

</span>    <span class='xk'>let</span> <span class='xv'>connectionStream</span>: <a class='xt' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream' target='_blank' rel='external'>AsyncStream</a>&lt;<span class='xt'>Connection</span>&gt;<span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>connectionContinuation</span>: <a class='xt' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream' target='_blank' rel='external'>AsyncStream</a>&lt;<span class='xt'>Connection</span>&gt;.<a class='xt' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream/continuation' target='_blank' rel='external'>Continuation</a><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>logger</span>: <a class='xt' href='https://swiftinit.org/docs/swift-log/logging/logger' target='_blank' rel='external'>Logger</a><span class='newline'>

</span>    <span class='xk'>init</span>(<span class='xv'>logger</span>: <a class='xt' href='https://swiftinit.org/docs/swift-log/logging/logger' target='_blank' rel='external'>Logger</a>) {<span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>stream</span> = <a class='xt' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream' target='_blank' rel='external'>AsyncStream</a>&lt;<span class='xt'>Connection</span>&gt;.<a class='xv' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream.makestream(of:bufferingpolicy:)' target='_blank' rel='external'>makeStream</a>()<span class='newline'>
</span>        <span class='xk'>self</span>.<span class='xv'>connectionStream</span> = <span class='xv'>stream</span>.<span class='xv'>stream</span><span class='newline'>
</span>        <span class='xk'>self</span>.<span class='xv'>connectionContinuation</span> = <span class='xv'>stream</span>.<span class='xv'>continuation</span><span class='newline'>
</span>        <span class='xk'>self</span>.<span class='xv'>logger</span> = <span class='xv'>logger</span><span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xk'>func</span> <span class='xv'>run</span>() <span class='xk'>async</span> {<span class='newline'>
</span>        <span class='xk'>await</span> <a class='xv' href='https://swiftinit.org/docs/swift-service-lifecycle/servicelifecycle.withgracefulshutdownhandler(operation:ongracefulshutdown:)' target='_blank' rel='external'>withGracefulShutdownHandler</a> {<span class='newline'>
</span>            <span class='xk'>await</span> <a class='xv' href='https://swiftinit.org/docs/swift/_concurrency.withdiscardingtaskgroup(returning:isolation:body:)' target='_blank' rel='external'>withDiscardingTaskGroup</a> { <span class='xv'>group</span> <span class='xk'>in</span><span class='newline'>
</span>                <span class='xk'>let</span> <span class='xv'>outboundCounnections</span> = <span class='xt'>OutboundConnections</span>()<span class='newline'>
</span>                <span class='xc'>// 1.</span><span class='newline'>
</span>                <span class='xk'>for</span> <span class='xk'>await</span> <span class='xv'>connection</span> <span class='xk'>in</span> <span class='xv'>connectionStream</span> {<span class='newline'>
</span>                    <span class='xv'>group</span>.<a class='xv' href='https://swiftinit.org/docs/swift/_concurrency/discardingtaskgroup.addtask(operation:)' target='_blank' rel='external'>addTask</a> {<span class='newline'>
</span>                        <span class='xv'>logger</span>.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger.info(_:metadata:file:function:line:)' target='_blank' rel='external'>info</a>(<span class='newline'>
</span>                            <a class='xs' href='https://swiftinit.org/docs/swift-log/logging/logger/message.init(stringliteral:)' target='_blank' rel='external'>"add connection"</a>,<span class='newline'>
</span>                            <span class='xv'>metadata</span>: [<span class='newline'>
</span>                                <span class='xs'>"name"</span>: .<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/metadatavalue.string(_:)' target='_blank' rel='external'>string</a>(<span class='xv'>connection</span>.<span class='xv'>name</span>)<span class='newline'>
</span>                            ]<span class='newline'>
</span>                        )<span class='newline'>
</span>                        <span class='xc'>// 2.</span><span class='newline'>
</span>                        <span class='xk'>await</span> <span class='xv'>outboundCounnections</span>.<span class='xv'>add</span>(<span class='newline'>
</span>                            <span class='xv'>name</span>: <span class='xv'>connection</span>.<span class='xv'>name</span>,<span class='newline'>
</span>                            <span class='xv'>outbound</span>: <span class='xv'>connection</span>.<span class='xv'>outbound</span><span class='newline'>
</span>                        )<span class='newline'>

</span>                        <span class='xk'>do</span> {<span class='newline'>
</span>                            <span class='xc'>// 3.</span><span class='newline'>
</span>                            <span class='xk'>for</span> <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>input</span> <span class='xk'>in</span> <span class='xv'>connection</span>.<span class='xv'>inbound</span>.<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketinboundstream.messages(maxsize:)' target='_blank' rel='external'>messages</a>(<span class='newline'>
</span>                                <span class='xv'>maxSize</span>: <span class='xn'>1_000_000</span><span class='newline'>
</span>                            ) {<span class='newline'>
</span>                                <span class='xk'>guard</span> <span class='xk'>case</span> .<a class='xv' href='https://swiftinit.org/docs/hummingbird-websocket/hummingbirdwscore/websocketmessage.text(_:)' target='_blank' rel='external'>text</a>(<span class='xk'>let</span> <span class='xv'>text</span>) = <span class='xv'>input</span> <span class='xk'>else</span> {<span class='newline'>
</span>                                    <span class='xk'>continue</span><span class='newline'>
</span>                                }<span class='newline'>
</span>                                <span class='xk'>let</span> <span class='xv'>output</span> = <a class='xs' href='https://swiftinit.org/docs/swift/swift/string.init(stringinterpolation:)' target='_blank' rel='external'>"[</a>\(<span class='xv'>connection</span>.<span class='xv'>name</span>)<span class='xs'>]: </span>\(<span class='xv'>text</span>)<span class='xs'>"</span><span class='newline'>
</span>                                <span class='xv'>logger</span>.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger.debug(_:metadata:file:function:line:)' target='_blank' rel='external'>debug</a>(<span class='newline'>
</span>                                    <a class='xs' href='https://swiftinit.org/docs/swift-log/logging/logger/message.init(stringliteral:)' target='_blank' rel='external'>"Output"</a>,<span class='newline'>
</span>                                    <span class='xv'>metadata</span>: [<span class='newline'>
</span>                                        <span class='xs'>"message"</span>: .<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/metadatavalue.string(_:)' target='_blank' rel='external'>string</a>(<span class='xv'>output</span>)<span class='newline'>
</span>                                    ]<span class='newline'>
</span>                                )<span class='newline'>
</span>                                <span class='xc'>// 4.</span><span class='newline'>
</span>                                <span class='xk'>await</span> <span class='xv'>outboundCounnections</span>.<span class='xv'>send</span>(<span class='xv'>output</span>)<span class='newline'>
</span>                            }<span class='newline'>
</span>                        }<span class='newline'>
</span>                        <span class='xk'>catch</span> {}<span class='newline'>

</span>                        <span class='xv'>logger</span>.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger.info(_:metadata:file:function:line:)' target='_blank' rel='external'>info</a>(<span class='newline'>
</span>                            <a class='xs' href='https://swiftinit.org/docs/swift-log/logging/logger/message.init(stringliteral:)' target='_blank' rel='external'>"remove connection"</a>,<span class='newline'>
</span>                            <span class='xv'>metadata</span>: [<span class='newline'>
</span>                                <span class='xs'>"name"</span>: .<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/metadatavalue.string(_:)' target='_blank' rel='external'>string</a>(<span class='xv'>connection</span>.<span class='xv'>name</span>)<span class='newline'>
</span>                            ]<span class='newline'>
</span>                        )<span class='newline'>
</span>                        <span class='xc'>// 5.</span><span class='newline'>
</span>                        <span class='xk'>await</span> <span class='xv'>outboundCounnections</span>.<span class='xv'>remove</span>(<span class='xv'>name</span>: <span class='xv'>connection</span>.<span class='xv'>name</span>)<span class='newline'>
</span>                        <span class='xv'>connection</span>.<span class='xv'>outbound</span>.<a class='xv' href='https://swiftinit.org/docs/swift-async-algorithms/asyncalgorithms/asyncchannel.finish' target='_blank' rel='external'>finish</a>()<span class='newline'>
</span>                    }<span class='newline'>
</span>                }<span class='newline'>
</span>                <span class='xv'>group</span>.<a class='xv' href='https://swiftinit.org/docs/swift/_concurrency/discardingtaskgroup.cancelall' target='_blank' rel='external'>cancelAll</a>()<span class='newline'>
</span>            }<span class='newline'>
</span>        } <span class='xv'>onGracefulShutdown</span>: {<span class='newline'>
</span>            <span class='xv'>connectionContinuation</span>.<a class='xv' href='https://swiftinit.org/docs/swift/_concurrency/asyncstream/continuation.finish' target='_blank' rel='external'>finish</a>()<span class='newline'>
</span>        }<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/websockets.swift#L10' target='_blank' class='source github'><span class='file'>websockets.swift</span>:<span class='line'>10</span></a><ol><li><p>The <code>run</code> function iterates through the <code>connectionStream</code> asynchronously to handle incoming connections and messages.</p></li><li><p>For each connection, a task is added to the group to manage the connection and broadcast the “joined” message.</p></li><li><p>The task listens for incoming messages, processing text messages to broadcast to all connections.</p></li><li><p>Each received text message is broadcast to all outbound connections by calling <code>send</code>.</p></li><li><p>Upon connection termination, the connection is removed, a “left” message is broadcast, and the outbound stream is finished.</p></li></ol><p>Make sure the <a href='https://theswiftdev.com/custom-working-directory-in-xcode/' target='_blank' rel='external nofollow noopener ugc'>custom working directory</a> is set to the root folder before starting the app. Client communication with the WebSocket server can be established using the <code>ws://localhost:8080/chat</code> endpoint.</p><p>Execute the app and open a web browser to navigate to the <a href='https://websocketman.com/' target='_blank' rel='external nofollow noopener ugc'>WebSocket Tester Tool</a> website. To initiate a chat connection, input the following URL into the designated field:</p><pre class='snippet'><code><span class='newline'></span>ws://localhost:8080/chat?username=Tib</code></pre><p>The <code>username</code> parameter can be modified as needed. Press the <em>Connect</em> button to add a new user to the chat room. Upon connection, messages can be sent as the user by entering a custom message and clicking the <em>Send Message</em> button. Multiple windows of the WebSocket Tester Tool can be opened to add additional users.</p><h2 id='Conclusion'><a href='#Conclusion'>Conclusion</a></h2><p>This article demonstrated how to use WebSockets with the Hummingbird framework to build a real-time chat application in Swift. For a similar guide on the Vapor web framework, check out <a href='https://theswiftdev.com/websockets-for-beginners-using-vapor-4-and-vanilla-javascript/' target='_blank' rel='external nofollow noopener ugc'>this article</a>. Hummingbird 2 leverages modern Swift concurrency features for handling WebSocket connections, offering a significant advantage over other frameworks. For more information on Swift concurrency, dive into our additional articles about <a href='https://swiftonserver.com/getting-started-with-structured-concurrency-in-swift/' target='_blank' rel='external nofollow noopener ugc'>structured concurrency</a>.</p></section><div style='display: none;' id='swiftinit-tooltips'><a href='/hist/swift-on-server.articles:main/articles/advanced-async-sequences'><p><code>AsyncSequence</code>s are very prevalent in Server-Side Swift, and are becoming more prominent in macOS and iOS apps as well.</p></a><a href='/docs/swift/_concurrency/taskgroup'><pre><code><span class='xa'>@frozen</span> <span class='xk'>struct</span> <span class='xv'>TaskGroup</span>&lt;<span class='xu'>ChildTaskResult</span>&gt; <span class='xk'>where</span> <span class='xt'>ChildTaskResult</span> : <span class='xt'>Sendable</span></code></pre><p>A group that contains dynamically created child tasks.</p></a><a href='/docs/swift/_concurrency/asyncsequence'><pre><code><span class='xk'>protocol</span> <span class='xv'>AsyncSequence</span>&lt;<span class='xv'>Element</span>, <span class='xv'>Failure</span>&gt;</code></pre><p>A type that provides asynchronous, sequential, iterated access to its elements.</p></a><a href='/docs/swift-argument-parser/argumentparser'><pre><code><span class='xk'>import</span> <span class='xv'>ArgumentParser</span></code></pre><p>Straightforward, type-safe argument parsing for Swift.</p></a><a href='/docs/swift/swift/string'><pre><code><span class='xa'>@frozen</span> <span class='xk'>struct</span> <span class='xv'>String</span></code></pre><p>A Unicode string value that is a collection of characters.</p></a><a href='/docs/swift/swift/int'><pre><code><span class='xa'>@frozen</span> <span class='xk'>struct</span> <span class='xv'>Int</span></code></pre><p>A signed integer value type.</p></a><a href='/docs/swift-argument-parser/argumentparser/asyncparsablecommand'><pre><code><span class='xk'>protocol</span> <span class='xv'>AsyncParsableCommand</span> : <span class='xt'>ParsableCommand</span></code></pre><p>A type that can be executed asynchronously, as part of a nested tree of commands.</p></a><a href='/docs/swift-argument-parser/argumentparser/namespecification.shortandlong'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>shortAndLong</span>: <span class='xt'>NameSpecification</span> { <span class='xk'>get</span> }</code></pre><p>Combine the <code>.short</code> and <code>.long</code> specifications to allow both long and short labels.</p></a><a href='/docs/hummingbird/hummingbird/applicationprotocol.runservice(gracefulshutdownsignals:)'><pre><code><span class='xk'>func</span> <span class='xv'>runService</span>(<span class='xi'></span><span class='xv'>gracefulShutdownSignals</span>: [<span class='xt'>UnixSignal</span>] = [.<span class='xv'>sigterm</span>, .<span class='xv'>sigint</span>]<wbr>) <span class='xk'>async</span> <span class='xk'>throws</span></code></pre><p>Helper function that runs application inside a ServiceGroup which will gracefully shutdown on signals SIGINT, SIGTERM</p></a><a href='/docs/hummingbird/hummingbird/applicationprotocol'><pre><code><span class='xk'>protocol</span> <span class='xv'>ApplicationProtocol</span> : <span class='xt'>Service</span></code></pre><p>Protocol for an Application. Brings together all the components of Hummingbird together</p></a><a href='/docs/swift-log/logging/logger'><pre><code><span class='xk'>struct</span> <span class='xv'>Logger</span></code></pre><p>A <code>Logger</code> is the central type in <code>SwiftLog</code>. Its central function is to emit log messages using one of the methods corresponding to a log level.</p></a><a href='/docs/swift-log/logging/logger.loglevel'><pre><code><span class='xk'>var</span> <span class='xv'>logLevel</span>: <span class='xt'>Logger</span>.<span class='xt'>Level</span> { <span class='xk'>get</span> <span class='xk'>set</span> }</code></pre><p>Get or set the log level configured for this <code>Logger</code>.</p></a><a href='/docs/swift-log/logging/logger/level.trace'><pre><code><span class='xk'>case</span> <span class='xv'>trace</span></code></pre><p>Appropriate for messages that contain information normally of use only when tracing the execution of a program.</p></a><a href='/docs/hummingbird/hummingbird/router'><pre><code><span class='xk'>final</span> <span class='xk'>class</span> <span class='xv'>Router</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Create rules for routing requests and then create <code>Responder</code> that will follow these rules.</p></a><a href='/docs/hummingbird/hummingbird/router.middlewares'><pre><code><span class='xk'>let</span> <span class='xv'>middlewares</span>: <span class='xt'>MiddlewareGroup</span>&lt;<span class='xt'>Context</span>&gt;</code></pre></a><a href='/docs/hummingbird/hummingbird/middlewaregroup.add(_:)'><pre><code><span class='xa'>@discardableResult</span> <span class='xk'>func</span> <span class='xv'>add</span>(<span class='xi'></span>_ <span class='xb'>middleware</span>: <span class='xk'>any</span> <span class='xt'>MiddlewareProtocol</span>&lt;<span class='xt'>Request</span>, <span class='xt'>Response</span>, <span class='xt'>Context</span>&gt;<wbr>) -&gt; <span class='xk'>Self</span></code></pre><p>Add middleware to group</p></a><a href='/docs/hummingbird/hummingbird/logrequestsmiddleware'><pre><code><span class='xk'>struct</span> <span class='xv'>LogRequestsMiddleware</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Middleware outputting to log for every call to server</p></a><a href='/docs/swift-log/logging/logger/level.debug'><pre><code><span class='xk'>case</span> <span class='xv'>debug</span></code></pre><p>Appropriate for messages that contain information normally of use only when debugging a program.</p></a><a href='/docs/hummingbird/hummingbird/filemiddleware'><pre><code><span class='xk'>struct</span> <span class='xv'>FileMiddleware</span>&lt;<span class='xu'>Context</span>, <span class='xu'>Provider</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span>, <span class='xt'>Provider</span> : <span class='xt'>FileProvider</span>, <span class='xt'>Provider</span>.<span class='xt'>FileAttributes</span> : <span class='xt'>FileMiddlewareFileAttributes</span></code></pre><p>Middleware for serving static files.</p></a><a href='/docs/hummingbird-websocket/hummingbirdwebsocket/basicwebsocketrequestcontext'><pre><code><span class='xk'>struct</span> <span class='xv'>BasicWebSocketRequestContext</span></code></pre><p>Default implementation of a request context that supports WebSockets</p></a><a href='/docs/hummingbird-websocket/hummingbird/routermethods.ws(_:shouldupgrade:onupgrade:)'><pre><code><span class='xa'>@discardableResult</span> <span class='xk'>func</span> <span class='xv'>ws</span>(<span class='xi'></span>_ <span class='xb'>path</span>: <span class='xt'>RouterPath</span> = <span class='xs'>""</span>, <span class='xi'></span><span class='xv'>shouldUpgrade</span>: <span class='xa'>@escaping</span> (<span class='xt'>Request</span>, <span class='xt'>Context</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>RouterShouldUpgrade</span> = { _, _ <span class='xk'>in</span> .<span class='xv'>upgrade</span>([:]) }, <span class='xi'></span><span class='xv'>onUpgrade</span> <span class='xb'>handler</span>: <span class='xa'>@escaping</span> <span class='xt'>WebSocketDataHandler</span>&lt;<span class='xt'>WebSocketRouterContext</span>&lt;<span class='xt'>Context</span>&gt;&gt;<wbr>) -&gt; <span class='xk'>Self</span> <span class='xk'>where</span> <span class='xk'>Self</span>.<span class='xt'>Context</span> : <span class='xt'>WebSocketRequestContext</span></code></pre><p>Add path to router that support WebSocket upgrade</p></a><a href='/docs/hummingbird/hummingbird/routerpath.init(stringliteral:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>stringLiteral</span> <span class='xb'>value</span>: <span class='xt'>String</span><wbr>)</code></pre><p>Initialize RouterPath from String literal</p></a><a href='/docs/hummingbird/hummingbirdcore/request.uri'><pre><code><span class='xk'>let</span> <span class='xv'>uri</span>: <span class='xt'>URI</span></code></pre><p>URI path</p></a><a href='/docs/hummingbird/hummingbirdcore/uri.queryparameters'><pre><code><span class='xk'>var</span> <span class='xv'>queryParameters</span>: <span class='xt'>FlatDictionary</span>&lt;<span class='xt'>Substring</span>, <span class='xt'>Substring</span>&gt; { <span class='xk'>get</span> }</code></pre><p>URL query parameter map</p></a><a href='/docs/hummingbird/hummingbirdcore/flatdictionary.subscript(_:)?hash=2EYQB'><pre><code><span class='xk'>subscript</span>(<span class='xi'></span><span class='xv'>key</span>: <span class='xt'>Key</span><wbr>) -&gt; <span class='xt'>Value</span>? { <span class='xk'>get</span> <span class='xk'>set</span> }</code></pre><p>Access the value associated with a given key for reading and writing</p></a><a href='/docs/swift/swift/substring.init(stringliteral:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>stringLiteral</span> <span class='xb'>value</span>: <span class='xt'>String</span><wbr>)</code></pre></a><a href='/docs/swift/swift/optional.!=(_:_:)?hash=38B38'><pre><code><span class='xk'>static</span> <span class='xk'>func</span> <span class='xo'>!=</span> (<span class='xi'></span><span class='xv'>lhs</span>: <span class='xk'>borrowing</span> <span class='xt'>Wrapped</span>?, <span class='xi'></span><span class='xv'>rhs</span>: <span class='xt'>_OptionalNilComparisonType</span><wbr>) -&gt; <span class='xt'>Bool</span></code></pre><p>Returns a Boolean value indicating whether the left-hand-side argument is not <code>nil</code>.</p></a><a href='/docs/hummingbird-websocket/hummingbirdwebsocket/routershouldupgrade.dontupgrade'><pre><code><span class='xk'>case</span> <span class='xv'>dontUpgrade</span></code></pre></a><a href='/docs/hummingbird-websocket/hummingbirdwebsocket/routershouldupgrade.upgrade(_:)'><pre><code><span class='xk'>case</span> <span class='xv'>upgrade</span>(_: <span class='xt'>HTTPFields</span> = [:])</code></pre></a><a href='/docs/hummingbird-websocket/hummingbirdwebsocket/websocketroutercontext.request'><pre><code><span class='xk'>let</span> <span class='xv'>request</span>: <span class='xt'>Request</span></code></pre><p>HTTP request that initiated the WebSocket connection</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter.write(_:)'><pre><code><span class='xk'>func</span> <span class='xv'>write</span>(<span class='xi'></span>_ <span class='xb'>frame</span>: <span class='xt'>OutboundFrame</span><wbr>) <span class='xk'>async</span> <span class='xk'>throws</span></code></pre><p>Write WebSocket frame</p></a><a href='/docs/hummingbird/hummingbird/application'><pre><code><span class='xk'>struct</span> <span class='xv'>Application</span>&lt;<span class='xu'>Responder</span>&gt; <span class='xk'>where</span> <span class='xt'>Responder</span> : <span class='xt'>HTTPResponder</span>, <span class='xt'>Responder</span>.<span class='xt'>Context</span> : <span class='xt'>InitializableFromSource</span>, <span class='xt'>Responder</span>.<span class='xt'>Context</span>.<span class='xt'>Source</span> <span class='xo'>==</span> <span class='xt'>ApplicationRequestContextSource</span></code></pre><p>Application class. Brings together all the components of Hummingbird together</p></a><a href='/docs/hummingbird-websocket/hummingbirdcore/httpserverbuilder.http1websocketupgrade(websocketrouter:configuration:additionalchannelhandlers:)'><pre><code><span class='xk'>static</span> <span class='xk'>func</span> <span class='xv'>http1WebSocketUpgrade</span>&lt;<span class='xu'>WSResponderBuilder</span>&gt;(<span class='xi'></span><span class='xv'>webSocketRouter</span>: <span class='xt'>WSResponderBuilder</span>, <span class='xi'></span><span class='xv'>configuration</span>: <span class='xt'>WebSocketServerConfiguration</span> = .<span class='xk'>init</span>(), <span class='xi'></span><span class='xv'>additionalChannelHandlers</span>: <span class='xa'>@autoclosure</span> <span class='xa'>@escaping</span> () -&gt; [<span class='xk'>any</span> <span class='xt'>RemovableChannelHandler</span>] = []<wbr>) -&gt; <span class='xt'>HTTPServerBuilder</span> <span class='xk'>where</span> <span class='xt'>WSResponderBuilder</span> : <span class='xt'>HTTPResponderBuilder</span>, <span class='xt'>WSResponderBuilder</span>.<span class='xt'>Responder</span>.<span class='xt'>Context</span> : <span class='xt'>WebSocketRequestContext</span></code></pre><p>HTTP1 channel builder supporting a websocket upgrade</p></a><a href='/docs/hummingbird-websocket/hummingbirdwebsocket/websocketserverconfiguration.init(maxframesize:extensions:autoping:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>maxFrameSize</span>: <span class='xt'>Int</span> = (<span class='xn'>1</span> <span class='xo'>&lt;&lt;</span> <span class='xn'>14</span>), <span class='xi'></span><span class='xv'>extensions</span>: [<span class='xt'>WebSocketExtensionFactory</span>] = [], <span class='xi'></span><span class='xv'>autoPing</span>: <span class='xt'>AutoPingSetup</span> = .<span class='xv'>enabled</span>(<span class='xv'>timePeriod</span>: .<span class='xv'>seconds</span>(<span class='xn'>30</span>))<wbr>)</code></pre><p>Initialize WebSocketClient configuration</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketextensionfactory.permessagedeflate(maxwindow:nocontexttakeover:maxdecompressedframesize:minframesizetocompress:)'><pre><code><span class='xk'>static</span> <span class='xk'>func</span> <span class='xv'>perMessageDeflate</span>(<span class='xi'></span><span class='xv'>maxWindow</span>: <span class='xt'>Int</span>? = <span class='xk'>nil</span>, <span class='xi'></span><span class='xv'>noContextTakeover</span>: <span class='xt'>Bool</span> = <span class='xk'>false</span>, <span class='xi'></span><span class='xv'>maxDecompressedFrameSize</span>: <span class='xt'>Int</span> = <span class='xn'>1</span> <span class='xo'>&lt;&lt;</span> <span class='xn'>14</span>, <span class='xi'></span><span class='xv'>minFrameSizeToCompress</span>: <span class='xt'>Int</span> = <span class='xn'>256</span><wbr>) -&gt; <span class='xt'>WebSocketExtensionFactory</span></code></pre><p>permessage-deflate websocket extension</p></a><a href='/docs/hummingbird/hummingbird/applicationconfiguration.init(address:servername:backlog:reuseaddress:availableconnectionsdelegate:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>address</span>: <span class='xt'>BindAddress</span> = .<span class='xv'>hostname</span>(), <span class='xi'></span><span class='xv'>serverName</span>: <span class='xt'>String</span>? = <span class='xk'>nil</span>, <span class='xi'></span><span class='xv'>backlog</span>: <span class='xt'>Int</span> = <span class='xn'>256</span>, <span class='xi'></span><span class='xv'>reuseAddress</span>: <span class='xt'>Bool</span> = <span class='xk'>true</span>, <span class='xi'></span><span class='xv'>availableConnectionsDelegate</span>: <span class='xt'>AvailableConnectionsDelegate</span>? = <span class='xk'>nil</span><wbr>)</code></pre><p>Initialize Application configuration</p></a><a href='/docs/hummingbird/hummingbirdcore/bindaddress.hostname(_:port:)'><pre><code><span class='xk'>static</span> <span class='xk'>func</span> <span class='xv'>hostname</span>(<span class='xi'></span>_ <span class='xb'>host</span>: <span class='xt'>String</span> = <span class='xs'>"127.0.0.1"</span>, <span class='xi'></span><span class='xv'>port</span>: <span class='xt'>Int</span> = <span class='xn'>8080</span><wbr>) -&gt; <span class='xt'>BindAddress</span></code></pre></a><a href='/docs/hummingbird/hummingbird/application.addservices(_:)'><pre><code><span class='xk'>mutating</span> <span class='xk'>func</span> <span class='xv'>addServices</span>(<span class='xi'></span>_ <span class='xb'>services</span>: <span class='xk'>any</span> <span class='xt'>Service</span>...<wbr>)</code></pre><p>Add service to be managed by application ServiceGroup</p></a><a href='/docs/swift-service-lifecycle/servicelifecycle/service'><pre><code><span class='xk'>protocol</span> <span class='xv'>Service</span> : <span class='xt'>Sendable</span></code></pre><p>This is the basic protocol that a service has to implement.</p></a><a href='/docs/swift-async-algorithms/asyncalgorithms/asyncchannel'><pre><code><span class='xk'>final</span> <span class='xk'>class</span> <span class='xv'>AsyncChannel</span>&lt;<span class='xu'>Element</span>&gt; <span class='xk'>where</span> <span class='xt'>Element</span> : <span class='xt'>Sendable</span></code></pre><p>A channel for sending elements from one task to another with back pressure.</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter'><pre><code><span class='xk'>struct</span> <span class='xv'>WebSocketOutboundWriter</span></code></pre><p>Outbound websocket writer</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter/outboundframe'><pre><code><span class='xk'>enum</span> <span class='xv'>OutboundFrame</span></code></pre><p>WebSocket frame that can be written</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketinboundstream'><pre><code><span class='xk'>final</span> <span class='xk'>class</span> <span class='xv'>WebSocketInboundStream</span></code></pre><p>Inbound WebSocket data frame AsyncSequence</p></a><a href='/docs/swift/swift/dictionary.values'><pre><code><span class='xk'>var</span> <span class='xv'>values</span>: <span class='xt'>Dictionary</span>&lt;<span class='xt'>Key</span>, <span class='xt'>Value</span>&gt;.<span class='xt'>Values</span> { <span class='xk'>get</span> <span class='xk'>set</span> }</code></pre><p>A collection containing just the values of the dictionary.</p></a><a href='/docs/swift-async-algorithms/asyncalgorithms/asyncchannel.send(_:)'><pre><code><span class='xk'>func</span> <span class='xv'>send</span>(<span class='xi'></span>_ <span class='xb'>element</span>: <span class='xt'>Element</span><wbr>) <span class='xk'>async</span></code></pre><p>Sends an element to an awaiting iteration. This function will resume when the next call to <code>next()</code> is made or when a call to <code>finish()</code> is made from another task. If the channel is already finished then this returns immediately. If the task is cancelled, this function will resume without sending the element. Other sending operations from other tasks will remain active.</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketoutboundwriter/outboundframe.text(_:)'><pre><code><span class='xk'>case</span> <span class='xv'>text</span>(<span class='xt'>String</span>)</code></pre><p>Text frame</p></a><a href='/docs/swift/swift/dictionary.subscript(_:)?hash=8RFQL'><pre><code><span class='xk'>subscript</span>(<span class='xi'></span><span class='xv'>key</span>: <span class='xt'>Key</span><wbr>) -&gt; <span class='xt'>Value</span>? { <span class='xk'>get</span> <span class='xk'>set</span> }</code></pre><p>Accesses the value associated with the given key for reading and writing.</p></a><a href='/docs/swift/swift/string.init(stringinterpolation:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>stringInterpolation</span>: <span class='xt'>DefaultStringInterpolation</span><wbr>)</code></pre><p>Creates a new instance from an interpolated string literal.</p></a><a href='/docs/swift/foundation/outputstream'><pre><code><span class='xk'>class</span> <span class='xv'>OutputStream</span></code></pre></a><a href='/docs/swift/_concurrency/asyncstream/continuation.yield(_:)'><pre><code><span class='xa'>@discardableResult</span> <span class='xk'>func</span> <span class='xv'>yield</span>(<span class='xi'></span>_ <span class='xb'>value</span>: <span class='xt'>sending</span> <wbr><span class='xv'>Element</span>) -&gt; <span class='xt'>AsyncStream</span>&lt;<span class='xt'>Element</span>&gt;.<span class='xt'>Continuation</span>.<span class='xt'>YieldResult</span></code></pre><p>Resume the task awaiting the next iteration point by having it return normally from its suspension point with a given element.</p></a><a href='/docs/swift/_concurrency/asyncstream'><pre><code><span class='xk'>struct</span> <span class='xv'>AsyncStream</span>&lt;<span class='xu'>Element</span>&gt;</code></pre><p>An asynchronous sequence generated from a closure that calls a continuation to produce new elements.</p></a><a href='/docs/swift/_concurrency/asyncstream/continuation'><pre><code><span class='xk'>struct</span> <span class='xv'>Continuation</span></code></pre><p>A mechanism to interface between synchronous code and an asynchronous stream.</p></a><a href='/docs/swift/_concurrency/asyncstream.makestream(of:bufferingpolicy:)'><pre><code><span class='xa'>@backDeployed</span>(<span class='xk'>before</span>: <span class='xk'>macOS</span> <span class='xn'>14</span>.<span class='xn'>0</span>, <span class='xk'>iOS</span> <span class='xn'>17</span>.<span class='xn'>0</span>, <span class='xk'>watchOS</span> <span class='xn'>10</span>.<span class='xn'>0</span>, <span class='xk'>tvOS</span> <span class='xn'>17</span>.<span class='xn'>0</span>)
<span class='xk'>static</span> <span class='xk'>func</span> <span class='xv'>makeStream</span>(<span class='xi'></span><span class='xv'>of</span> <span class='xb'>elementType</span>: <span class='xt'>Element</span>.<span class='xk'>Type</span> = <span class='xv'>Element</span>.<span class='xk'>self</span>, <span class='xi'></span><span class='xv'>bufferingPolicy</span> <span class='xb'>limit</span>: <span class='xt'>AsyncStream</span>&lt;<span class='xt'>Element</span>&gt;.<span class='xt'>Continuation</span>.<span class='xt'>BufferingPolicy</span> = .<span class='xv'>unbounded</span><wbr>) -&gt; (<span class='xv'>stream</span>: <span class='xt'>AsyncStream</span>&lt;<span class='xt'>Element</span>&gt;, <span class='xv'>continuation</span>: <span class='xt'>AsyncStream</span>&lt;<span class='xt'>Element</span>&gt;.<span class='xt'>Continuation</span>)</code></pre><p>Initializes a new <code>AsyncStream</code> and an <code>Continuation</code>.</p></a><a href='/docs/swift-service-lifecycle/servicelifecycle.withgracefulshutdownhandler(operation:ongracefulshutdown:)'><pre><code><span class='xk'>func</span> <span class='xv'>withGracefulShutdownHandler</span>&lt;<span class='xu'>T</span>&gt;(<span class='xi'></span><span class='xv'>operation</span>: () <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>T</span>, <span class='xi'></span><span class='xv'>onGracefulShutdown</span> <span class='xb'>handler</span>: <span class='xa'>@escaping</span> () -&gt; <span class='xt'>Void</span><wbr>) <span class='xk'>async</span> <span class='xk'>rethrows</span> -&gt; <span class='xt'>T</span></code></pre><p>Execute an operation with a graceful shutdown handler that’s immediately invoked if the current task is shutting down gracefully.</p></a><a href='/docs/swift/_concurrency.withdiscardingtaskgroup(returning:isolation:body:)'><pre><code><span class='xa'>@backDeployed</span>(<span class='xk'>before</span>: <span class='xk'>macOS</span> <span class='xn'>15</span>.<span class='xn'>0</span>, <span class='xk'>iOS</span> <span class='xn'>18</span>.<span class='xn'>0</span>, <span class='xk'>watchOS</span> <span class='xn'>11</span>.<span class='xn'>0</span>, <span class='xk'>tvOS</span> <span class='xn'>18</span>.<span class='xn'>0</span>, <span class='xk'>visionOS</span> <span class='xn'>2</span>.<span class='xn'>0</span>)
<span class='xk'>func</span> <span class='xv'>withDiscardingTaskGroup</span>&lt;<span class='xu'>GroupResult</span>&gt;(<span class='xi'></span><span class='xv'>returning</span> <span class='xb'>returnType</span>: <span class='xt'>GroupResult</span>.<span class='xk'>Type</span> = <span class='xv'>GroupResult</span>.<span class='xk'>self</span>, <span class='xi'></span><span class='xv'>isolation</span>: <span class='xk'>isolated</span> (<span class='xk'>any</span> <span class='xt'>Actor</span>)? = #<span class='xv'>isolation</span>, <span class='xi'></span><span class='xv'>body</span>: (<span class='xk'>inout</span> <span class='xt'>DiscardingTaskGroup</span>) <span class='xk'>async</span> -&gt; <span class='xt'>GroupResult</span><wbr>) <span class='xk'>async</span> -&gt; <span class='xt'>GroupResult</span></code></pre><p>Starts a new scope that can contain a dynamic number of child tasks.</p></a><a href='/docs/swift/_concurrency/discardingtaskgroup.addtask(operation:)'><pre><code><span class='xk'>mutating</span> <span class='xk'>func</span> <span class='xv'>addTask</span>(<span class='xi'></span><span class='xv'>operation</span>: <span class='xt'>sending</span> <wbr><span class='xa'>@</span><span class='xv'>escaping</span> <span class='xa'>@</span><span class='xv'>isolated</span>(<span class='xv'>any</span>) () <span class='xv'>async</span> -&gt; <span class='xv'>Void</span>)</code></pre></a><a href='/docs/swift-log/logging/logger.info(_:metadata:file:function:line:)'><pre><code><span class='xk'>func</span> <span class='xv'>info</span>(<span class='xi'></span>_ <span class='xb'>message</span>: <span class='xa'>@autoclosure</span> () -&gt; <span class='xt'>Logger</span>.<span class='xt'>Message</span>, <span class='xi'></span><span class='xv'>metadata</span>: <span class='xa'>@autoclosure</span> () -&gt; <span class='xt'>Logger</span>.<span class='xt'>Metadata</span>? = <span class='xk'>nil</span>, <span class='xi'></span><span class='xv'>file</span>: <span class='xt'>String</span> = #<span class='xv'>fileID</span>, <span class='xi'></span><span class='xv'>function</span>: <span class='xt'>String</span> = #<span class='xv'>function</span>, <span class='xi'></span><span class='xv'>line</span>: <span class='xt'>UInt</span> = #<span class='xv'>line</span><wbr>)</code></pre><p>Log a message passing with the <code>info</code> log level.</p></a><a href='/docs/swift-log/logging/logger/message.init(stringliteral:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>stringLiteral</span> <span class='xb'>value</span>: <span class='xt'>String</span><wbr>)</code></pre></a><a href='/docs/swift-log/logging/logger/metadatavalue.string(_:)'><pre><code><span class='xk'>case</span> <span class='xv'>string</span>(<span class='xt'>String</span>)</code></pre><p>A metadata value which is a <code>String</code>.</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketinboundstream.messages(maxsize:)'><pre><code><span class='xk'>func</span> <span class='xv'>messages</span>(<span class='xi'></span><span class='xv'>maxSize</span>: <span class='xt'>Int</span><wbr>) -&gt; <span class='xt'>WebSocketInboundMessageStream</span></code></pre><p>Convert to AsyncSequence of WebSocket messages</p></a><a href='/docs/hummingbird-websocket/hummingbirdwscore/websocketmessage.text(_:)'><pre><code><span class='xk'>case</span> <span class='xv'>text</span>(<span class='xt'>String</span>)</code></pre></a><a href='/docs/swift-log/logging/logger.debug(_:metadata:file:function:line:)'><pre><code><span class='xk'>func</span> <span class='xv'>debug</span>(<span class='xi'></span>_ <span class='xb'>message</span>: <span class='xa'>@autoclosure</span> () -&gt; <span class='xt'>Logger</span>.<span class='xt'>Message</span>, <span class='xi'></span><span class='xv'>metadata</span>: <span class='xa'>@autoclosure</span> () -&gt; <span class='xt'>Logger</span>.<span class='xt'>Metadata</span>? = <span class='xk'>nil</span>, <span class='xi'></span><span class='xv'>file</span>: <span class='xt'>String</span> = #<span class='xv'>fileID</span>, <span class='xi'></span><span class='xv'>function</span>: <span class='xt'>String</span> = #<span class='xv'>function</span>, <span class='xi'></span><span class='xv'>line</span>: <span class='xt'>UInt</span> = #<span class='xv'>line</span><wbr>)</code></pre><p>Log a message passing with the <code>debug</code> log level.</p></a><a href='/docs/swift-async-algorithms/asyncalgorithms/asyncchannel.finish'><pre><code><span class='xk'>func</span> <span class='xv'>finish</span>(<wbr>)</code></pre><p>Immediately resumes all the suspended operations. All subsequent calls to <code>next(_:)</code> will resume immediately.</p></a><a href='/docs/swift/_concurrency/discardingtaskgroup.cancelall'><pre><code><span class='xk'>func</span> <span class='xv'>cancelAll</span>(<wbr>)</code></pre><p>Cancel all of the remaining tasks in the group.</p></a><a href='/docs/swift/_concurrency/asyncstream/continuation.finish'><pre><code><span class='xk'>func</span> <span class='xv'>finish</span>(<wbr>)</code></pre><p>Resume the task awaiting the next iteration point by having it return nil, which signifies the end of the iteration.</p></a></div>
                    
                </section>
    
                <footer>
                    <br>
                    <time datetime=""></time>
    
                    
                    <div class="author-list">
                        <a href="https://swiftonserver.com/authors/tibor-bodecs/">
                        <img class="small rounded" src="/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                        <span class="name">Tibor Bödecs</span>
                        </a>
                    </div>
                    <div class="tag-list">
                        <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
                    <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                    </div>
                </footer>
                            
                <section class="group">
                    <h4>Related posts</h4>                
                    <div class="grid grid-221">
                        <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/10/01">2024/10/01</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/using-hummingbird-request-context/" target="">Using Hummingbird&#39;s Request Contexts</a></h2>
                            <p>Learn about request contexts in Hummingbird and how to use them.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/09/30">2024/09/30</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/how-to-build-a-proxy-server-with-hummingbird/" target="">How to Build a Proxy Server with Hummingbird</a></h2>
                            <p>Learn how to leverage the flexibility and performance of Hummingbird to build a proxy server.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/09/24">2024/09/24</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/getting-started-with-hummingbird/" target="">Getting Started with Hummingbird</a></h2>
                            <p>Learn how to get started with Hummingbird 2, the modern Swift Web Framework.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/08/29">2024/08/29</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/working-with-udp-in-swiftnio/" target="">Working with UDP in SwiftNIO</a></h2>
                            <p>Create UDP servers and clients using SwiftNIO and structured concurrency</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/03/05">2024/03/05</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/using-openapi-with-hummingbird/" target="">Using OpenAPI Generator with Hummingbird</a></h2>
                            <p>Learn how to use OpenAPI Generator to create Swift APIs with Hummingbird.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                            </div>
                            <div class="meta">
                                <time datetime="2024/02/27">2024/02/27</time>
                                
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/whats-new-in-hummingbird-2/" target="">What&#39;s new in Hummingbird 2?</a></h2>
                            <p>Discover Hummingbird 2: a Swift-based HTTP server framework, with modern concurrency and customizable request contexts.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                            </div>
                        </div>
                    </div>
                </section>
    
            </article>
        </div>
        
        <div>
            <div class="support">
                <a href="https://www.serversideswift.info/videos/" target="_blank">
                    <img src="https://swiftonserver.com//images/logos/serversideswift.png" alt="Server-Side Swift Conference logo">
                </a>
                <h4>
                    <a href="https://www.serversideswift.info/videos/" target="_blank">ServerSide.swift</a>
                </h4>
                <p>
                    The talk recordings are live!<br />
                    See you next year!
                </p>
                <a class="cta" href="https://www.serversideswift.info/videos/" target="_blank">Watch the Videos</a>
            </div>
            
            <aside id="toc">
                <h4>On this page</h4>
                <ul>
                    <li class="first-level">
                        <a href="#What%20is%20a%20WebSocket?">What is a WebSocket?</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#WebSockets%20vs%20Alternatives">WebSockets vs Alternatives</a>
                        <ul>
                            <li><a href="#Long%20polling%20(HTTP%20polling)">Long polling (HTTP polling)</a></li>
                <li><a href="#HTTP%20streaming">HTTP streaming</a></li>
                <li><a href="#SSE%20-%20Server-sent%20events">SSE - Server-sent events</a></li>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Why%20to%20use%20WebSockets?">Why to use WebSockets?</a>
                        <ul>
                            <li><a href="#Security%20(WSS)">Security (WSS)</a></li>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Building%20a%20real-time%20WebSocket%20chat">Building a real-time WebSocket chat</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Conclusion">Conclusion</a>
                        <ul>
                        </ul>
                    </li>
                </ul>
            </aside>
    
        </div>
    </div>
    
    </main>

    <footer id="site-footer">
        <div class="grid grid-421">
    
            <figure>
                <picture>
                    <source
                        srcset="https://swiftonserver.com/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        id="logo-image"
                        src="https://swiftonserver.com/images/logos/logo.png"
                        alt="Logo of Swift on server"
                        title="Swift on server"
                    >
                </picture>
            </figure>
            
            <div>
                <span style="display: block; height: 32px;">&nbsp;</span>
                <h4>Swift on server</h4>
                <p><small><a href="https://swiftonserver.com/" target="_blank">swiftonserver.com</a></small></p>
                <ul>
                    <li><a href="https://github.com/swift-on-server/" target="_blank">GitHub</a></li>
                    <li><a href="https://mastodon.social/@swiftonserver/" target="_blank">Mastodon</a></li>
                    <li><a href="https://swiftonserver.com/rss.xml" target="_blank">RSS</a></li>
                    <li><a href="https://swiftonserver.com/sitemap.xml" target="_blank">Sitemap</a></li>
                </ul>
            </div>
            
            <div>
                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                <img class="small rounded" src="https://swiftonserver.com/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                </a>
                <h4><a href="https://swiftonserver.com/authors/joannis-orlandos/">Joannis Orlandos</a></h4>
                <p><small><a href="https://unbeatable.software/" target="_blank">Unbeatable Software B.V.</a></small></p>
                <ul>
                    <li><a href="mailto:hello@unbeatable.software" target="_blank">Email</a></li>
                    <li><a href="https://github.com/Joannis" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/JoannisOrlandos" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@joannis@fosstodon.org" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
            <div>
                <a href="https://swiftonserver.com/authors/tibor-bodecs/">
                <img class="small rounded" src="https://swiftonserver.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                </a>
                <h4><a href="https://swiftonserver.com/authors/tibor-bodecs/">Tibor Bödecs</a></h4>
                <p><small><a href="https://binarybirds.com/" target="_blank">Binary Birds Kft.</a></small></p>
                <ul>
                    <li><a href="mailto:mail.tib@gmail.com" target="_blank">Email</a></li>
                    <li><a href="https://github.com/tib/" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/tiborbodecs" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@tiborbodecs" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
        </div>
        
        <section class="grid grid-221">
            <small>Swift on server &copy; 2022 - 2024</small>
            <small>This site was generated using <a href="https://swift.org/" target="_blank">Swift</a> & <a href="https://github.com/binarybirds/toucan" target="_blank">Toucan</a>.</small>
        </section>
    </footer>

    </div>

    

    <script type="text/javascript" src="https://swiftonserver.com//js/tooltips.js" async=""></script>
</body>
</html>
