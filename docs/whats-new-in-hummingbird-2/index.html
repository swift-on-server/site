<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://swiftonserver.com/whats-new-in-hummingbird-2/">
    <link rel="prev" href="https://swiftonserver.com/websockets-tutorial-using-swift-and-hummingbird/">
    <link rel="next" href="https://swiftonserver.com/working-with-udp-in-swiftnio/">

    <title>What&#39;s new in Hummingbird 2? - Swift on server</title>
    <meta name="description" content="Discover Hummingbird 2: a Swift-based HTTP server framework, with modern concurrency and customizable request contexts.">

    <meta property="og:url" content="https://swiftonserver.com/whats-new-in-hummingbird-2/">
    <meta property="og:title" content="What&#39;s new in Hummingbird 2? - Swift on server">
    <meta property="og:description" content="Discover Hummingbird 2: a Swift-based HTTP server framework, with modern concurrency and customizable request contexts.">
    <meta property="og:image" content="/assets/whats-new-in-hummingbird-2/cover.jpg" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="What&#39;s new in Hummingbird 2? - Swift on server">
    <meta name="twitter:description" content="Discover Hummingbird 2: a Swift-based HTTP server framework, with modern concurrency and customizable request contexts.">
    <meta name="twitter:image" content="/assets/whats-new-in-hummingbird-2/cover.jpg">

    <link rel="stylesheet" href="/css/modern-normalize.css">
    <link rel="stylesheet" href="/css/modern-base.css">
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/grid.css">
    <link rel="stylesheet" href="/css/navigation.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/style.css">

    

    <link rel="shortcut icon" href="/images/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/images/icons/icon-320.png" type="image/png">
    
    <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon-180x180.png">

    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
        media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
        media="(prefers-color-scheme: dark)"
    >

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
          const container = document.querySelector("div#swiftinit-tooltips");
          if (container !== null) {
              container.querySelectorAll('pre code').forEach((el) => {
                  el.classList.add('nohighlight');
              });
          }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
          document.querySelectorAll('section pre code:not(.language-swift').forEach((el) => {
              hljs.highlightElement(el);
          });
        });
    </script>

    <script defer data-domain="swiftonserver.com" src="https://plausible.io/js/script.js"></script>

</head>

<body>
    <div id="site-container">

    <header id="navigation">
        <a href="/">
            <figure>
                <picture>
                    <source
                        srcset="/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        src="/images/logos/logo.png"
                        alt="Logo of Swift on server"
                        title="Swift on server"
                    >
                </picture>
            </figure>
        </a>
        <nav>
            <input type="checkbox" id="primary-menu-button" name="menu-button" class="menu-button">
            <label for="primary-menu-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </label>
            <div class="menu-items">
                <a href="/posts/page/1/">Posts</a>
            <a href="/tags/">Tags</a>
            <a href="/authors/">Authors</a>
            <a href="/newsletter/">Newsletter</a>
            </div>
        </nav>
    </header>

    <main id="page-container">
    
    <div class="article-with-toc">
        <div>
            <article class="post">
                <div class="meta">
                    <time datetime="2024/02/27">2024/02/27</time>
                     &middot; <span class="reading-time">14 min read</span>
                    
                </div>
                <section>
                
                <section class='introduction'><h1>What’s new in Hummingbird 2?</h1></section><section class='details literature'><p>Hummingbird is a lightweight, flexible HTTP server framework written in Swift. The work on the second major version started halfway through 2023 and the first alpha version was tagged on the 22th of January, 2024. There are quite a lot of significant changes and under the hood improvements. With 2.0 being released, this is a great opportunity to read up on it!</p><h2 id='Swift%20concurrency'><a href='#Swift%20concurrency'>Swift concurrency</a></h2><p>Hummingbird 2 was built using the modern Swift concurrency APIs. Most of the NIO event loop references are replaced with async / await functions and calls. Structured concurrency is present all around the codebase and the project components, such as <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/request' target='_blank' rel='external'>Request</a></code>, are thread safe thanks to the <code><a href='https://swiftinit.org/docs/swift/swift/sendable' target='_blank' rel='external'>Sendable</a></code> conformance.</p><p>Before the async / await feature adoption, some components had a <code>HBAsync</code> prefix. Those are now removed from the v2 library. For example <code>HBAsyncMiddleware</code> is now <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/middlewareprotocol' target='_blank' rel='external'>MiddlewareProtocol</a></code> or <code>HBAsyncResponder</code> is simply called <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/httpresponder' target='_blank' rel='external'>HTTPResponder</a></code>.</p><p>It is worth to mention that HB2 is prepared for Swift 6, the project also compiles against the experimental <code>StrictConcurrency=complete</code> feature flag.</p><h2 id='Swift%20service%20lifecycle%20v2'><a href='#Swift%20service%20lifecycle%20v2'>Swift service lifecycle v2</a></h2><p>The <a href='https://github.com/swift-server/swift-service-lifecycle' target='_blank' rel='external'>Swift service lifecycle library</a> provides a clean startup and shutdown mechanism for server applications. Hummingbird 2 uses the latest version of the library including support for graceful shutdown even for custom application services. When Hummingbird is signalled by swift-service-lifecycle to gracefully shut down, any currently running requests continue being handled. New connections and requests will not be accepted, and idle connections are shut down. Once everything’s ready, Hummingbird will shut down completely.</p><h2 id='Hummingbird%20core%20and%20foundation'><a href='#Hummingbird%20core%20and%20foundation'>Hummingbird core and foundation</a></h2><p>The <a href='https://github.com/hummingbird-project/hummingbird-core' target='_blank' rel='external'>HummingbirdCore</a> repository is merged into main repository. The <code>HummingbirdFoundation</code> target was also removed and now all the Foundation extensions are part of the main Hummingbird Swift package target. This makes Hummingbird ergonomically closer to Vapor, allowing users to get started more quickly. This decision is backed by the upcoming move to the new swift-foundation library.</p><h2 id='Jobs%20framework%20updates'><a href='#Jobs%20framework%20updates'>Jobs framework updates</a></h2><p>The HummingbirdJobs framework can be used to push work onto a queue, so that is  processed outside of a request. Job handlers were restructured to use <code><a href='https://swiftinit.org/docs/swift/_concurrency/taskgroup' target='_blank' rel='external'>TaskGroup</a></code> and conform to the <code><a href='https://swiftinit.org/docs/swift-service-lifecycle/servicelifecycle/service' target='_blank' rel='external'>Service</a></code> protocol from the Swift service lifecycle framework. A <code>JobQueue</code> can also define it’s own <code>JobID</code> type, which helps when integrating with various database/driver implementations.</p><h2 id='Connection%20pools'><a href='#Connection%20pools'>Connection pools</a></h2><p>The custom connection pool implementation was removed from the framework. Previously, this component offered connection pooling for PostgreSQL. Since <a href='https://github.com/vapor/postgres-nio' target='_blank' rel='external'>PostgresNIO</a> has built-in support, there’s no need for it anymore inside the HB framework.</p><h2 id='HTTP%20improvements'><a href='#HTTP%20improvements'>HTTP improvements</a></h2><p>Hummingbird 2 takes advantage of the brand new <a href='https://github.com/apple/swift-http-types' target='_blank' rel='external'>Swift HTTP Types library</a>. The overall support for HTTP2 and TLS is also improved a lot in the second major version.</p><h2 id='Router%20library'><a href='#Router%20library'>Router library</a></h2><p>Hummingbird 2 features a brand new routing library, based on Swift result builders. This is a standalone project, the old route building mechanism still works, but if you prefer result builders you can try the new method by importing this lib.</p><p>Here’s a little peak into the usage of the new <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdrouter/routerbuilder' target='_blank' rel='external'>RouterBuilder</a></code> object:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>import</span> <span class='xv'>Hummingbird</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>HummingbirdRouter</span><span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>router</span> = <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdrouter/routerbuilder' target='_blank' rel='external'>RouterBuilder</a>(<span class='xv'>context</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdrouter/basicrouterrequestcontext' target='_blank' rel='external'>BasicRouterRequestContext</a>.<span class='xk'>self</span>) {<span class='newline'>
</span>    <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/tracingmiddleware' target='_blank' rel='external'>TracingMiddleware</a>()<span class='newline'>
</span>    <a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdrouter.get(_:handler:)' target='_blank' rel='external'>Get</a>(<a class='xs' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routerpath.init(stringliteral:)' target='_blank' rel='external'>"test"</a>) { _, <span class='xv'>context</span> <span class='xk'>in</span><span class='newline'>
</span>        <span class='xk'>return</span> <span class='xv'>context</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestcontext.endpointpath' target='_blank' rel='external'>endpointPath</a><span class='newline'>
</span>    }<span class='newline'>
</span>    <a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdrouter.get(_:handler:)' target='_blank' rel='external'>Get</a> { _, <span class='xv'>context</span> <span class='xk'>in</span><span class='newline'>
</span>        <span class='xk'>return</span> <span class='xv'>context</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestcontext.endpointpath' target='_blank' rel='external'>endpointPath</a><span class='newline'>
</span>    }<span class='newline'>
</span>    <a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdrouter.post(_:handler:)' target='_blank' rel='external'>Post</a>(<a class='xs' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routerpath.init(stringliteral:)' target='_blank' rel='external'>"/test2"</a>) { _, <span class='xv'>context</span> <span class='xk'>in</span><span class='newline'>
</span>        <span class='xk'>return</span> <span class='xv'>context</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestcontext.endpointpath' target='_blank' rel='external'>endpointPath</a><span class='newline'>
</span>    }<span class='newline'>
</span>}<span class='newline'>
</span><span class='xk'>let</span> <span class='xv'>app</span> = <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/application' target='_blank' rel='external'>Application</a>(<span class='xv'>responder</span>: <span class='xv'>router</span>)<span class='newline'>
</span><span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>app</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/applicationprotocol.runservice(gracefulshutdownsignals:)' target='_blank' rel='external'>runService</a>()</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/hummingbird-2-routerbuilder.swift' target='_blank' class='source github'><span class='file'>hummingbird-2-routerbuilder.swift</span></a><h2 id='Generic%20request%20context'><a href='#Generic%20request%20context'>Generic request context</a></h2><p>The biggest change to the framework is definitely the introduction of the generic request context. Hummingbird 2.0 separates contextual objects from the <code>Request</code> type and users can define custom properties as custom <code>RequestContext</code> protocol implementations.</p><p>The request context is associated with the reworked <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/router' target='_blank' rel='external'>Router</a></code>, which a generic class, featuring a <em>Context</em> type. The <code>BasicRequestContext</code> type is the default <em>Context</em> implementation for the <em>Router</em>. The request decoder and encoder defaults to a JSON-based solution when using the base context. You can provide a custom decoder through a custom router context.</p><p>Let me show you how this new contextual router system works in practice.</p><h2 id='HB2%20example%20project'><a href='#HB2%20example%20project'>HB2 example project</a></h2><p>This article contains a sample project, which you can download from the following <a href='https://github.com/swift-on-server/whats-new-in-hummingbird-2-sample' target='_blank' rel='external'>link</a>.</p><p>You can integrate Hummingbird 2 by adding it as a dependency to your project, using Swift Package Manager.</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xc'>// swift-tools-version:5.9</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>PackageDescription</span><span class='newline'>

</span><span class='xk'>let</span> <span class='xv'>package</span> = <span class='xv'>Package</span>(<span class='newline'>
</span>    <span class='xv'>name</span>: <span class='xs'>"whats-new-in-hummingbird-2-sample"</span>,<span class='newline'>
</span>    <span class='xv'>platforms</span>: [<span class='newline'>
</span>        .<span class='xv'>macOS</span>(.<span class='xv'>v14</span>),<span class='newline'>
</span>    ],<span class='newline'>
</span>    <span class='xv'>dependencies</span>: [<span class='newline'>
</span>        .<span class='xv'>package</span>(<span class='xv'>url</span>: <span class='xs'>"https://github.com/hummingbird-project/hummingbird.git"</span>, <span class='xv'>from</span>: <span class='xs'>"2.0.0"</span>),<span class='newline'>
</span>        .<span class='xv'>package</span>(<span class='xv'>url</span>: <span class='xs'>"https://github.com/apple/swift-argument-parser.git"</span>, <span class='xv'>from</span>: <span class='xs'>"1.4.0"</span>),<span class='newline'>
</span>    ],<span class='newline'>
</span>    <span class='xv'>targets</span>: [<span class='newline'>
</span>        .<span class='xv'>executableTarget</span>(<span class='newline'>
</span>            <span class='xv'>name</span>: <span class='xs'>"App"</span>,<span class='newline'>
</span>            <span class='xv'>dependencies</span>: [<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"ArgumentParser"</span>, <span class='xv'>package</span>: <span class='xs'>"swift-argument-parser"</span>),<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"Hummingbird"</span>, <span class='xv'>package</span>: <span class='xs'>"hummingbird"</span>),<span class='newline'>
</span>                <span class='xc'>// .product(name: "HummingbirdRouter", package: "hummingbird"),</span><span class='newline'>
</span>            ]<span class='newline'>
</span>        ),<span class='newline'>
</span>        .<span class='xv'>testTarget</span>(<span class='newline'>
</span>            <span class='xv'>name</span>: <span class='xs'>"AppTests"</span>,<span class='newline'>
</span>            <span class='xv'>dependencies</span>: [<span class='newline'>
</span>                .<span class='xv'>target</span>(<span class='xv'>name</span>: <span class='xs'>"App"</span>),<span class='newline'>
</span>                .<span class='xv'>product</span>(<span class='xv'>name</span>: <span class='xs'>"HummingbirdXCT"</span>, <span class='xv'>package</span>: <span class='xs'>"hummingbird"</span>),<span class='newline'>
</span>            ]<span class='newline'>
</span>        ),<span class='newline'>
</span>    ]<span class='newline'>
</span>)</code></pre><p>Here’s how to build a custom decoder to handle different media types on your backend server:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xc'>// 1.</span><span class='newline'>
</span><span class='xk'>struct</span> <span class='xt'>MyRequestDecoder</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestdecoder' target='_blank' rel='external'>RequestDecoder</a> {<span class='newline'>
</span>    <span class='xk'>func</span> <span class='xv'>decode</span>&lt;<span class='xv'>T</span>&gt;(<span class='newline'>
</span>        _ <span class='xv'>type</span>: <span class='xt'>T</span>.<span class='xk'>Type</span>,<span class='newline'>
</span>        <span class='xv'>from</span> <span class='xv'>request</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/request' target='_blank' rel='external'>Request</a>,<span class='newline'>
</span>        <span class='xv'>context</span>: <span class='xk'>some</span> <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestcontext' target='_blank' rel='external'>RequestContext</a><span class='newline'>
</span>    ) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>T</span> <span class='xk'>where</span> <span class='xt'>T</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/decodable' target='_blank' rel='external'>Decodable</a> {<span class='newline'>
</span>        <span class='xc'>// 2.</span><span class='newline'>
</span>        <span class='xk'>guard</span> <span class='xk'>let</span> <span class='xv'>header</span> = <span class='xv'>request</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/request.headers' target='_blank' rel='external'>headers</a><a href='https://swiftinit.org/docs/swift-http-types/httptypes/httpfields.subscript(_:)?hash=8MY26' target='_blank' rel='external'>[.</a><a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpfield/name.contenttype' target='_blank' rel='external'>contentType</a>] <span class='xk'>else</span> {<span class='newline'>
</span>            <span class='xk'>throw</span> <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/httperror' target='_blank' rel='external'>HTTPError</a>(.<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse/status.badrequest' target='_blank' rel='external'>badRequest</a>)<span class='newline'>
</span>        }<span class='newline'>
</span>        <span class='xc'>// 3.</span><span class='newline'>
</span>        <span class='xk'>guard</span> <span class='xk'>let</span> <span class='xv'>mediaType</span> = <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/mediatype' target='_blank' rel='external'>MediaType</a>(<span class='xv'>from</span>: <span class='xv'>header</span>) <span class='xk'>else</span> {<span class='newline'>
</span>            <span class='xk'>throw</span> <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/httperror' target='_blank' rel='external'>HTTPError</a>(.<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse/status.badrequest' target='_blank' rel='external'>badRequest</a>)<span class='newline'>
</span>        }<span class='newline'>
</span>        <span class='xc'>// 4.</span><span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>decoder</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestdecoder' target='_blank' rel='external'>RequestDecoder</a><span class='newline'>
</span>        <span class='xk'>switch</span> <span class='xv'>mediaType</span> {<span class='newline'>
</span>        <span class='xk'>case</span> .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/mediatype.applicationjson' target='_blank' rel='external'>applicationJson</a>:<span class='newline'>
</span>            <span class='xv'>decoder</span> = <a class='xt' href='https://swiftinit.org/docs/swift/foundationessentials/jsondecoder' target='_blank' rel='external'>JSONDecoder</a>()<span class='newline'>
</span>        <span class='xk'>case</span> .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/mediatype.applicationurlencoded' target='_blank' rel='external'>applicationUrlEncoded</a>:<span class='newline'>
</span>            <span class='xv'>decoder</span> = <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/urlencodedformdecoder' target='_blank' rel='external'>URLEncodedFormDecoder</a>()<span class='newline'>
</span>        <span class='xk'>default</span>:<span class='newline'>
</span>            <span class='xk'>throw</span> <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/httperror' target='_blank' rel='external'>HTTPError</a>(.<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse/status.badrequest' target='_blank' rel='external'>badRequest</a>)<span class='newline'>
</span>        }<span class='newline'>
</span>        <span class='xc'>// 5</span><span class='newline'>
</span>        <span class='xk'>return</span> <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>decoder</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestdecoder.decode(_:from:context:)' target='_blank' rel='external'>decode</a>(<span class='newline'>
</span>            <span class='xv'>type</span>,<span class='newline'>
</span>            <span class='xv'>from</span>: <span class='xv'>request</span>,<span class='newline'>
</span>            <span class='xv'>context</span>: <span class='xv'>context</span><span class='newline'>
</span>        )<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/hummingbird-2.swift#L9' target='_blank' class='source github'><span class='file'>hummingbird-2.swift</span>:<span class='line'>9</span></a><ol><li><p>Define the custom decoder by implementing the <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestdecoder' target='_blank' rel='external'>RequestDecoder</a></code> protocol.</p></li><li><p>Make sure that the incoming request has a <code>Content-Type</code> HTTP header field.</p></li><li><p>Construct a valid <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/mediatype' target='_blank' rel='external'>MediaType</a></code> object from the header field.</p></li><li><p>Setup a custom decoder based on the media type.</p></li><li><p>Return the decoded object using the decoder, with the request and the context.</p></li></ol><p>To use the custom decoder, let’s define a custom request context. A request context is a container for the Hummingbird framework to store information needed by the framework. The following snippet demonstrates how to build one using the <em>RequestContext</em> protocol:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xc'>// 1.</span><span class='newline'>
</span><span class='xk'>protocol</span> <span class='xt'>MyRequestContext</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestcontext' target='_blank' rel='external'>RequestContext</a> {<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>myValue</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>? { <span class='xv'>get</span> <span class='xv'>set</span> }<span class='newline'>
</span>}<span class='newline'>

</span><span class='xc'>// 2.</span><span class='newline'>
</span><span class='xk'>struct</span> <span class='xt'>MyBaseRequestContext</span>: <span class='xt'>MyRequestContext</span> {<span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>coreContext</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/corerequestcontextstorage' target='_blank' rel='external'>CoreRequestContextStorage</a><span class='newline'>

</span>    <span class='xc'>// 3.</span><span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>myValue</span>: <a class='xt' href='https://swiftinit.org/docs/swift/swift/string' target='_blank' rel='external'>String</a>?<span class='newline'>

</span>    <span class='xk'>init</span>(<span class='xv'>source</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestcontext/source' target='_blank' rel='external'>Source</a>) {<span class='newline'>
</span>        <span class='xk'>self</span>.<span class='xv'>coreContext</span> = .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/corerequestcontextstorage.init(source:)' target='_blank' rel='external'>init</a>(<span class='xv'>source</span>: <span class='xv'>source</span>)<span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xc'>// 4.</span><span class='newline'>
</span>    <span class='xk'>var</span> <span class='xv'>requestDecoder</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/requestdecoder' target='_blank' rel='external'>RequestDecoder</a> {<span class='newline'>
</span>        <span class='xt'>MyRequestDecoder</span>()<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/hummingbird-2.swift#L44' target='_blank' class='source github'><span class='file'>hummingbird-2.swift</span>:<span class='line'>44</span></a><ol><li><p>Define a custom <code>MyRequestContext</code> protocol using the <em>RequestContext</em> protocol.</p></li><li><p>Implement the <code>MyRequestContext</code> protocol using a <code>MyBaseRequestContext</code> struct.</p></li><li><p>Implement custom properties, configure them using the init method, if needed.</p></li><li><p>Return the custom <code>MyRequestDecoder</code> as a default request decoder implementation.</p></li></ol><p>The <a href='https://github.com/hummingbird-project/hummingbird-auth' target='_blank' rel='external'>HummingbirdAuth</a> library also defines a custom context (<code><a href='https://swiftinit.org/docs/hummingbird-auth/hummingbirdauth/authrequestcontext' target='_blank' rel='external'>AuthRequestContext</a></code>) in a similar way to store user auth information.</p><p>It is possible to compose multiple protocols such as <em>AuthRequestContext</em> by conforming to all of them. This makes it easy to integrate the context with various libraries. This also allows libraries to provide middleware that accept a custom context as input, or that modify a custom context, to enrich requests. For example, enriching a request by adding the authenticated user.</p><p>Create the application instance using the <code>buildApplication</code> function.</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>func</span> <span class='xv'>buildApplication</span>() <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xk'>some</span> <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/applicationprotocol' target='_blank' rel='external'>ApplicationProtocol</a> {<span class='newline'>
</span>    <span class='xc'>// 1.</span><span class='newline'>
</span>    <span class='xk'>let</span> <span class='xv'>router</span> = <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/router' target='_blank' rel='external'>Router</a>(<span class='xv'>context</span>: <span class='xt'>MyBaseRequestContext</span>.<span class='xk'>self</span>)<span class='newline'>

</span>    <span class='xc'>// 2</span><span class='newline'>
</span>    <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/router.middlewares' target='_blank' rel='external'>middlewares</a>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/middlewaregroup.add(_:)' target='_blank' rel='external'>add</a>(<a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/logrequestsmiddleware' target='_blank' rel='external'>LogRequestsMiddleware</a>(.<a class='xv' href='https://swiftinit.org/docs/swift-log/logging/logger/level.info' target='_blank' rel='external'>info</a>))<span class='newline'>
</span>    <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/router.middlewares' target='_blank' rel='external'>middlewares</a>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/middlewaregroup.add(_:)' target='_blank' rel='external'>add</a>(<a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/filemiddleware' target='_blank' rel='external'>FileMiddleware</a>())<span class='newline'>
</span>    <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/router.middlewares' target='_blank' rel='external'>middlewares</a>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/middlewaregroup.add(_:)' target='_blank' rel='external'>add</a>(<span class='newline'>
</span>        <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/corsmiddleware' target='_blank' rel='external'>CORSMiddleware</a>(<span class='newline'>
</span>            <span class='xv'>allowOrigin</span>: .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/corsmiddleware/alloworigin.originbased' target='_blank' rel='external'>originBased</a>,<span class='newline'>
</span>            <span class='xv'>allowHeaders</span>: [.<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpfield/name.contenttype' target='_blank' rel='external'>contentType</a>],<span class='newline'>
</span>            <span class='xv'>allowMethods</span>: [.<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httprequest/method.get' target='_blank' rel='external'>get</a>, .<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httprequest/method.post' target='_blank' rel='external'>post</a>, .<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httprequest/method.delete' target='_blank' rel='external'>delete</a>, .<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httprequest/method.patch' target='_blank' rel='external'>patch</a>]<span class='newline'>
</span>        )<span class='newline'>
</span>    )<span class='newline'>

</span>    <span class='xc'>// 3</span><span class='newline'>
</span>    <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routermethods.get(_:use:)' target='_blank' rel='external'>get</a>(<a class='xs' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routerpath.init(stringliteral:)' target='_blank' rel='external'>"/health"</a>) { _, _ -&gt; <a class='xt' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse' target='_blank' rel='external'>HTTPResponse</a>.<a class='xt' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse/status' target='_blank' rel='external'>Status</a> <span class='xk'>in</span><span class='newline'>
</span>        .<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse/status.ok' target='_blank' rel='external'>ok</a><span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xc'>// 4.</span><span class='newline'>
</span>    <span class='xt'>MyController</span>().<span class='xv'>addRoutes</span>(<span class='xv'>to</span>: <span class='xv'>router</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routermethods.group(_:)' target='_blank' rel='external'>group</a>(<a class='xs' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routerpath.init(stringliteral:)' target='_blank' rel='external'>"api"</a>))<span class='newline'>

</span>    <span class='xc'>// 5.</span><span class='newline'>
</span>    <span class='xk'>return</span> <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/application' target='_blank' rel='external'>Application</a>(<span class='newline'>
</span>        <span class='xv'>router</span>: <span class='xv'>router</span>,<span class='newline'>
</span>        <span class='xv'>configuration</span>: .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/applicationconfiguration.init(address:servername:backlog:reuseaddress:availableconnectionsdelegate:)' target='_blank' rel='external'>init</a>(<span class='newline'>
</span>            <span class='xv'>address</span>: .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/bindaddress.hostname(_:port:)' target='_blank' rel='external'>hostname</a>(<span class='xs'>"localhost"</span>, <span class='xv'>port</span>: <span class='xn'>8080</span>)<span class='newline'>
</span>        )<span class='newline'>
</span>    )<span class='newline'>
</span>}<span class='newline'>

</span><span class='xa'>@main</span><span class='newline'>
</span><span class='xk'>struct</span> <span class='xt'>HummingbirdArguments</span>: <a class='xt' href='https://swiftinit.org/docs/swift-argument-parser/argumentparser/asyncparsablecommand' target='_blank' rel='external'>AsyncParsableCommand</a> {<span class='newline'>
</span>    <span class='xk'>func</span> <span class='xv'>run</span>() <span class='xk'>async</span> <span class='xk'>throws</span> {<span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>app</span> = <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>buildApplication</span>()<span class='newline'>
</span>        <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>app</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/applicationprotocol.runservice(gracefulshutdownsignals:)' target='_blank' rel='external'>runService</a>()<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/hummingbird-2.swift#L109' target='_blank' class='source github'><span class='file'>hummingbird-2.swift</span>:<span class='line'>109</span></a><ol><li><p>Setup the router using the <code>MyBaseRequestContext</code> type as a custom context.</p></li><li><p>Add middlewares to the router, HB2 has middlewares on the router instead of the app</p></li><li><p>Setup a basic health route on the router, simply return with a HTTP status code</p></li><li><p>Add routes using the custom controller to the <code>api</code> route group</p></li><li><p>Build the <em>Application</em> instance using the router and the configuration</p></li></ol><p>Inside the main entrypoint you can start the server by calling the <code><a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/application' target='_blank' rel='external'>Application</a>.<a href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/applicationprotocol.runservice(gracefulshutdownsignals:)' target='_blank' rel='external'>runService(gracefulShutdownSignals:)</a></code> method:</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>import</span> <span class='xv'>ArgumentParser</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Foundation</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Hummingbird</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>Logging</span><span class='newline'>
</span><span class='xk'>import</span> <span class='xv'>NIOCore</span></code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/hummingbird-2.swift#L2' target='_blank' class='source github'><span class='file'>hummingbird-2.swift</span>:<span class='line'>2</span></a><p>The route handlers in the <code>MyController</code> struct can access of the custom context type.</p><pre class='snippet'><code class='language-swift'><span class='newline'></span><span class='xk'>struct</span> <span class='xt'>MyController</span>&lt;<span class='xt'>Context</span>: <span class='xt'>MyRequestContext</span>&gt; {<span class='newline'>
</span>    <span class='xc'>// 1.</span><span class='newline'>
</span>    <span class='xk'>func</span> <span class='xv'>addRoutes</span>(<span class='newline'>
</span>        <span class='xv'>to</span> <span class='xv'>group</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routergroup' target='_blank' rel='external'>RouterGroup</a>&lt;<span class='xt'>Context</span>&gt;<span class='newline'>
</span>    ) {<span class='newline'>
</span>        <span class='xv'>group</span><span class='newline'>
</span>            .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routermethods.get(_:use:)' target='_blank' rel='external'>get</a>(<span class='xv'>use</span>: <span class='xv'>list</span>)<span class='newline'>
</span>            .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/routermethods.post(_:use:)' target='_blank' rel='external'>post</a>(<span class='xv'>use</span>: <span class='xv'>create</span>)<span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xc'>// 2.</span><span class='newline'>
</span>    <span class='xa'>@Sendable</span><span class='newline'>
</span>    <span class='xk'>func</span> <span class='xv'>list</span>(<span class='newline'>
</span>        _ <span class='xv'>request</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/request' target='_blank' rel='external'>Request</a>,<span class='newline'>
</span>        <span class='xv'>context</span>: <span class='xt'>Context</span><span class='newline'>
</span>    ) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; [<span class='xt'>MyModel</span>] {<span class='newline'>
</span>        [<span class='newline'>
</span>            .<span class='xv'>init</span>(<span class='xv'>title</span>: <span class='xs'>"foo"</span>),<span class='newline'>
</span>            .<span class='xv'>init</span>(<span class='xv'>title</span>: <span class='xs'>"bar"</span>),<span class='newline'>
</span>            .<span class='xv'>init</span>(<span class='xv'>title</span>: <span class='xs'>"baz"</span>),<span class='newline'>
</span>        ]<span class='newline'>
</span>    }<span class='newline'>

</span>    <span class='xa'>@Sendable</span><span class='newline'>
</span>    <span class='xk'>func</span> <span class='xv'>create</span>(<span class='newline'>
</span>        _ <span class='xv'>request</span>: <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/request' target='_blank' rel='external'>Request</a>,<span class='newline'>
</span>        <span class='xv'>context</span>: <span class='xt'>Context</span><span class='newline'>
</span>    ) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <a class='xt' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/editedresponse' target='_blank' rel='external'>EditedResponse</a>&lt;<span class='xt'>MyModel</span>&gt; {<span class='newline'>
</span>        <span class='xc'>// 3.</span><span class='newline'>
</span>        <span class='xc'>// context.myValue</span><span class='newline'>
</span>        <span class='xk'>let</span> <span class='xv'>input</span> = <span class='xk'>try</span> <span class='xk'>await</span> <span class='xv'>request</span>.<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbirdcore/request.decode(as:context:)' target='_blank' rel='external'>decode</a>(<span class='newline'>
</span>            <span class='xv'>as</span>: <span class='xt'>MyModel</span>.<span class='xk'>self</span>,<span class='newline'>
</span>            <span class='xv'>context</span>: <span class='xv'>context</span><span class='newline'>
</span>        )<span class='newline'>
</span>        <span class='xk'>return</span> .<a class='xv' href='https://swiftinit.org/hist/hummingbird:2.6.1/hummingbird/editedresponse.init(status:headers:response:)' target='_blank' rel='external'>init</a>(<span class='xv'>status</span>: .<a class='xv' href='https://swiftinit.org/docs/swift-http-types/httptypes/httpresponse/status.created' target='_blank' rel='external'>created</a>, <span class='xv'>response</span>: <span class='xv'>input</span>)<span class='newline'>
</span>    }<span class='newline'>
</span>}</code></pre><a rel='ugc' href='https://github.com/swift-on-server/articles/blob/main/Snippets/hummingbird-2.swift#L70' target='_blank' class='source github'><span class='file'>hummingbird-2.swift</span>:<span class='line'>70</span></a><ol><li><p>Register route handlers using the router group</p></li><li><p>Hummingbird is thread-safe, so every route handler should be marked  with <code>@Sendable</code> to propagate these thread-safety checks.</p></li><li><p>It is possible to access both the request and the context in each route handler.</p></li></ol><p>Beyond these changes, there are many more in the new Hummingbird 2 release. We’re excited for you to try it out!</p><p>If have questions about Hummingbird, feel free to join the following <a href='https://discord.gg/fkN7FC7QJk' target='_blank' rel='external nofollow noopener ugc'>Discord server</a>. You can also get some inspiration from the official <a href='https://hummingbird.codes/examples' target='_blank' rel='external nofollow noopener ugc'>Hummingbird examples</a>.</p></section><div style='display: none;' id='swiftinit-tooltips'><a href='/hist/hummingbird:2.6.1/hummingbirdcore/request'><pre><code><span class='xk'>struct</span> <span class='xv'>Request</span></code></pre><p>Holds all the values required to process a request</p></a><a href='/docs/swift/swift/sendable'><pre><code><span class='xk'>protocol</span> <span class='xv'>Sendable</span></code></pre></a><a href='/hist/hummingbird:2.6.1/hummingbird/middlewareprotocol'><pre><code><span class='xk'>protocol</span> <span class='xv'>MiddlewareProtocol</span>&lt;<span class='xv'>Input</span>, <span class='xv'>Output</span>, <span class='xv'>Context</span>&gt; : <span class='xt'>Sendable</span></code></pre><p>Middleware protocol with generic input, context and output types</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/httpresponder'><pre><code><span class='xk'>protocol</span> <span class='xv'>HTTPResponder</span>&lt;<span class='xv'>Context</span>&gt; : <span class='xt'>Sendable</span></code></pre><p>Protocol for object that produces a response given a request</p></a><a href='/docs/swift/_concurrency/taskgroup'><pre><code><span class='xa'>@frozen</span> <span class='xk'>struct</span> <span class='xv'>TaskGroup</span>&lt;<span class='xu'>ChildTaskResult</span>&gt; <span class='xk'>where</span> <span class='xt'>ChildTaskResult</span> : <span class='xt'>Sendable</span></code></pre><p>A group that contains dynamically created child tasks.</p></a><a href='/docs/swift-service-lifecycle/servicelifecycle/service'><pre><code><span class='xk'>protocol</span> <span class='xv'>Service</span> : <span class='xt'>Sendable</span></code></pre><p>This is the basic protocol that a service has to implement.</p></a><a href='/hist/hummingbird:2.6.1/hummingbirdrouter/routerbuilder'><pre><code><span class='xk'>struct</span> <span class='xv'>RouterBuilder</span>&lt;<span class='xu'>Context</span>, <span class='xu'>Handler</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RouterRequestContext</span>, <span class='xt'>Context</span> <span class='xo'>==</span> <span class='xt'>Handler</span>.<span class='xt'>Context</span>, <span class='xt'>Handler</span> : <span class='xt'>MiddlewareProtocol</span>, <span class='xt'>Handler</span>.<span class='xt'>Input</span> <span class='xo'>==</span> <span class='xt'>Request</span>, <span class='xt'>Handler</span>.<span class='xt'>Output</span> <span class='xo'>==</span> <span class='xt'>Response</span></code></pre><p>Router built using a result builder</p></a><a href='/hist/hummingbird:2.6.1/hummingbirdrouter/basicrouterrequestcontext'><pre><code><span class='xk'>struct</span> <span class='xv'>BasicRouterRequestContext</span></code></pre><p>Basic implementation of a context that can be used with `RouterBuilder``</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/tracingmiddleware'><pre><code><span class='xk'>struct</span> <span class='xv'>TracingMiddleware</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Middleware creating Distributed Tracing spans for each request.</p></a><a href='/hist/hummingbird:2.6.1/hummingbirdrouter.get(_:handler:)'><pre><code><span class='xk'>func</span> <span class='xv'>Get</span>&lt;<span class='xu'>RouteOutput</span>, <span class='xu'>Context</span>&gt;(<span class='xi'></span>_ <span class='xb'>routerPath</span>: <span class='xt'>RouterPath</span> = <span class='xs'>""</span>, <span class='xi'></span><span class='xv'>handler</span>: <span class='xa'>@escaping</span> (<span class='xt'>Request</span>, <span class='xt'>Context</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>RouteOutput</span><wbr>) -&gt; <span class='xt'>Route</span>&lt;<span class='xt'>_RouteHandlerClosure</span>&lt;<span class='xt'>RouteOutput</span>, <span class='xt'>Context</span>&gt;, <span class='xt'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>RouteOutput</span> : <span class='xt'>ResponseGenerator</span>, <span class='xt'>Context</span> : <span class='xt'>RouterRequestContext</span></code></pre><p>Create a GET Route with a closure</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/routerpath.init(stringliteral:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>stringLiteral</span> <span class='xb'>value</span>: <span class='xt'>String</span><wbr>)</code></pre><p>Initialize RouterPath from String literal</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/requestcontext.endpointpath'><pre><code><span class='xk'>var</span> <span class='xv'>endpointPath</span>: <span class='xt'>String</span>? { <span class='xk'>get</span> }</code></pre><p>Endpoint path</p></a><a href='/hist/hummingbird:2.6.1/hummingbirdrouter.post(_:handler:)'><pre><code><span class='xk'>func</span> <span class='xv'>Post</span>&lt;<span class='xu'>RouteOutput</span>, <span class='xu'>Context</span>&gt;(<span class='xi'></span>_ <span class='xb'>routerPath</span>: <span class='xt'>RouterPath</span> = <span class='xs'>""</span>, <span class='xi'></span><span class='xv'>handler</span>: <span class='xa'>@escaping</span> (<span class='xt'>Request</span>, <span class='xt'>Context</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>RouteOutput</span><wbr>) -&gt; <span class='xt'>Route</span>&lt;<span class='xt'>_RouteHandlerClosure</span>&lt;<span class='xt'>RouteOutput</span>, <span class='xt'>Context</span>&gt;, <span class='xt'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>RouteOutput</span> : <span class='xt'>ResponseGenerator</span>, <span class='xt'>Context</span> : <span class='xt'>RouterRequestContext</span></code></pre><p>Create a POST Route with a closure</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/application'><pre><code><span class='xk'>struct</span> <span class='xv'>Application</span>&lt;<span class='xu'>Responder</span>&gt; <span class='xk'>where</span> <span class='xt'>Responder</span> : <span class='xt'>HTTPResponder</span>, <span class='xt'>Responder</span>.<span class='xt'>Context</span> : <span class='xt'>InitializableFromSource</span>, <span class='xt'>Responder</span>.<span class='xt'>Context</span>.<span class='xt'>Source</span> <span class='xo'>==</span> <span class='xt'>ApplicationRequestContextSource</span></code></pre><p>Application class. Brings together all the components of Hummingbird together</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/applicationprotocol.runservice(gracefulshutdownsignals:)'><pre><code><span class='xk'>func</span> <span class='xv'>runService</span>(<span class='xi'></span><span class='xv'>gracefulShutdownSignals</span>: [<span class='xt'>UnixSignal</span>] = [.<span class='xv'>sigterm</span>, .<span class='xv'>sigint</span>]<wbr>) <span class='xk'>async</span> <span class='xk'>throws</span></code></pre><p>Helper function that runs application inside a ServiceGroup which will gracefully shutdown on signals SIGINT, SIGTERM</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/router'><pre><code><span class='xk'>final</span> <span class='xk'>class</span> <span class='xv'>Router</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Create rules for routing requests and then create <code>Responder</code> that will follow these rules.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/requestdecoder'><pre><code><span class='xk'>protocol</span> <span class='xv'>RequestDecoder</span></code></pre><p>protocol for decoder deserializing from a Request body</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/requestcontext'><pre><code><span class='xk'>protocol</span> <span class='xv'>RequestContext</span> : <span class='xt'>InitializableFromSource</span>, <span class='xt'>RequestContextSource</span> <span class='xk'>where</span> <span class='xk'>Self</span>.<span class='xt'>Source</span> : <span class='xt'>RequestContextSource</span></code></pre><p>Protocol that all request contexts should conform to. A RequestContext is a statically typed metadata container for information that is associated with a <code>Request</code>, and is therefore instantiated alongside the request.</p></a><a href='/docs/swift/swift/decodable'><pre><code><span class='xk'>protocol</span> <span class='xv'>Decodable</span></code></pre><p>A type that can decode itself from an external representation.</p></a><a href='/hist/hummingbird:2.6.1/hummingbirdcore/request.headers'><pre><code><span class='xk'>var</span> <span class='xv'>headers</span>: <span class='xt'>HTTPFields</span> { <span class='xk'>get</span> }</code></pre><p>Request HTTP headers</p></a><a href='/docs/swift-http-types/httptypes/httpfields.subscript(_:)?hash=8MY26'><pre><code><span class='xk'>subscript</span>(<span class='xi'></span><span class='xv'>name</span>: <span class='xt'>HTTPField</span>.<span class='xt'>Name</span><wbr>) -&gt; <span class='xt'>String</span>? { <span class='xk'>get</span> <span class='xk'>set</span> }</code></pre><p>Access the field value string by name.</p></a><a href='/docs/swift-http-types/httptypes/httpfield/name.contenttype'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>contentType</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>Content-Type</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/httperror'><pre><code><span class='xk'>struct</span> <span class='xv'>HTTPError</span></code></pre><p>Default HTTP error. Provides an HTTP status and a message</p></a><a href='/docs/swift-http-types/httptypes/httpresponse/status.badrequest'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>badRequest</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>400 Bad Request</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/mediatype'><pre><code><span class='xk'>struct</span> <span class='xv'>MediaType</span></code></pre><p>Define media type of file</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/mediatype.applicationjson'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>applicationJson</span>: <span class='xt'>Self</span> { <span class='xk'>get</span> }</code></pre><p>JSON format</p></a><a href='/docs/swift/foundationessentials/jsondecoder'><pre><code><span class='xk'>class</span> <span class='xv'>JSONDecoder</span></code></pre><p><code>JSONDecoder</code> facilitates the decoding of JSON into semantic <code>Decodable</code> types.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/mediatype.applicationurlencoded'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>applicationUrlEncoded</span>: <span class='xt'>Self</span> { <span class='xk'>get</span> }</code></pre><p>URL encoded form data</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/urlencodedformdecoder'><pre><code><span class='xk'>struct</span> <span class='xv'>URLEncodedFormDecoder</span></code></pre><p>The wrapper struct for decoding URL encoded form data to Codable classes</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/requestdecoder.decode(_:from:context:)'><pre><code><span class='xk'>func</span> <span class='xv'>decode</span>&lt;<span class='xu'>T</span>&gt;(<span class='xi'></span>_ <span class='xb'>type</span>: <span class='xt'>T</span>.<span class='xk'>Type</span>, <span class='xi'></span><span class='xv'>from</span> <span class='xb'>request</span>: <span class='xt'>Request</span>, <span class='xi'></span><span class='xv'>context</span>: <span class='xk'>some</span> <span class='xt'>RequestContext</span><wbr>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>T</span> <span class='xk'>where</span> <span class='xt'>T</span> : <span class='xt'>Decodable</span></code></pre><p>Decode type from request</p></a><a href='/docs/swift/swift/string'><pre><code><span class='xa'>@frozen</span> <span class='xk'>struct</span> <span class='xv'>String</span></code></pre><p>A Unicode string value that is a collection of characters.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/corerequestcontextstorage'><pre><code><span class='xk'>struct</span> <span class='xv'>CoreRequestContextStorage</span></code></pre><p>Request context values required by Hummingbird itself.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/requestcontext/source'><pre><code><span class='xk'>associatedtype</span> <span class='xv'>Source</span> = <span class='xt'>ApplicationRequestContextSource</span></code></pre></a><a href='/hist/hummingbird:2.6.1/hummingbird/corerequestcontextstorage.init(source:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>source</span>: <span class='xk'>some</span> <span class='xt'>RequestContextSource</span><wbr>)</code></pre></a><a href='/docs/hummingbird-auth/hummingbirdauth/authrequestcontext'><pre><code><span class='xk'>protocol</span> <span class='xv'>AuthRequestContext</span>&lt;<span class='xv'>Identity</span>&gt; : <span class='xt'>RequestContext</span></code></pre><p>Protocol that all request contexts should conform to if they want to support authentication middleware</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/applicationprotocol'><pre><code><span class='xk'>protocol</span> <span class='xv'>ApplicationProtocol</span> : <span class='xt'>Service</span></code></pre><p>Protocol for an Application. Brings together all the components of Hummingbird together</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/router.middlewares'><pre><code><span class='xk'>let</span> <span class='xv'>middlewares</span>: <span class='xt'>MiddlewareGroup</span>&lt;<span class='xt'>Context</span>&gt;</code></pre></a><a href='/hist/hummingbird:2.6.1/hummingbird/middlewaregroup.add(_:)'><pre><code><span class='xa'>@discardableResult</span> <span class='xk'>func</span> <span class='xv'>add</span>(<span class='xi'></span>_ <span class='xb'>middleware</span>: <span class='xk'>any</span> <span class='xt'>MiddlewareProtocol</span>&lt;<span class='xt'>Request</span>, <span class='xt'>Response</span>, <span class='xt'>Context</span>&gt;<wbr>) -&gt; <span class='xk'>Self</span></code></pre><p>Add middleware to group</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/logrequestsmiddleware'><pre><code><span class='xk'>struct</span> <span class='xv'>LogRequestsMiddleware</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Middleware outputting to log for every call to server.</p></a><a href='/docs/swift-log/logging/logger/level.info'><pre><code><span class='xk'>case</span> <span class='xv'>info</span></code></pre><p>Appropriate for informational messages.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/filemiddleware'><pre><code><span class='xk'>struct</span> <span class='xv'>FileMiddleware</span>&lt;<span class='xu'>Context</span>, <span class='xu'>Provider</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span>, <span class='xt'>Provider</span> : <span class='xt'>FileProvider</span>, <span class='xt'>Provider</span>.<span class='xt'>FileAttributes</span> : <span class='xt'>FileMiddlewareFileAttributes</span></code></pre><p>Middleware for serving static files.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/corsmiddleware'><pre><code><span class='xk'>struct</span> <span class='xv'>CORSMiddleware</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Middleware implementing Cross-Origin Resource Sharing (CORS) headers.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/corsmiddleware/alloworigin.originbased'><pre><code><span class='xk'>case</span> <span class='xv'>originBased</span></code></pre></a><a href='/docs/swift-http-types/httptypes/httprequest/method.get'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>get</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>GET</p></a><a href='/docs/swift-http-types/httptypes/httprequest/method.post'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>post</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>POST</p></a><a href='/docs/swift-http-types/httptypes/httprequest/method.delete'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>delete</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>DELETE</p></a><a href='/docs/swift-http-types/httptypes/httprequest/method.patch'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>patch</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>PATCH</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/routermethods.get(_:use:)'><pre><code><span class='xa'>@discardableResult</span> <span class='xk'>func</span> <span class='xv'>get</span>(<span class='xi'></span>_ <span class='xb'>path</span>: <span class='xt'>RouterPath</span> = <span class='xs'>""</span>, <span class='xi'></span><span class='xv'>use</span> <span class='xb'>handler</span>: <span class='xa'>@escaping</span> (<span class='xt'>Request</span>, <span class='xt'>Context</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xk'>some</span> <span class='xt'>ResponseGenerator</span><wbr>) -&gt; <span class='xk'>Self</span></code></pre><p>GET path for async closure returning type conforming to ResponseGenerator</p></a><a href='/docs/swift-http-types/httptypes/httpresponse'><pre><code><span class='xk'>struct</span> <span class='xv'>HTTPResponse</span></code></pre><p>An HTTP response message consisting of the “:status” pseudo header field and header fields.</p></a><a href='/docs/swift-http-types/httptypes/httpresponse/status'><pre><code><span class='xk'>struct</span> <span class='xv'>Status</span></code></pre><p>The response status consisting of a 3-digit status code and a reason phrase. The reason phrase is ignored by modern HTTP versions.</p></a><a href='/docs/swift-http-types/httptypes/httpresponse/status.ok'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>ok</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>200 OK</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/routermethods.group(_:)'><pre><code><span class='xk'>func</span> <span class='xv'>group</span>(<span class='xi'></span>_ <span class='xb'>path</span>: <span class='xt'>RouterPath</span> = <span class='xs'>""</span><wbr>) -&gt; <span class='xt'>RouterGroup</span>&lt;<span class='xt'>Context</span>&gt;</code></pre><p>Return a group inside the current group</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/applicationconfiguration.init(address:servername:backlog:reuseaddress:availableconnectionsdelegate:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>address</span>: <span class='xt'>BindAddress</span> = .<span class='xv'>hostname</span>(), <span class='xi'></span><span class='xv'>serverName</span>: <span class='xt'>String</span>? = <span class='xk'>nil</span>, <span class='xi'></span><span class='xv'>backlog</span>: <span class='xt'>Int</span> = <span class='xn'>256</span>, <span class='xi'></span><span class='xv'>reuseAddress</span>: <span class='xt'>Bool</span> = <span class='xk'>true</span>, <span class='xi'></span><span class='xv'>availableConnectionsDelegate</span>: <span class='xt'>AvailableConnectionsDelegate</span>? = <span class='xk'>nil</span><wbr>)</code></pre><p>Initialize Application configuration</p></a><a href='/hist/hummingbird:2.6.1/hummingbirdcore/bindaddress.hostname(_:port:)'><pre><code><span class='xk'>static</span> <span class='xk'>func</span> <span class='xv'>hostname</span>(<span class='xi'></span>_ <span class='xb'>host</span>: <span class='xt'>String</span> = <span class='xs'>"127.0.0.1"</span>, <span class='xi'></span><span class='xv'>port</span>: <span class='xt'>Int</span> = <span class='xn'>8080</span><wbr>) -&gt; <span class='xt'>BindAddress</span></code></pre></a><a href='/docs/swift-argument-parser/argumentparser/asyncparsablecommand'><pre><code><span class='xk'>protocol</span> <span class='xv'>AsyncParsableCommand</span> : <span class='xt'>ParsableCommand</span></code></pre><p>A type that can be executed asynchronously, as part of a nested tree of commands.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/routergroup'><pre><code><span class='xk'>struct</span> <span class='xv'>RouterGroup</span>&lt;<span class='xu'>Context</span>&gt; <span class='xk'>where</span> <span class='xt'>Context</span> : <span class='xt'>RequestContext</span></code></pre><p>Used to group together routes under a single path. Additional middleware can be added to the endpoint and each route can add a suffix to the endpoint path</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/routermethods.post(_:use:)'><pre><code><span class='xa'>@discardableResult</span> <span class='xk'>func</span> <span class='xv'>post</span>(<span class='xi'></span>_ <span class='xb'>path</span>: <span class='xt'>RouterPath</span> = <span class='xs'>""</span>, <span class='xi'></span><span class='xv'>use</span> <span class='xb'>handler</span>: <span class='xa'>@escaping</span> (<span class='xt'>Request</span>, <span class='xt'>Context</span>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xk'>some</span> <span class='xt'>ResponseGenerator</span><wbr>) -&gt; <span class='xk'>Self</span></code></pre><p>POST path for async closure returning type conforming to ResponseGenerator</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/editedresponse'><pre><code><span class='xk'>struct</span> <span class='xv'>EditedResponse</span>&lt;<span class='xu'>Generator</span>&gt; <span class='xk'>where</span> <span class='xt'>Generator</span> : <span class='xt'>ResponseGenerator</span></code></pre></a><a href='/hist/hummingbird:2.6.1/hummingbirdcore/request.decode(as:context:)'><pre><code><span class='xk'>func</span> <span class='xv'>decode</span>&lt;<span class='xu'>Type</span>&gt;(<span class='xi'></span><span class='xv'>as</span> <span class='xb'>type</span>: <span class='xt'>Type</span>.<span class='xk'>Type</span>, <span class='xi'></span><span class='xv'>context</span>: <span class='xk'>some</span> <span class='xt'>RequestContext</span><wbr>) <span class='xk'>async</span> <span class='xk'>throws</span> -&gt; <span class='xt'>Type</span> <span class='xk'>where</span> <span class='xt'>Type</span> : <span class='xt'>Decodable</span></code></pre><p>Decode request using decoder stored at <code>Application.decoder</code>.</p></a><a href='/hist/hummingbird:2.6.1/hummingbird/editedresponse.init(status:headers:response:)'><pre><code><span class='xk'>init</span>(<span class='xi'></span><span class='xv'>status</span>: <span class='xt'>HTTPResponse</span>.<span class='xt'>Status</span>? = <span class='xk'>nil</span>, <span class='xi'></span><span class='xv'>headers</span>: <span class='xt'>HTTPFields</span> = .<span class='xk'>init</span>(), <span class='xi'></span><span class='xv'>response</span>: <span class='xt'>Generator</span><wbr>)</code></pre></a><a href='/docs/swift-http-types/httptypes/httpresponse/status.created'><pre><code><span class='xk'>static</span> <span class='xk'>var</span> <span class='xv'>created</span>: <span class='xt'>`Self`</span> { <span class='xk'>get</span> }</code></pre><p>201 Created</p></a></div>
                    
                </section>
    
                <footer>
                    <br>
                    <time datetime=""></time>
    
                    
                    <div class="author-list">
                        <a href="https://swiftonserver.com/authors/tibor-bodecs/">
                        <img class="small rounded" src="/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                        <span class="name">Tibor Bödecs</span>
                        </a>
                    </div>
                    <div class="tag-list">
                        <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
                    <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                    </div>
                </footer>
                            
                <section class="group">
                    <h4>Related posts</h4>                
                    <div class="grid grid-221">
                        <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                                <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2025/01/20">2025/01/20</time>
                                 &middot; <span class="reading-time">1 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/hummingbird-and-cors/" target="">Hummingbird and CORS</a></h2>
                            <p>Learn how to use Hummingbird and CORS in Swift</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                                <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
        <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                                <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2024/12/28">2024/12/28</time>
                                 &middot; <span class="reading-time">8 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/realtime-mongodb-updates-with-changestreams-and-websockets/" target="">Realtime MongoDB Updates with ChangeStreams and WebSockets</a></h2>
                            <p>Learn how to implement real-time updates over WebSockets using ChangeStreams and MongoKitten</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                                <a href="https://swiftonserver.com/tags/databases/"><small>Databases</small></a>
        <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://swiftonserver.com/authors/tibor-bodecs/">
                                <img class="small rounded" src="/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2024/10/22">2024/10/22</time>
                                 &middot; <span class="reading-time">10 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/beginners-guide-to-protocol-buffers-and-grpc-with-swift/" target="">Beginner&#39;s Guide to Protocol Buffers and gRPC with Swift</a></h2>
                            <p>Learn Protocol Buffers and gRPC with Swift in this easy, step-by-step beginner&#39;s guide.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                                <a href="https://swiftonserver.com/tags/networking/"><small>Networking</small></a>
        <a href="https://swiftonserver.com/tags/package-highlight/"><small>Package Highlight</small></a>
        <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                                <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2024/10/01">2024/10/01</time>
                                 &middot; <span class="reading-time">6 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/using-hummingbird-request-context/" target="">Using Hummingbird&#39;s Request Contexts</a></h2>
                            <p>Learn about request contexts in Hummingbird and how to use them.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                                <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
        <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                                <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2024/09/30">2024/09/30</time>
                                 &middot; <span class="reading-time">9 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/how-to-build-a-proxy-server-with-hummingbird/" target="">How to Build a Proxy Server with Hummingbird</a></h2>
                            <p>Learn how to leverage the flexibility and performance of Hummingbird to build a proxy server.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                                <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
        <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                            </div>
                        </div>
                    <div class="card featured">
                            <span class="featured">featured</span>
                            
                            <div class="author-list">
                                <a href="https://swiftonserver.com/authors/joannis-orlandos/">
                                <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2024/09/24">2024/09/24</time>
                                 &middot; <span class="reading-time">7 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://swiftonserver.com/getting-started-with-hummingbird/" target="">Getting Started with Hummingbird</a></h2>
                            <p>Learn how to get started with Hummingbird 2, the modern Swift Web Framework.</p>
                        
                            <div class="spacer"></div>
                        
                            <div class="tag-list">
                                <a href="https://swiftonserver.com/tags/hummingbird/"><small>Hummingbird</small></a>
        <a href="https://swiftonserver.com/tags/server/"><small>Server</small></a>
                            </div>
                        </div>
                    </div>
                </section>
    
            </article>
        </div>
        
        <div>
            <div class="support">
                <a href="https://swiftcraft.uk/" target="_blank">
                    <img src="/images/logos/swiftcraft.png" alt="SwiftCraft logo">
                </a>
                <h4>
                    <a href="https://swiftcraft.uk/" target="_blank">SwiftCraft</a>
                </h4>
                <p>
                    SwiftCraft is a UK based Swift Conference, 19th-21st May 2025!
                    <br>
                    There'll be talks, workshops, and a lot of Swift (Server) fun!
                </p>
                <a class="cta" href="https://swiftcraft.uk/" target="_blank">Get Tickets</a>
            </div>
            
            <aside id="toc">
                <h4>On this page</h4>
                <ul>
                    <li class="first-level">
                        <a href="#Swift%20concurrency">Swift concurrency</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Swift%20service%20lifecycle%20v2">Swift service lifecycle v2</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Hummingbird%20core%20and%20foundation">Hummingbird core and foundation</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Jobs%20framework%20updates">Jobs framework updates</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Connection%20pools">Connection pools</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#HTTP%20improvements">HTTP improvements</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Router%20library">Router library</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#Generic%20request%20context">Generic request context</a>
                        <ul>
                        </ul>
                    </li>
        <li class="first-level">
                        <a href="#HB2%20example%20project">HB2 example project</a>
                        <ul>
                        </ul>
                    </li>
                </ul>
            </aside>
    
        </div>
    </div>
    
    </main>

    <footer id="site-footer">
        <div class="grid grid-421">
    
            <figure>
                <picture>
                    <source
                        srcset="/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        id="logo-image"
                        src="/images/logos/logo.png"
                        alt="Logo of Swift on server"
                        title="Swift on server"
                    >
                </picture>
            </figure>
            
            <div>
                <span style="display: block; height: 32px;">&nbsp;</span>
                <h4>Swift on server</h4>
                <p><small><a href="/" target="_blank">swiftonserver.com</a></small></p>
                <ul>
                    <li><a href="https://github.com/swift-on-server/" target="_blank">GitHub</a></li>
                    <li><a href="https://mastodon.social/@swiftonserver/" target="_blank">Mastodon</a></li>
                    <li><a href="/rss.xml" target="_blank">RSS</a></li>
                    <li><a href="/sitemap.xml" target="_blank">Sitemap</a></li>
                </ul>
            </div>
            
            <div>
                <a href="/authors/joannis-orlandos/">
                <img class="small rounded" src="/assets/authors/joannis-orlandos/joannis-orlandos.jpeg" alt="Joannis Orlandos">
                </a>
                <h4><a href="/authors/joannis-orlandos/">Joannis Orlandos</a></h4>
                <p><small><a href="https://unbeatable.software/" target="_blank">Unbeatable Software B.V.</a></small></p>
                <ul>
                    <li><a href="mailto:hello@unbeatable.software" target="_blank">Email</a></li>
                    <li><a href="https://github.com/Joannis" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/JoannisOrlandos" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@joannis@fosstodon.org" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
            <div>
                <a href="/authors/tibor-bodecs/">
                <img class="small rounded" src="/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                </a>
                <h4><a href="/authors/tibor-bodecs/">Tibor Bödecs</a></h4>
                <p><small><a href="https://binarybirds.com/" target="_blank">Binary Birds Kft.</a></small></p>
                <ul>
                    <li><a href="mailto:mail.tib@gmail.com" target="_blank">Email</a></li>
                    <li><a href="https://github.com/tib/" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/tiborbodecs" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@tiborbodecs" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
        </div>
        
        <section class="grid grid-221">
            <small>Swift on server &copy; 2022 - 2025</small>
            <small>This site was generated using <a href="https://swift.org/" target="_blank">Swift</a> & <a href="https://github.com/binarybirds/toucan" target="_blank">Toucan</a>.</small>
        </section>
    </footer>

    </div>

    

    <script type="text/javascript" src="/js/tooltips.js" async=""></script>
</body>
</html>
